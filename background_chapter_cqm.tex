\section{Categorical quantum mechanics}
\label{sec:cqm}
%
%I will first sketch the algebraic paradigm used by quantum computer scientists to do calculations.  Then I will give a categorical, graphical reformulation.
%
%The states of the quantum system are regarded as normalized vectors in $\FHilb$. Using the bra-ket notation a state $\phi$ is denoted by  $|\phi\rangle$ with adjoint $\langle \phi|$. This notation interacts nicely with the contravariant order of composition.  The inner product of states $|\phi\rangle$ and  $|\psi\rangle$ is denoted by  $\langle \psi |\phi\rangle:= \langle \psi|\circ |\phi\rangle$ and the outer product by $|\phi\rangle\langle \psi | := |\phi\rangle\circ\langle \psi |$.
%
%One often choses an ordered basis for a finite dimensional Hilbert space, called the standard basis.  The elements of the standard basis are denoted by $\{ | j  \rangle\}_{j\in \{0,\ldots, \dim|\mathcal{H}|-1\}} $.
%
%The purely quantum evolution of a quantum state is performed by postcomposition with unitary maps.  Because the unitary maps are norm-preserving, they take quantum states to quantum states.
%
%
%Measurement is slightly more complicated to describe.  One has to double the quantum state and embed it into the space of  density matrices.  Then by applying a projection operator to this space, one can calculuate the probability of certain measurement outcomes.
%
%We will return to the problem of measurement shortly, from a different perspective using string diagrams for \dag-compact closed categories.  This paradigm is known as ``categorical quantum mechanics,'' and follows the seminal work of Abramsky and Coecke \cite{abramsky}. 
%
%
%Less rigorous graphical perspectives on quantum mechanics have existed for quite a while. Notably Penrose used string diagrams in several of his papers \cite{penrosei,??}. It wasn't until relatively recently, that string diagrams for quantum processes started be be taken seriously in their own right.  
%
%
%In more in depth mathematical introduction to the subject of categorical quantum mechanics can be found in \cite{heunen}, with a more broadly accessible introduction being found in \cite{pqp}.
%The first step in introducing this formalism, is a graphical counterpart of the notion of an orthonormal basis:
String diagrams have been used in quantum theory for quite some time.  For example, as early as the work of Penrose \cite{penrosei}.  In such settings, string diagrams have been used as (often heuristic) tools for calculation. The more recent programme of ``categorical quantum mechanics,'' following the seminal paper of Abramsky and Coecke \cite{abramsky} has endeavoured to reformulate finite dimensional quantum mechanics using category theory.  In this setting,  string diagrams are formal mathematical objects: allowing certain essential features to be abstracted away from the usual setting of finite dimensional Hilbert spaces.

In this section, we  review this formalism as well as recent developments which are relevant to this thesis.  A more in depth mathematical introduction can be found in \cite{heunen}, with a more broadly accessible and applied introduction being found in \cite{pqp}.  For a more traditional approach to quantum computing see \cite{nielsen}.


To motivate this graphical treatment of finite dimensional quantum theory, we first establish some basic algebraic notations.


Fix a finite dimensional Hilbert space $\mathcal H$ with dimension $d\geq 2$, which we will regard as our local state-space. An element of  $\mathcal H$ is called a {\bf qubit} when $d=2$, a {\bf qutrit} when $d=3$, a {\bf qupit} when $d$ is  prime, a {\bf quopit} when $d$ an odd prime and  a {\bf qudit} when there is no restriction on $d$.

The elements of an orthonormal basis of $\mathcal H$ indexed by a set $\mathcal J$ are drawn in ``ket notation'' by $\{|b_{j}\rangle \}_{j \in \mathcal J}$.
The tensor product of these vectors is denoted as a list delimited by commas so that for example:
$$
| b_x \rangle \otimes | b_y\rangle =: |b_x,b_y \rangle  
$$
Most of the time,  we will not chose an arbitrary $d$-dimensional Hilbert space for the local state-space.  Instead, we will work in the Hilbert space of square summable functions on $\Z/d\Z$, $\ell^2(\Z/d\Z)$ (see Definition \ref{def:elltwo}).  Here, the elements of $\Z/d\Z$ induce a basis for  $\ell^2(\Z/d\Z)$ called the {\bf standard basis} or $Z$-basis.  We will denote the elements of the basis  as  $\{| 0\rangle , \ldots, |d-1\rangle \}$.  The structure of a ring is therefore transported onto the standard basis elements (or a field when $d$ is prime).  These are regarded as the $d$-level quantum analogue of classical dits.    Similarly, the $n$-qudit state space is regarded as the Hilbert space $\ell^2((\Z/d\Z)^n)$, so that the $n$-standard basis elements have the structure of an $n$-dimensional $\Z/d\Z$-bimodule (or vector space, when $d$ is prime).

Denote arbitrary vectors $\phi$ in $\mathcal H$ using this ket notation by $|\phi \rangle$; where the adjoint of $|\phi \rangle$ is denoted as a ``bra''  by $|\phi \rangle^\dag =: \langle \phi |$. 

Given two vectors $|\phi \rangle$ and $| \psi \rangle$ on the same space, the inner product ``bra-ket'' is denoted by $\langle \phi | \psi \rangle$ and the outer product by $|\phi \rangle\langle \psi|$. 


This notation allows allows us to represent matrices in terms of sums.  For example, a complex matrix from $d^n$ to $d^m$ regarded as an operator $A:\ell^2((\Z/d\Z)^n)\to \ell^2((\Z/d\Z)^m)$ with entries $a_{j,k}$ is denoted as follows:
$$
A  = \sum_{k=0}^{n-1} \sum_{j=0}^{m-1} a_{j,k}| j \rangle \langle k |
$$
Given another matrix $B:\ell^2((\Z/d\Z)^m)\to \ell^2((\Z/d\Z)^\ell)$ with entries $b_{k',j'}$:
$$
B  = \sum_{j'=0}^{m-1}\sum_{k'=0}^{\ell-1}  b_{k',j'}| k' \rangle \langle j' |
$$
Their composite is computed by matrix multiplication:
\begin{align*}
BA
  &=  \sum_{j'=0}^{m-1}\sum_{k'=0}^{\ell-1}  b_{k',j'}| k' \rangle \langle j' | \sum_{k=0}^{n-1} \sum_{j=0}^{m-1} a_{j,k}| j \rangle \langle k |
= \sum_{k=0}^{n-1} \sum_{j,j'=0}^{m-1}\sum_{k'=0}^{\ell-1}  b_{k',j'}a_{j,k}| k' \rangle \langle j' | j \rangle \langle k |\\
&= \sum_{k=0}^{n-1} \sum_{k'=0}^{\ell-1} \left(\sum_{j=0}^{m-1} b_{k',j}a_{j,k}\right)| k' \rangle \langle k |\\
\end{align*}
There is a graphical way to represent orthonormal bases:
\begin{lemma}[{\cite{coecke2013new}}]
\label{lem:specialdagfa}
Orthgonal bases $\{ |b_j\rangle \}_{j\in \mathcal J}$ in $\FHilb$ are in bijection with commutative \dag-Frobenius algebras.  The $\dag$-Frobenius algebras $\xcirc$ are of the form:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (40) at (18, 6.25) {};
		\node [style=none] (41) at (18, 7) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (40) to (41.center);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\sum_{j \in \mathcal J}
\dfrac{1}{\langle b_j |b_j\rangle}  \left(\
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (17) at (19.25, 6.25) {$|b_j\rangle$};
		\node [style=none] (27) at (19.25, 7) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (17) to (27.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right)
\ , \hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (40) at (21.75, 9.25) {};
		\node [style=none] (41) at (21.75, 10) {};
		\node [style=none] (42) at (21.25, 8.5) {};
		\node [style=none] (43) at (22.25, 8.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (40) to (41.center);
		\draw [in=-30, out=90] (43.center) to (40);
		\draw [in=90, out=-150] (40) to (42.center);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\sum_{j \in \mathcal J}
\dfrac{1}{\langle b_j |b_j\rangle}  \left(
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (52) at (32, 8) {};
		\node [style=map] (53) at (31.25, 6.25) {$\langle b_j|$};
		\node [style=map] (54) at (32.75, 6.25) {$\langle b_j|$};
		\node [style=map] (55) at (32, 7.25) {$|b_j\rangle$};
		\node [style=none] (56) at (31.25, 5.5) {};
		\node [style=none] (57) at (32.75, 5.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (55) to (52.center);
		\draw (56.center) to (53);
		\draw (57.center) to (54);
	\end{pgfonlayer}
\end{tikzpicture}
\right)
$$
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (44) at (25.75, 9.25) {};
		\node [style=none] (45) at (25.75, 8.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (44) to (45.center);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\sum_{j \in \mathcal J}
\dfrac{1}{\langle b_j |b_j\rangle}  \left(\
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (30) at (25.75, 7) {$\langle b_j|$};
		\node [style=none] (39) at (25.75, 6.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (30) to (39.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right)
 \ , \hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (48) at (28, 9.25) {};
		\node [style=none] (49) at (28, 8.5) {};
		\node [style=none] (50) at (27.5, 10) {};
		\node [style=none] (51) at (28.5, 10) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (48) to (49.center);
		\draw [in=30, out=-90] (51.center) to (48);
		\draw [in=-90, out=150] (48) to (50.center);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\sum_{j \in \mathcal J}
\dfrac{1}{\langle b_j |b_j\rangle}  \left(
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (58) at (35, 5.5) {};
		\node [style=map] (59) at (34.25, 7.25) {$|b_j\rangle$};
		\node [style=map] (60) at (35.75, 7.25) {$|b_j\rangle$};
		\node [style=map] (61) at (35, 6.25) {$\langle b_j|$};
		\node [style=none] (62) at (34.25, 8) {};
		\node [style=none] (63) at (35.75, 8) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (61) to (58.center);
		\draw (62.center) to (59);
		\draw (63.center) to (60);
	\end{pgfonlayer}
\end{tikzpicture}
\right)
$$
These are precisely the Frobenius algebras that (co)copy the basis elements.
It is easy to see how the laws of a commutative \dag-Frobenius algebra hold; however, the proof of the converse direction is quite a bit trickier.

Notice how {\em special} commutative \dag-Frobenius algebras $\zcirc$ are in bijection with orthonormal bases as:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (13, 7) {};
		\node [style=Z] (1) at (13, 8) {};
		\node [style=none] (2) at (13, 9) {};
		\node [style=none] (3) at (13, 6) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (3.center) to (0);
		\draw [bend left=45] (0) to (1);
		\draw [bend left=45] (1) to (0);
		\draw (1) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\sum_{j,k\in \mathcal J}
\dfrac{1}{\langle b_j |b_j\rangle \langle b_k |b_k\rangle  }
\left(
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (64) at (39.25, 10) {};
		\node [style=none] (65) at (39.25, 5.25) {};
		\node [style=map] (66) at (38.5, 8.25) {$\langle b_k|$};
		\node [style=map] (67) at (38.5, 7.25) {$|b_j\rangle$};
		\node [style=map] (68) at (40, 8.25) {$\langle b_k|$};
		\node [style=map] (69) at (40, 7.25) {$|b_j\rangle$};
		\node [style=map] (70) at (39.25, 6.25) {$\langle b_j|$};
		\node [style=map] (71) at (39.25, 9.25) {$|b_k\rangle$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (67) to (66);
		\draw (69) to (68);
		\draw (65.center) to (70);
		\draw (71) to (64.center);
	\end{pgfonlayer}
\end{tikzpicture}
\right)
=
\sum_{j,k\in \mathcal J}
\dfrac{\langle b_j|b_k \rangle^2}{\langle b_j |b_j\rangle \langle b_k |b_k\rangle  }
\left(
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (6) at (14.5, 8) {};
		\node [style=none] (7) at (14.5, 5.5) {};
		\node [style=map] (12) at (14.5, 6.25) {$\langle b_j|$};
		\node [style=map] (13) at (14.5, 7.25) {$|b_k\rangle$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (7.center) to (12);
		\draw (13) to (6.center);
	\end{pgfonlayer}
\end{tikzpicture}
\right)
$$
is equal to the the identity if and only if the basis is orthonormal:
$$
\sum_{j\in \mathcal J}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (6) at (14.5, 8) {};
		\node [style=none] (7) at (14.5, 5.5) {};
		\node [style=map] (12) at (14.5, 6.25) {$\langle b_j|$};
		\node [style=map] (13) at (14.5, 7.25) {$|b_j\rangle$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (7.center) to (12);
		\draw (13) to (6.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (2) at (13, 9) {};
		\node [style=none] (3) at (13, 6) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (3.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
\end{lemma}
We will colour special commutative \dag-Frobenius algebras $\zcirc$ and commutative \dag-Frobenius algebra for other, orthogonal bases $\xcirc$.  Recall the two variations of the normal form for special and non-special commutative \dag-Frobenius algebras:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (32) at (20.25, -0.5) {};
		\node [style=none] (33) at (19.25, -0.5) {};
		\node [style=none] (34) at (19.75, -0.5) {$\cdots$};
		\node [style=none] (35) at (19.25, -2.75) {};
		\node [style=Z] (36) at (19.75, -1.25) {};
		\node [style=none] (37) at (20.75, -0.5) {};
		\node [style=none] (38) at (20.25, -2.75) {$\cdots$};
		\node [style=none] (39) at (19.75, -2.75) {};
		\node [style=Z] (40) at (20.25, -2) {};
		\node [style=none] (41) at (20.75, -2.75) {};
		\node [style=none] (42) at (20, -1.5) {\reflectbox{$\ddots$}};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (35.center) to (36);
		\draw [in=-90, out=56] (36) to (32.center);
		\draw [in=124, out=-90] (33.center) to (36);
		\draw [in=-124, out=90] (39.center) to (40);
		\draw [in=90, out=-56] (40) to (41.center);
		\draw [in=-90, out=45] (40) to (37.center);
		\draw [bend right=45, looseness=1.25] (40) to (36);
		\draw [bend right=45, looseness=1.25] (36) to (40);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (11) at (4, -0.5) {};
		\node [style=none] (12) at (3, -0.5) {};
		\node [style=none] (13) at (3.5, -0.5) {$\cdots$};
		\node [style=none] (14) at (2.5, -2) {};
		\node [style=none] (15) at (3.5, -1.25) {};
		\node [style=none] (16) at (4.5, -0.5) {};
		\node [style=none] (17) at (3.5, -2) {$\cdots$};
		\node [style=none] (18) at (3, -2) {};
		\node [style=Z] (19) at (3.5, -1.25) {};
		\node [style=none] (20) at (4, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-150, out=90] (14.center) to (15);
		\draw [in=-90, out=56] (15) to (11.center);
		\draw [in=124, out=-90] (12.center) to (15);
		\draw [in=-124, out=90] (18.center) to (19);
		\draw [in=90, out=-56] (19) to (20.center);
		\draw [in=-90, out=30] (19) to (16.center);
	\end{pgfonlayer}
\end{tikzpicture}\ ,
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.5, -0.5) {};
		\node [style=none] (1) at (0.5, -0.5) {};
		\node [style=none] (2) at (1, -0.5) {$\cdots$};
		\node [style=none] (3) at (0.5, -2.75) {};
		\node [style=X] (4) at (1, -1.25) {};
		\node [style=none] (5) at (2, -0.5) {};
		\node [style=none] (6) at (1.5, -2.75) {$\cdots$};
		\node [style=none] (7) at (1, -2.75) {};
		\node [style=X] (8) at (1.5, -2) {};
		\node [style=none] (9) at (2, -2.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-124, out=90] (3.center) to (4);
		\draw [in=-90, out=56] (4) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
		\draw [in=-90, out=56] (8) to (5.center);
		\draw (8) to (4);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (11) at (4, -0.5) {};
		\node [style=none] (12) at (3, -0.5) {};
		\node [style=none] (13) at (3.5, -0.5) {$\cdots$};
		\node [style=none] (14) at (2.5, -2) {};
		\node [style=none] (15) at (3.5, -1.25) {};
		\node [style=none] (16) at (4.5, -0.5) {};
		\node [style=none] (17) at (3.5, -2) {$\cdots$};
		\node [style=none] (18) at (3, -2) {};
		\node [style=X] (19) at (3.5, -1.25) {};
		\node [style=none] (20) at (4, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-150, out=90] (14.center) to (15);
		\draw [in=-90, out=56] (15) to (11.center);
		\draw [in=124, out=-90] (12.center) to (15);
		\draw [in=-124, out=90] (18.center) to (19);
		\draw [in=90, out=-56] (19) to (20.center);
		\draw [in=-90, out=30] (19) to (16.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
A {\bf pure quantum state} is a vector $|\phi \rangle$ with norm 1, so that $|\langle\phi |\phi \rangle|^2=\langle \phi | \phi \rangle =1$. Quantum states are interpreted as the possible physical states of a quantum system which has been unexposed to the classical world.  The quantum evolution of pure quantum states is modeled by their postcomposition with unitary maps.  Unitary maps are precisely the linear automorphisms which preserve the norm, and thus, preserve pure quantum states.



To actually do computations with quantum states, one has to measure things using a classical interface. 
In \cite{cpm}, Selinger gives a construction to produce categories of quantum channels from general \dag-compact closed categories. When applied to $\FHilb$, this construction adds discarding behavior to quantum systems.  This will provide the necessary machinery to model measurement. 


We present this construction in terms of a quotient of the $\CoPara$ construction for the sake of uniformity of this thesis:
\begin{definition}
\label{def:cpm}
%Dagger category... equivalent to ioo compact closed conjugation 
Given a compact closed $\dag$-symmetric monoidal category $\X$, then  $\CPM(\X,(-)^\dag)$  (which we will denote by  $\CPM(\X)$ when the dagger is clear from the context) is the quotient of ${\CoPara}(\X)$ by the congruence relation:
$$
\left(X\xrightarrow{(f,S)} Y\right) \sim \left(X\xrightarrow{(g,T)} Y\right)  \iff
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0.5, 11.75) {};
		\node [style=none] (1) at (0.5, 10.75) {};
		\node [style=map] (2) at (0.5, 10.75) {$f$};
		\node [style=map] (3) at (0.5, 11.75) {$f^\dag$};
		\node [style=none] (4) at (0.5, 10) {};
		\node [style=none] (5) at (0.5, 12.5) {};
		\node [style=none] (6) at (1.25, 12.5) {};
		\node [style=none] (7) at (1.25, 10) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (5.center) to (3);
		\draw (3) to (2);
		\draw (2) to (4.center);
		\draw [in=-90, out=45, looseness=0.75] (2) to (6.center);
		\draw [in=-45, out=90] (7.center) to (3);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0.5, 11.75) {};
		\node [style=none] (1) at (0.5, 10.75) {};
		\node [style=map] (2) at (0.5, 10.75) {$g$};
		\node [style=map] (3) at (0.5, 11.75) {$g^\dag$};
		\node [style=none] (4) at (0.5, 10) {};
		\node [style=none] (5) at (0.5, 12.5) {};
		\node [style=none] (6) at (1.25, 12.5) {};
		\node [style=none] (7) at (1.25, 10) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (5.center) to (3);
		\draw (3) to (2);
		\draw (2) to (4.center);
		\draw [in=-90, out=45, looseness=0.75] (2) to (6.center);
		\draw [in=-45, out=90] (7.center) to (3);
	\end{pgfonlayer}
\end{tikzpicture}
$$
Draw elements of this equivalence class using the following notation:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (23, -0.5) {};
		\node [style=ground, scale=-1] (1) at (22.5, 0.5) {};
		\node [style=none] (2) at (23.5, 0.5) {};
		\node [style=map] (3) at (23, -0.5) {$f$};
		\node [style=none] (4) at (23, -1.25) {};
		\node [style=none] (5) at (23.5, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=150] (0.center) to (1);
		\draw [in=-90, out=30] (0.center) to (2.center);
		\draw (4.center) to (0.center);
		\draw (5.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (23, -0.5) {};
		\node [style=ground, scale=-1] (1) at (22.5, 0.5) {};
		\node [style=none] (2) at (23.5, 0.5) {};
		\node [style=map] (3) at (23, -0.5) {$g$};
		\node [style=none] (4) at (23, -1.25) {};
		\node [style=none] (5) at (23.5, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=150] (0.center) to (1);
		\draw [in=-90, out=30] (0.center) to (2.center);
		\draw (4.center) to (0.center);
		\draw (5.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
The dagger is defined as follows:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (23, -0.5) {};
		\node [style=ground, scale=-1] (1) at (22.5, 0.5) {};
		\node [style=none] (2) at (23.5, 0.5) {};
		\node [style=map] (3) at (23, -0.5) {$f$};
		\node [style=none] (4) at (23, -1.25) {};
		\node [style=none] (5) at (23.5, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=150] (0.center) to (1);
		\draw [in=-90, out=30] (0.center) to (2.center);
		\draw (4.center) to (0.center);
		\draw (5.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
\mapsto
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (6) at (25.5, -0.25) {};
		\node [style=ground, scale=-1] (7) at (24.75, 0.5) {};
		\node [style=none] (8) at (25.5, 1.25) {};
		\node [style=map] (9) at (25.5, -0.25) {$f^\dag$};
		\node [style=none] (10) at (25.75, -1.25) {};
		\node [style=none] (11) at (24.75, -0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (6.center) to (8.center);
		\draw [in=-45, out=90] (10.center) to (6.center);
		\draw [in=-90, out=-90, looseness=2.25] (6.center) to (11.center);
		\draw (11.center) to (7);
	\end{pgfonlayer}
\end{tikzpicture}
\hspace*{1cm} \text{so that \ \ }
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=ground] (7) at (24.75, 0.5) {};
		\node [style=none] (11) at (24.75, 1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (11.center) to (7);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=ground, scale=-1] (7) at (24.75, 0.5) {};
		\node [style=none] (11) at (24.75, -0.25) {};
		\node [style=none] (12) at (25.75, -0.25) {};
		\node [style=none] (13) at (25.75, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (11.center) to (7);
		\draw [in=270, out=-90] (11.center) to (12.center);
		\draw (12.center) to (13.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
Making $\CPM(\X)$ a \dag-symmetric monoidal cateory.
The map $d_X=((u^L_X)^{-1}, X)$ is called the {\bf discarding map} on $X$:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (5) at (54.55, -0.5) {};
		\node [style=ground, scale=-1] (6) at (54.55, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (5.center) to (6);
	\end{pgfonlayer}
\end{tikzpicture}
$$
The canonical functor $\X\to \CoPara(\X)\to\CPM(\X)$ taking $f \mapsto (f,I)$ is called {\bf doubling}. The maps in the image of this functor are {\bf pure}, and those which aren't are {\bf mixed}.
A map $f:X\to Y$ in $\CPM(\X)$ is called {\bf trace-preserving} when $f;d_Y = d_X$:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (53.55, -0.5) {};
		\node [style=ground, scale=-1] (1) at (53.55, 0) {};
		\node [style=map] (3) at (53.55, -0.5) {$f$};
		\node [style=none] (4) at (53.55, -1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (0.center) to (1);
		\draw (4.center) to (0.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (5) at (54.55, -0.5) {};
		\node [style=ground, scale=-1] (6) at (54.55, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (5.center) to (6);
	\end{pgfonlayer}
\end{tikzpicture}
$$
All maps can be obtained by composing pure maps with discard maps.  Given a mixed map $f$ in $\CPM(\X)$ such a factorization into a pure map followed by a discard map is a {\bf purification} of $f$.
\end{definition}
The compact closed structure of $\CPM(\X)$ is inherited from the doubling of the compact closed structure of $\X$.  If the \dag-symmetric monoidal structure of $\X$ is compatible with its compact closed structure, so that $\X$ is \dag-compact closed, then $\CPM(\X)$ is \dag-compact closed as well.

Oftentimes, we will bend the ``doubled picture" so that the inputs are on the bottom and the outputs are on the top:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (88) at (54.05, -0.5) {};
		\node [style=ground, scale=-1] (89) at (53.55, 0.5) {};
		\node [style=none] (90) at (54.55, 0.5) {};
		\node [style=map] (91) at (54.05, -0.5) {$f$};
		\node [style=none] (92) at (54.05, -1.25) {};
		\node [style=none] (93) at (54.55, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=150] (88.center) to (89);
		\draw [in=-90, out=30] (88.center) to (90.center);
		\draw (92.center) to (88.center);
		\draw (93.center) to (90.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (47.95, 8.75) {$(f^*)^\dag$};
		\node [style=map] (1) at (49.225, 8.75) {$f$};
		\node [style=none] (2) at (47.975, 10.5) {};
		\node [style=none] (3) at (49.225, 10.5) {};
		\node [style=none] (4) at (47.975, 8.75) {};
		\node [style=none] (5) at (49.225, 8.75) {};
		\node [style=none] (6) at (47.975, 7.75) {};
		\node [style=none] (7) at (49.225, 7.75) {};
		\node [style=none] (8) at (48.975, 10) {};
		\node [style=none] (9) at (48.475, 10) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=45, looseness=1.25] (4.center) to (2.center);
		\draw (3.center) to (5.center);
		\draw (6.center) to (4.center);
		\draw (5.center) to (7.center);
		\draw [in=120, out=-90, looseness=1.75] (8.center) to (4.center);
		\draw [in=90, out=450, looseness=1.50] (9.center) to (8.center);
		\draw [in=-90, out=150, looseness=0.75] (5.center) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
We could have chosen a different, equivalent congruence relation to quotient by to avoid the braid on the cap, but this would be incompatible with notation for stabilizer tableaux which we use much later in this thesis.

In the doubled picture, the composition of equivalence classes is  in $\CPM(\X)$ is composition in $\X$:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (10) at (50.975, 8.75) {$(f^*)^\dag$};
		\node [style=map] (11) at (52.25, 8.75) {$f$};
		\node [style=none] (12) at (51, 10.5) {};
		\node [style=none] (13) at (52.25, 10.5) {};
		\node [style=none] (14) at (51, 8.75) {};
		\node [style=none] (15) at (52.25, 8.75) {};
		\node [style=none] (16) at (51, 7.75) {};
		\node [style=none] (17) at (52.25, 7.75) {};
		\node [style=none] (18) at (52, 10) {};
		\node [style=none] (19) at (51.5, 10) {};
		\node [style=map] (20) at (51, 10.5) {$(g^*)^\dag$};
		\node [style=map] (21) at (52.275, 10.5) {$g$};
		\node [style=none] (22) at (51.025, 12.25) {};
		\node [style=none] (23) at (52.275, 12.25) {};
		\node [style=none] (24) at (51.025, 10.5) {};
		\node [style=none] (25) at (52.275, 10.5) {};
		\node [style=none] (28) at (52.025, 11.75) {};
		\node [style=none] (29) at (51.525, 11.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=45, looseness=1.25] (14.center) to (12.center);
		\draw (13.center) to (15.center);
		\draw (16.center) to (14.center);
		\draw (15.center) to (17.center);
		\draw [in=120, out=-90, looseness=1.75] (18.center) to (14.center);
		\draw [in=90, out=450, looseness=1.50] (19.center) to (18.center);
		\draw [in=-90, out=150, looseness=0.75] (15.center) to (19.center);
		\draw [in=-90, out=45, looseness=1.25] (24.center) to (22.center);
		\draw (23.center) to (25.center);
		\draw [in=120, out=-90, looseness=1.75] (28.center) to (24.center);
		\draw [in=90, out=450, looseness=1.50] (29.center) to (28.center);
		\draw [in=-90, out=150, looseness=0.75] (25.center) to (29.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (30) at (54.025, 9.35) {$(f^*)^\dag$};
		\node [style=map] (31) at (56.05, 9.35) {$f$};
		\node [style=none] (32) at (54.05, 10.5) {};
		\node [style=none] (33) at (56.05, 10.5) {};
		\node [style=none] (34) at (54.05, 9.35) {};
		\node [style=none] (35) at (56.05, 9.35) {};
		\node [style=none] (36) at (54.05, 8.35) {};
		\node [style=none] (37) at (56.05, 8.35) {};
		\node [style=none] (38) at (55.4, 11.75) {};
		\node [style=none] (39) at (54.55, 11.75) {};
		\node [style=map] (40) at (54.05, 10.5) {$(g^*)^\dag$};
		\node [style=map] (41) at (56.075, 10.5) {$g$};
		\node [style=none] (42) at (54.075, 12.25) {};
		\node [style=none] (43) at (56.075, 12.25) {};
		\node [style=none] (44) at (54.075, 10.5) {};
		\node [style=none] (45) at (56.075, 10.5) {};
		\node [style=none] (46) at (55.825, 11.75) {};
		\node [style=none] (47) at (54.975, 11.75) {};
		\node [style=none] (48) at (53.325, 10.75) {};
		\node [style=none] (49) at (53.325, 10.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (34.center) to (32.center);
		\draw (33.center) to (35.center);
		\draw (36.center) to (34.center);
		\draw (35.center) to (37.center);
		\draw [in=90, out=450, looseness=1.50] (39.center) to (38.center);
		\draw [in=-90, out=150, looseness=0.75] (35.center) to (39.center);
		\draw [in=-90, out=45, looseness=1.25] (44.center) to (42.center);
		\draw (43.center) to (45.center);
		\draw [in=120, out=-90, looseness=1.75] (46.center) to (44.center);
		\draw [in=90, out=450, looseness=1.50] (47.center) to (46.center);
		\draw [in=-90, out=150, looseness=0.75] (45.center) to (47.center);
		\draw [in=90, out=-90, looseness=0.75] (38.center) to (48.center);
		\draw (49.center) to (48.center);
		\draw [in=-90, out=150, looseness=0.75] (34.center) to (49.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (38) at (57.725, 8.25) {$((f;(1\otimes g))^*)^\dag$};
		\node [style=map] (39) at (60.5, 8.25) {$f;(1\otimes g)$};
		\node [style=none] (40) at (58, 10.5) {};
		\node [style=none] (41) at (60.75, 10.5) {};
		\node [style=none] (42) at (57.75, 8.25) {};
		\node [style=none] (43) at (60.5, 8.25) {};
		\node [style=none] (44) at (57.75, 7.25) {};
		\node [style=none] (45) at (60.5, 7.25) {};
		\node [style=none] (46) at (59, 10) {};
		\node [style=none] (47) at (58.5, 10) {};
		\node [style=none] (48) at (57.5, 9.25) {};
		\node [style=none] (49) at (60.25, 9.25) {};
		\node [style=otimes] (50) at (57.5, 9.25) {};
		\node [style=otimes] (51) at (60.25, 9.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=45, looseness=1.25] (42.center) to (40.center);
		\draw [in=45, out=-90, looseness=1.25] (41.center) to (43.center);
		\draw (44.center) to (42.center);
		\draw (43.center) to (45.center);
		\draw [in=90, out=450, looseness=1.50] (47.center) to (46.center);
		\draw [in=-120, out=135, looseness=1.25] (43.center) to (49.center);
		\draw [in=90, out=-30, looseness=1.25] (49.center) to (43.center);
		\draw [in=-120, out=135, looseness=1.25] (42.center) to (48.center);
		\draw [in=90, out=-30, looseness=1.25] (48.center) to (42.center);
		\draw [in=-90, out=90] (49.center) to (47.center);
		\draw [in=-90, out=90, looseness=0.75] (48.center) to (46.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
This different perspective will prove useful for the purposes of calculation.  
Notice how we could have instead defined a $\dag$-monoidal structure in terms of the conjugation functor $\bar{(-)}:=((-)^*)^\dag$, so that the equivalence classes look like:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (47.95, 8.75) {$\bar f$};
		\node [style=map] (1) at (49.225, 8.75) {$f$};
		\node [style=none] (2) at (47.975, 10.5) {};
		\node [style=none] (3) at (49.225, 10.5) {};
		\node [style=none] (4) at (47.975, 8.75) {};
		\node [style=none] (5) at (49.225, 8.75) {};
		\node [style=none] (6) at (47.975, 7.75) {};
		\node [style=none] (7) at (49.225, 7.75) {};
		\node [style=none] (8) at (48.975, 10) {};
		\node [style=none] (9) at (48.475, 10) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=45, looseness=1.25] (4.center) to (2.center);
		\draw (3.center) to (5.center);
		\draw (6.center) to (4.center);
		\draw (5.center) to (7.center);
		\draw [in=120, out=-90, looseness=1.75] (8.center) to (4.center);
		\draw [in=90, out=450, looseness=1.50] (9.center) to (8.center);
		\draw [in=-90, out=150, looseness=0.75] (5.center) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
Therefore, we shall invoke the $\CPM$ construction for both dagger structures and conjugation functors depending on which setting is most natural.


As mentioned before, the following example motivated this categorical construction:
\begin{example}
$\CPM(\FHilb, (-)^\dag)$ is the dagger compact closed category of density matrices between finite dimensional Hilbert spaces.


Or equivalently, preserving the  \dag-compact closed structure, 
$\CPM(\Mat_\C, \bar{(-)})$
is the strict symmetric monoidal skeleton of density matrices.
\end{example}
Density matrices model mixed quantum circuits. The discarding map is interpreted as quantum discarding which exposes the quantum system to the classical world. The adjoint of the discard map is interpreted as the maximally-mixed state which injects classical noise into a system.


A (mixed) {\bf quantum state}, is a trace-preserving state in $\CPM(\FHilb)$.  
Given a pure quantum state in $\FHilb$, its doubled version is a quantum state in $\CPM(\FHilb)$.
Mixed quantum states are the states which can be obtained by discarding parts of pure quantum states, so that they can be regarded as the physical states of a quantum/classical system.


The trace-preserving maps in $\CPM(\FHilb)$ model the mixed quantum-classical evolution of quantum states; as they are precisely the maps in $\CPM(\FHilb)$ which preserve quantum states.



Given an orthonormal basis $B=\{ |b_j\rangle \}_{j \in \mathcal J}$ of $\mathcal H$ and a quantum state state $|\phi\rangle$ on $\mathcal H$ then:
$$
\sum_{j\in \mathcal J}
 |\langle b_j|\psi \rangle|^2
=1
$$ 
This gives a probability distribution over $\mathcal J$.  The scalar  $0\leq |\langle b_j|\psi \rangle|^2\leq 1$ is interpreted as the probability of measuring the basis element $|b_j\rangle$ on the state $|\psi\rangle$ with respect to the basis $B$.
This basis dependent, probabilistic interpretation of quantum measurement is called the {\bf Born rule}, although it is usually stated slightly differently.

The $\CPM$ construction and special commutative $\dag$-Frobenius algebras allow us to perform quantum measurement using only string diagrams.  Some mathematical machinery is needed first:
\begin{definition}
Given a special \dag-commutative Frobenius algebra $B$ on a \dag-compact closed category $\X$, define the projector onto the $B$ basis to be the following map in $ \CPM(\X)$:
$$
p_B:=
\begin{tikzpicture}[scale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (10) at (0, 0.75) {};
		\node [style=none] (11) at (-0.25, 0) {};
		\node [style=none] (13) at (0, 1.5) {};
		\node [style=none] (14) at (-0.25, -0.75) {};
		\node [style=ground] (15) at (0.25, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (13.center) to (10);
		\draw [in=90, out=-135] (10) to (11.center);
		\draw (11.center) to (14.center);
		\draw [in=90, out=-45] (10) to (15);
	\end{pgfonlayer}
\end{tikzpicture}
$$
\end{definition}
In the doubled picture, we untangle the quantum spaghetti:
$$
\left\llbracket
\begin{tikzpicture}[scale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (10) at (0, 0.75) {};
		\node [style=none] (11) at (-0.25, 0) {};
		\node [style=none] (13) at (0, 1.5) {};
		\node [style=none] (14) at (-0.25, -0.75) {};
		\node [style=ground] (15) at (0.25, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (13.center) to (10);
		\draw [in=90, out=-135] (10) to (11.center);
		\draw (11.center) to (14.center);
		\draw [in=90, out=-45] (10) to (15);
	\end{pgfonlayer}
\end{tikzpicture}
\right\rrbracket
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (75) at (92.75, -0.55) {};
		\node [style=Z] (76) at (92.75, -0.55) {};
		\node [style=none] (77) at (92.45, -1.2) {};
		\node [style=none] (78) at (93.125, -1.2) {};
		\node [style=none] (79) at (92, -0.55) {};
		\node [style=none] (80) at (94.425, -1.15) {};
		\node [style=none] (81) at (92, -2.55) {};
		\node [style=none] (82) at (92.75, 0.2) {};
		\node [style=none] (83) at (92, 0.2) {};
		\node [style=none] (84) at (93.45, -1.2) {};
		\node [style=none] (85) at (92.7, -1.95) {};
		\node [style=none] (86) at (93.2, -1.95) {};
		\node [style=none] (87) at (94.2, -1.9) {};
		\node [style=none] (88) at (93.7, -1.95) {};
		\node [style=none] (89) at (94.425, 0.75) {};
		\node [style=none] (90) at (93.45, -0.7) {};
		\node [style=none] (91) at (94.925, -2.4) {};
		\node [style=Z] (92) at (94.925, -0.9) {};
		\node [style=none] (93) at (94.925, -0.925) {};
		\node [style=none] (94) at (95.325, -0.5) {};
		\node [style=none] (95) at (95.325, 0.75) {};
		\node [style=none] (96) at (93.45, 0.3) {};
		\node [style=none] (97) at (94.1, 0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-45] (76) to (78.center);
		\draw [in=90, out=-135] (76) to (77.center);
		\draw (79.center) to (81.center);
		\draw [in=90, out=-90, looseness=0.75] (82.center) to (79.center);
		\draw [in=90, out=-90, looseness=0.75] (83.center) to (75.center);
		\draw [bend left=270, looseness=1.25] (82.center) to (83.center);
		\draw [in=90, out=-90, looseness=0.50] (77.center) to (88.center);
		\draw [in=90, out=-90, looseness=0.50] (84.center) to (85.center);
		\draw [in=-90, out=-90] (85.center) to (88.center);
		\draw [in=-90, out=90, looseness=0.50] (87.center) to (78.center);
		\draw [in=90, out=-90, looseness=0.50] (80.center) to (86.center);
		\draw [bend right=90] (86.center) to (87.center);
		\draw [in=90, out=-90] (90.center) to (84.center);
		\draw (89.center) to (80.center);
		\draw (92) to (91.center);
		\draw [in=-90, out=30] (92) to (94.center);
		\draw [in=-90, out=135, looseness=0.50] (93.center) to (96.center);
		\draw [in=-90, out=90, looseness=0.75] (90.center) to (97.center);
		\draw [in=90, out=90] (97.center) to (96.center);
		\draw (95.center) to (94.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (97.325, -0.525) {};
		\node [style=Z] (1) at (97.325, -0.55) {};
		\node [style=none] (2) at (97.075, -0.95) {};
		\node [style=none] (3) at (98.25, -1.025) {};
		\node [style=none] (4) at (96.675, -0.525) {};
		\node [style=none] (5) at (96.675, -2.775) {};
		\node [style=none] (6) at (97.325, 0.225) {};
		\node [style=none] (7) at (96.675, 0.225) {};
		\node [style=none] (8) at (97.825, -1.025) {};
		\node [style=none] (9) at (97.825, -1.525) {};
		\node [style=none] (10) at (97.825, 0.55) {};
		\node [style=none] (11) at (97.825, -2.775) {};
		\node [style=Z] (12) at (97.825, -2.15) {};
		\node [style=none] (13) at (98.45, -1.5) {};
		\node [style=none] (14) at (98.45, 0.55) {};
		\node [style=none] (15) at (96.875, -1.55) {};
		\node [style=none] (16) at (97.325, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-15, looseness=0.75] (1) to (3.center);
		\draw [in=90, out=-135] (1) to (2.center);
		\draw (4.center) to (5.center);
		\draw [in=90, out=-90, looseness=0.75] (6.center) to (4.center);
		\draw [in=90, out=-90, looseness=0.75] (7.center) to (0.center);
		\draw [bend left=270, looseness=1.25] (6.center) to (7.center);
		\draw [in=90, out=-90, looseness=0.75] (2.center) to (9.center);
		\draw (12) to (11.center);
		\draw [in=-90, out=15] (12) to (13.center);
		\draw [in=90, out=90] (16.center) to (15.center);
		\draw (14.center) to (13.center);
		\draw [in=-90, out=-90, looseness=1.25] (16.center) to (9.center);
		\draw (8.center) to (10.center);
		\draw [in=-90, out=-90, looseness=1.50] (8.center) to (3.center);
		\draw [in=-90, out=165] (12) to (15.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (99) at (68.15, 1) {};
		\node [style=none] (100) at (67.2, -1.225) {};
		\node [style=Z] (101) at (67.5, 0.25) {};
		\node [style=none] (102) at (67.5, 0.75) {};
		\node [style=none] (103) at (68.15, -0.25) {};
		\node [style=none] (104) at (66.85, 0.75) {};
		\node [style=none] (105) at (67.75, 1) {};
		\node [style=none] (106) at (66.85, -1.25) {};
		\node [style=none] (107) at (67.75, 1.5) {};
		\node [style=none] (108) at (68.15, 1.5) {};
		\node [style=none] (109) at (67.5, -0.25) {};
		\node [style=none] (110) at (67.475, 1.25) {};
		\node [style=none] (111) at (66.8, 1.25) {};
		\node [style=none] (112) at (67.525, -0.75) {};
		\node [style=none] (113) at (68.15, -0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (101) to (102.center);
		\draw [in=-90, out=90] (103.center) to (105.center);
		\draw (104.center) to (106.center);
		\draw (107.center) to (105.center);
		\draw (99.center) to (108.center);
		\draw [in=45, out=-90] (99.center) to (101);
		\draw [in=90, out=-150, looseness=0.75] (101) to (100.center);
		\draw [in=-90, out=90] (104.center) to (110.center);
		\draw [in=-270, out=-90] (111.center) to (102.center);
		\draw (101) to (109.center);
		\draw [in=-270, out=-90] (103.center) to (112.center);
		\draw [in=-90, out=-450, looseness=1.25] (112.center) to (113.center);
		\draw [in=-90, out=90] (113.center) to (109.center);
		\draw [in=-270, out=90, looseness=1.75] (111.center) to (110.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (159) at (26.75, -1) {};
		\node [style=none] (160) at (26.225, 1.475) {};
		\node [style=Z] (161) at (25.85, 0) {};
		\node [style=none] (162) at (25.85, -0.5) {};
		\node [style=none] (163) at (25.425, 0) {};
		\node [style=none] (164) at (26.7, -0.5) {};
		\node [style=none] (165) at (26.35, -1) {};
		\node [style=none] (166) at (25.2, 1.5) {};
		\node [style=none] (167) at (26.35, -1.5) {};
		\node [style=none] (168) at (26.75, -1.5) {};
		\node [style=none] (169) at (25.85, 0.5) {};
		\node [style=none] (170) at (26.075, -1) {};
		\node [style=none] (171) at (25.4, -1) {};
		\node [style=none] (172) at (25.425, 1) {};
		\node [style=none] (173) at (25.85, 1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (161) to (162.center);
		\draw [in=90, out=-90] (163.center) to (165.center);
		\draw [in=-90, out=90] (164.center) to (166.center);
		\draw (167.center) to (165.center);
		\draw (159.center) to (168.center);
		\draw [in=-45, out=90] (159.center) to (161);
		\draw [in=-90, out=45] (161) to (160.center);
		\draw [in=90, out=-90] (164.center) to (170.center);
		\draw [in=270, out=90] (171.center) to (162.center);
		\draw (161) to (169.center);
		\draw [in=270, out=90] (163.center) to (172.center);
		\draw [in=90, out=450, looseness=1.25] (172.center) to (173.center);
		\draw [in=90, out=-90] (173.center) to (169.center);
		\draw [in=270, out=-90, looseness=1.75] (171.center) to (170.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (80) at (65.275, -0.75) {};
		\node [style=none] (81) at (64.175, 1.225) {};
		\node [style=Z] (82) at (64.375, 0) {};
		\node [style=none] (84) at (64.375, -0.5) {};
		\node [style=none] (85) at (65.3, 0) {};
		\node [style=none] (86) at (63.8, -0.5) {};
		\node [style=none] (87) at (64.625, -0.75) {};
		\node [style=none] (88) at (63.8, 1.25) {};
		\node [style=none] (89) at (64.625, -1.25) {};
		\node [style=none] (90) at (65.275, -1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (82) to (84.center);
		\draw [bend left=90, looseness=1.25] (84.center) to (86.center);
		\draw [in=90, out=-90] (85.center) to (87.center);
		\draw (86.center) to (88.center);
		\draw (89.center) to (87.center);
		\draw (80.center) to (90.center);
		\draw [in=-45, out=90] (80.center) to (82);
		\draw [in=-90, out=120] (82) to (81.center);
		\draw [in=90, out=60, looseness=1.50] (82) to (85.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
Recall that a map $e$ is a projector when it is idempotent (so that $e^2=e$) and self-adjoint (so that $e^\dag=e$).
$p_B$ is idempotent because:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (115) at (102.475, 1) {};
		\node [style=Z] (116) at (101.575, 2) {};
		\node [style=none] (117) at (101.575, 1.5) {};
		\node [style=none] (118) at (102.5, 2) {};
		\node [style=none] (119) at (100.8, 1.5) {};
		\node [style=none] (120) at (101.825, 1) {};
		\node [style=none] (123) at (101.575, 2) {};
		\node [style=none] (124) at (100.45, 3.475) {};
		\node [style=Z] (125) at (100.65, 2.75) {};
		\node [style=none] (126) at (100.65, 2.25) {};
		\node [style=none] (127) at (101.575, 2.75) {};
		\node [style=none] (128) at (100.075, 2.25) {};
		\node [style=none] (129) at (100.825, 2) {};
		\node [style=none] (130) at (100.075, 3.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (116) to (117.center);
		\draw [bend left=90, looseness=1.25] (117.center) to (119.center);
		\draw [in=90, out=-90] (118.center) to (120.center);
		\draw [in=-45, out=90] (115.center) to (116);
		\draw [in=90, out=60, looseness=1.50] (116) to (118.center);
		\draw (125) to (126.center);
		\draw [bend left=90, looseness=1.25] (126.center) to (128.center);
		\draw [in=90, out=-90] (127.center) to (129.center);
		\draw (128.center) to (130.center);
		\draw [in=-45, out=90] (123.center) to (125);
		\draw [in=-90, out=120] (125) to (124.center);
		\draw [in=90, out=60, looseness=1.50] (125) to (127.center);
		\draw (119.center) to (129.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (18.325, -0.025) {};
		\node [style=Z] (1) at (17.95, -1.2) {};
		\node [style=none] (2) at (17.575, -0.375) {};
		\node [style=none] (3) at (17.7, -1.7) {};
		\node [style=none] (4) at (17.2, -1.7) {};
		\node [style=none] (5) at (17.45, -1.2) {};
		\node [style=none] (6) at (17.2, 0) {};
		\node [style=none] (7) at (18.6, -2.45) {};
		\node [style=Z] (8) at (17.95, -1.2) {};
		\node [style=none] (9) at (18.1, -0.5) {};
		\node [style=none] (10) at (17.95, -1.7) {};
		\node [style=none] (11) at (18.45, -0.95) {};
		\node [style=none] (12) at (17.45, -1.7) {};
		\node [style=none] (13) at (18.2, -2.45) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=150, out=180, looseness=1.25] (2.center) to (1);
		\draw [in=90, out=-150] (1) to (3.center);
		\draw [bend left=90, looseness=1.25] (3.center) to (4.center);
		\draw (4.center) to (6.center);
		\draw [in=-90, out=45] (1) to (0.center);
		\draw [in=120, out=180, looseness=1.25] (9.center) to (8);
		\draw (8) to (10.center);
		\draw [in=0, out=90] (11.center) to (9.center);
		\draw [bend left=90, looseness=1.25] (10.center) to (12.center);
		\draw [in=90, out=-90] (11.center) to (13.center);
		\draw [in=-45, out=90] (7.center) to (8);
		\draw (12.center) to (5.center);
		\draw [in=0, out=90, looseness=0.75] (5.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (54.425, -2.475) {};
		\node [style=Z] (1) at (54.05, -3.65) {};
		\node [style=none] (2) at (53.8, -4.4) {};
		\node [style=none] (3) at (52.525, -4.4) {};
		\node [style=none] (4) at (52.525, -2.45) {};
		\node [style=none] (5) at (54.7, -5.15) {};
		\node [style=Z] (6) at (54.05, -3.65) {};
		\node [style=none] (7) at (54.2, -2.95) {};
		\node [style=none] (8) at (54.55, -3.4) {};
		\node [style=none] (9) at (54.3, -5.15) {};
		\node [style=none] (10) at (53.6, -3.9) {};
		\node [style=none] (11) at (53.3, -3.9) {};
		\node [style=Z] (12) at (53.425, -3.15) {};
		\node [style=none] (13) at (52.975, -3.9) {};
		\node [style=Z] (14) at (53.35, -4.45) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-150] (1) to (2.center);
		\draw [bend left=90, looseness=1.25] (2.center) to (3.center);
		\draw (3.center) to (4.center);
		\draw [in=-90, out=45] (1) to (0.center);
		\draw [in=120, out=180, looseness=1.25] (7.center) to (6);
		\draw [in=0, out=90] (8.center) to (7.center);
		\draw [in=90, out=-90] (8.center) to (9.center);
		\draw [in=-45, out=90] (5.center) to (6);
		\draw [bend left=90, looseness=1.25] (10.center) to (11.center);
		\draw [in=90, out=-105, looseness=1.25] (12) to (10.center);
		\draw [in=165, out=-90] (13.center) to (14);
		\draw [in=150, out=-30] (12) to (6);
		\draw [in=-90, out=15] (14) to (6);
		\draw [in=75, out=-270] (11.center) to (13.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (54.425, -1.775) {};
		\node [style=Z] (1) at (54.05, -2.95) {};
		\node [style=none] (2) at (53.8, -3.7) {};
		\node [style=none] (3) at (52.775, -3.7) {};
		\node [style=none] (4) at (52.775, -1.75) {};
		\node [style=none] (5) at (54.7, -4.45) {};
		\node [style=Z] (6) at (54.05, -2.95) {};
		\node [style=none] (7) at (54.2, -2.25) {};
		\node [style=none] (8) at (54.55, -2.7) {};
		\node [style=none] (9) at (54.3, -4.45) {};
		\node [style=Z] (10) at (53.35, -2.45) {};
		\node [style=Z] (11) at (53.35, -3.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-150] (1) to (2.center);
		\draw [bend left=90, looseness=1.25] (2.center) to (3.center);
		\draw (3.center) to (4.center);
		\draw [in=-90, out=45] (1) to (0.center);
		\draw [in=120, out=180, looseness=1.25] (7.center) to (6);
		\draw [in=0, out=90] (8.center) to (7.center);
		\draw [in=90, out=-90] (8.center) to (9.center);
		\draw [in=-45, out=90] (5.center) to (6);
		\draw [in=150, out=-30] (10) to (6);
		\draw [in=-90, out=15] (11) to (6);
		\draw [bend left=45] (11) to (10);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (9) at (54.425, -4.425) {};
		\node [style=Z] (10) at (54.05, -3.25) {};
		\node [style=none] (11) at (54.15, -2.5) {};
		\node [style=none] (12) at (53.025, -2.5) {};
		\node [style=none] (13) at (53.025, -4.45) {};
		\node [style=none] (14) at (54.7, -1.75) {};
		\node [style=Z] (15) at (54.05, -3.25) {};
		\node [style=none] (16) at (54.2, -3.95) {};
		\node [style=none] (17) at (54.55, -3.5) {};
		\node [style=none] (18) at (54.3, -1.75) {};
		\node [style=Z] (20) at (53.8, -2.625) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=105, looseness=1.25] (10) to (11.center);
		\draw [bend right=90, looseness=1.25] (11.center) to (12.center);
		\draw (12.center) to (13.center);
		\draw [in=90, out=-45] (10) to (9.center);
		\draw [in=-120, out=-180, looseness=1.25] (16.center) to (15);
		\draw [in=0, out=-90] (17.center) to (16.center);
		\draw [in=-90, out=90] (17.center) to (18.center);
		\draw [in=45, out=-90] (14.center) to (15);
		\draw [in=75, out=-15, looseness=1.25] (20) to (15);
		\draw [in=-105, out=150] (15) to (20);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (80) at (65.275, -0.75) {};
		\node [style=none] (81) at (64.175, 1.225) {};
		\node [style=Z] (82) at (64.375, 0) {};
		\node [style=none] (84) at (64.375, -0.5) {};
		\node [style=none] (85) at (65.3, 0) {};
		\node [style=none] (86) at (63.8, -0.5) {};
		\node [style=none] (87) at (64.625, -0.75) {};
		\node [style=none] (88) at (63.8, 1.25) {};
		\node [style=none] (89) at (64.625, -1.25) {};
		\node [style=none] (90) at (65.275, -1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (82) to (84.center);
		\draw [bend left=90, looseness=1.25] (84.center) to (86.center);
		\draw [in=90, out=-90] (85.center) to (87.center);
		\draw (86.center) to (88.center);
		\draw (89.center) to (87.center);
		\draw (80.center) to (90.center);
		\draw [in=-45, out=90] (80.center) to (82);
		\draw [in=-90, out=120] (82) to (81.center);
		\draw [in=90, out=60, looseness=1.50] (82) to (85.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
And self-adjoint because:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (99) at (68.15, 1) {};
		\node [style=none] (100) at (67.2, -1.225) {};
		\node [style=Z] (101) at (67.5, 0.25) {};
		\node [style=none] (102) at (67.5, 0.75) {};
		\node [style=none] (103) at (68.15, -0.25) {};
		\node [style=none] (104) at (66.85, 0.75) {};
		\node [style=none] (105) at (67.75, 1) {};
		\node [style=none] (106) at (66.85, -1.25) {};
		\node [style=none] (107) at (67.75, 1.5) {};
		\node [style=none] (108) at (68.15, 1.5) {};
		\node [style=none] (109) at (67.5, -0.25) {};
		\node [style=none] (110) at (67.475, 1.25) {};
		\node [style=none] (111) at (66.8, 1.25) {};
		\node [style=none] (112) at (67.525, -0.75) {};
		\node [style=none] (113) at (68.15, -0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (101) to (102.center);
		\draw [in=-90, out=90] (103.center) to (105.center);
		\draw (104.center) to (106.center);
		\draw (107.center) to (105.center);
		\draw (99.center) to (108.center);
		\draw [in=45, out=-90] (99.center) to (101);
		\draw [in=90, out=-150, looseness=0.75] (101) to (100.center);
		\draw [in=-90, out=90] (104.center) to (110.center);
		\draw [in=-270, out=-90] (111.center) to (102.center);
		\draw (101) to (109.center);
		\draw [in=-270, out=-90] (103.center) to (112.center);
		\draw [in=-90, out=-450, looseness=1.25] (112.center) to (113.center);
		\draw [in=-90, out=90] (113.center) to (109.center);
		\draw [in=-270, out=90, looseness=1.75] (111.center) to (110.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (159) at (26.75, -1) {};
		\node [style=none] (160) at (26.225, 1.475) {};
		\node [style=Z] (161) at (25.85, 0) {};
		\node [style=none] (162) at (25.85, -0.5) {};
		\node [style=none] (163) at (25.425, 0) {};
		\node [style=none] (164) at (26.7, -0.5) {};
		\node [style=none] (165) at (26.35, -1) {};
		\node [style=none] (166) at (25.2, 1.5) {};
		\node [style=none] (167) at (26.35, -1.5) {};
		\node [style=none] (168) at (26.75, -1.5) {};
		\node [style=none] (169) at (25.85, 0.5) {};
		\node [style=none] (170) at (26.075, -1) {};
		\node [style=none] (171) at (25.4, -1) {};
		\node [style=none] (172) at (25.425, 1) {};
		\node [style=none] (173) at (25.85, 1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (161) to (162.center);
		\draw [in=90, out=-90] (163.center) to (165.center);
		\draw [in=-90, out=90] (164.center) to (166.center);
		\draw (167.center) to (165.center);
		\draw (159.center) to (168.center);
		\draw [in=-45, out=90] (159.center) to (161);
		\draw [in=-90, out=45] (161) to (160.center);
		\draw [in=90, out=-90] (164.center) to (170.center);
		\draw [in=270, out=90] (171.center) to (162.center);
		\draw (161) to (169.center);
		\draw [in=270, out=90] (163.center) to (172.center);
		\draw [in=90, out=450, looseness=1.25] (172.center) to (173.center);
		\draw [in=90, out=-90] (173.center) to (169.center);
		\draw [in=270, out=-90, looseness=1.75] (171.center) to (170.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (80) at (65.275, -0.75) {};
		\node [style=none] (81) at (64.175, 1.225) {};
		\node [style=Z] (82) at (64.375, 0) {};
		\node [style=none] (84) at (64.375, -0.5) {};
		\node [style=none] (85) at (65.3, 0) {};
		\node [style=none] (86) at (63.8, -0.5) {};
		\node [style=none] (87) at (64.625, -0.75) {};
		\node [style=none] (88) at (63.8, 1.25) {};
		\node [style=none] (89) at (64.625, -1.25) {};
		\node [style=none] (90) at (65.275, -1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (82) to (84.center);
		\draw [bend left=90, looseness=1.25] (84.center) to (86.center);
		\draw [in=90, out=-90] (85.center) to (87.center);
		\draw (86.center) to (88.center);
		\draw (89.center) to (87.center);
		\draw (80.center) to (90.center);
		\draw [in=-45, out=90] (80.center) to (82);
		\draw [in=-90, out=120] (82) to (81.center);
		\draw [in=90, out=60, looseness=1.50] (82) to (85.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
Therefore it is actually a projector.


Given a quantum state $| \psi \rangle$ and an orthonormal basis  $B$; $|\psi\rangle$ is said to {\bf collapse} onto the basis  $B$  when it is postcomposed with $p_B$ as follows $p_B|\psi\rangle$.  This  transforms a quantum state into a stochastic mixture of all of the basis elements of $B$.



To promote these classical stochastic mixtures to their own systems, we need a way to turn subobjects into objects:
\begin{definition}
\label{def:idem}
Given a category $\X$ and a class of idempotents $\mathcal I$, the {\bf Karoubi envelope of $\X$ at $\mathcal{I}$}, ${\sf Split}_{\mathcal I}(\X)$ is the category with:
\begin{description}
\item[Objects:] Pairs $(X,e)$ where $X$ is an object of $\X$ and $e:X\to X$ is in $\mathcal I$.
\item[Maps:] A map $(e,f,m):(X,e)\to (Y,m)$ is a map $f:X\to Y$ in $\X$ such that $e;f;m=f$.
\item[Composition:] $(e,f,m);(m,g,\ell) = (e,f;g,\ell)$.
\item[Identities:] $1_{(X,e)}=(1_X,e,1_X)$.
\end{description}
In particular, when $\mathcal{I}$ contains all idempotents in $\X$, call  ${\sf Split}(\X):={\sf Split}_{\mathcal I}(\X)$ {\bf the Karoubi envelope of $\X$}.
$\X$ fully and faithfully embeds into its Karoubi envelope via the functor:
$$
\left(X\xrightarrow{f}Y\right)
\mapsto 
\left((X,1_X)\xrightarrow{(1_X,f,1_Y)}(Y,1_Y)\right)
$$
$\X$ is {\bf Cauchy-complete} when this embedding is an equivalence. 
Moreover, when $\X$ is monoidal, symmetric monoidal or compact closed, so is ${\sf Split}(\X)$ with the embedding preserving this structure.


${\sf Split}_{{\mathcal I }\cup \{ 1_X | X \in \X\}}(\X)$ is said to be the category obtained by {\bf splitting the idempotents in $\mathcal I$}.
When one splits an idempotent $e:X\to X$, then $(X,e)$ is the retract of $(X, 1_X)$:
$$
\xymatrix{
(X,e) \ar@{>->}[r]^{(e,e,1_X)} \ar@{=}[dr]_{(1_X,e,1_X)} & (X,1_X)  \ar@{->>}[d]^{(1_X,e,e)}\\
& (X,e)
}\, \hspace*{.5cm}
\xymatrix{
(X,1_X) \ar@{->>}[r]^{(1_X,e,e)} \ar[dr]_{(e,e,e)} & (X,e)  \ar@{>->}[d]^{(e,e,1_X)}\\
& (X,1_X)
}
$$
\end{definition}
This specializes to $\dag$-compact closed categories, so that projectors get promoted to objects:
\begin{definition}[{\cite{idempotent}}]
\label{def:dagidem}
Given a $\dag$-category $\X$ and class of projectors $\mathcal I$ in $\X$, then  ${\sf Split}_{\mathcal I}(\X)$ is a $\dag$ category.
The map $(e,1_X, 1_X) :(X,e)\to (X,1_X)$ is an isometry with adjoint $(1_X,1_X, e) :(X,1_X)\to (X,e)$ .
In particular, when $\X$ is $\dag$-compact closed then so is ${\sf Split}^\dag(\X)$, with the embedding preserving this structure.
\end{definition}
In \cite{idempotent}, they show that splitting projectors in $\CPM(\FHilb)$ yields a category where the the split projectors can be interpreted as classical types:
\begin{remark}
\label{rem:stoch}
Given a basis $B = \{|b_j\rangle \}_{j \in {\mathcal J}}$ for $\mathcal{H}$, the isometry  $(p_B,1_\mathcal{H}, 1_\mathcal{H}) :(\mathcal{H},p_B)\to (\mathcal{H},1_\mathcal{H})$ is regarded as the {\bf state preparation map} and its adjoint $(1_\mathcal{H},1_\mathcal{H}, p_B) :(\mathcal{H},1_\mathcal{H})\to (\mathcal{H},p_B)$  a {\bf destructive measurement} with respect to the basis $B$.  The maps between these idempotents are (unnormalized) stochastic processes.
\end{remark}
Let us unpack this a bit. 
%Suppose we have the classical state $|b_j\rangle$.  This corresponds to the state $(1_I,|b_j\rangle, p_B):(I,1_I)\to (\mathcal{H},p_b)$.  Now postcomposing this with the state preparation map $(p_B,p_B,1_\mathcal{H}) :(\mathcal{H},p_B)\to (\mathcal{H},1_\mathcal{H})$ regards $|b_j \rangle$ as a pure quantum state.  
%
%Going in the opposite direction, suppose we want to find the probability of measuring the state $|b_j\rangle$.  By precomposing the map $(p_B, \langle b_j|, 1_I):(\mathcal H, p_B)\to (I,1_I)$ with the measurement map $(1_\mathcal{H},1_\mathcal{H}, p_B) :(\mathcal{H},1_\mathcal{H})\to (\mathcal{H},p_B)$ we regard $\langle b_j|$ as a pure quantum effect.
%Therefore, if we were to precompose this composite with a quantum state $|\psi\rangle$, we would obtain the probability $|\langle \psi| b_j\rangle|^2$.
Take an orthonormal basis $B$ for $\mathcal H$ and $B'$ for $\mathcal{H}'$ corresponding to a special commutative \dag-Frobenius algebras $\zcirc$ and $\xcirc$, respectively.  Then maps $(\mathcal{H},p_B)\to (\mathcal{H}',p_{B'})$ correspond to maps $p_B;f;p_{B'}$ for some $f:\mathcal{H}\to \mathcal{H}'$  in $\CPM(\FHilb)$:
\begin{equation}
\label{eq:proj}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (114) at (71.025, -3.825) {};
		\node [style=none] (115) at (70.275, -2.1) {};
		\node [style=Z] (116) at (70.375, -2.825) {};
		\node [style=none] (117) at (70.875, -2.075) {};
		\node [style=none] (118) at (70.375, -3.325) {};
		\node [style=none] (119) at (71.125, -2.575) {};
		\node [style=none] (120) at (69.875, -3.325) {};
		\node [style=none] (121) at (70.625, -3.825) {};
		\node [style=none] (122) at (69.925, -2.075) {};
		\node [style=none] (123) at (70.275, -2.075) {};
		\node [style=none] (124) at (69.525, 0.15) {};
		\node [style=X] (125) at (69.65, -1.075) {};
		\node [style=none] (126) at (70.15, -0.325) {};
		\node [style=none] (127) at (69.65, -1.575) {};
		\node [style=none] (128) at (70.4, -0.825) {};
		\node [style=none] (129) at (69.15, -1.575) {};
		\node [style=none] (130) at (69.925, -2.075) {};
		\node [style=none] (131) at (69.15, 0.175) {};
		\node [style=none] (132) at (69.925, -2.075) {};
		\node [style=none] (133) at (70.275, -2.075) {};
		\node [style=map] (134) at (70.1, -2.075) {$f$};
		\node [style=none] (135) at (71, -3.85) {};
		\node [style=none] (136) at (70.625, -3.825) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=60, out=180, looseness=1.25] (117.center) to (116);
		\draw (116) to (118.center);
		\draw [in=0, out=90] (119.center) to (117.center);
		\draw [bend left=90, looseness=1.25] (118.center) to (120.center);
		\draw [in=90, out=-90] (119.center) to (121.center);
		\draw (120.center) to (122.center);
		\draw [in=-45, out=90] (114.center) to (116);
		\draw [in=-90, out=120, looseness=0.75] (116) to (115.center);
		\draw [in=60, out=180, looseness=1.25] (126.center) to (125);
		\draw (125) to (127.center);
		\draw [in=0, out=90] (128.center) to (126.center);
		\draw [bend left=90, looseness=1.25] (127.center) to (129.center);
		\draw [in=90, out=-90] (128.center) to (130.center);
		\draw (129.center) to (131.center);
		\draw [in=-45, out=90] (123.center) to (125);
		\draw [in=-90, out=120, looseness=0.75] (125) to (124.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (51) at (89.65, 0.175) {};
		\node [style=none] (52) at (89.125, -0.6) {};
		\node [style=none] (53) at (89.45, -1.1) {};
		\node [style=none] (54) at (88.775, 1.4) {};
		\node [style=X] (55) at (88.775, 0.675) {};
		\node [style=none] (56) at (88.525, 0.425) {};
		\node [style=none] (57) at (88.05, 0.425) {};
		\node [style=none] (58) at (88.05, 1.425) {};
		\node [style=X] (59) at (89.125, 0.15) {};
		\node [style=none] (60) at (89.125, 0.15) {};
		\node [style=none] (61) at (89.65, -0.575) {};
		\node [style=none] (62) at (89.45, -1.1) {};
		\node [style=map] (63) at (89.425, -1.075) {$f$};
		\node [style=none] (64) at (90.7, -2.275) {};
		\node [style=none] (65) at (89.95, -3.025) {};
		\node [style=none] (67) at (89.45, -1.1) {};
		\node [style=Z] (68) at (89.675, -1.775) {};
		\node [style=none] (69) at (89.425, -2.025) {};
		\node [style=none] (70) at (89.025, -2) {};
		\node [style=none] (71) at (89.45, -1.1) {};
		\node [style=Z] (72) at (89.95, -2.275) {};
		\node [style=none] (73) at (89.95, -2.275) {};
		\node [style=none] (74) at (90.7, -3.025) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=150, looseness=0.75] (53.center) to (52.center);
		\draw [in=90, out=-90, looseness=0.75] (51.center) to (52.center);
		\draw [in=75, out=-135] (55) to (56.center);
		\draw [bend left=90, looseness=1.25] (56.center) to (57.center);
		\draw (57.center) to (58.center);
		\draw (55) to (54.center);
		\draw [in=-90, out=45, looseness=0.75] (62.center) to (61.center);
		\draw [in=90, out=-90, looseness=0.75] (60.center) to (61.center);
		\draw [in=-270, out=90, looseness=1.25] (60.center) to (51.center);
		\draw [in=-60, out=120] (60.center) to (55);
		\draw [in=90, out=-90, looseness=0.75] (64.center) to (65.center);
		\draw [in=75, out=-135] (68) to (69.center);
		\draw [bend left=90, looseness=1.25] (69.center) to (70.center);
		\draw [in=-135, out=90, looseness=0.75] (70.center) to (71.center);
		\draw [in=-60, out=90] (68) to (67.center);
		\draw [in=90, out=-90, looseness=0.75] (73.center) to (74.center);
		\draw [in=-270, out=90, looseness=1.25] (73.center) to (64.center);
		\draw [in=-60, out=120] (73.center) to (68);
	\end{pgfonlayer}
\end{tikzpicture}
\end{equation}
Therefore by inspecting the dimensions, every map $(\mathcal{H},p_B)\to (\mathcal{H}',p_{B'})$ is of the following form, for some  $g:\mathcal H\to \mathcal{H}'$ in $\FHilb$:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (131) at (104.225, 0.4) {};
		\node [style=X] (132) at (104.225, -0.325) {};
		\node [style=none] (133) at (103.975, -0.575) {};
		\node [style=none] (134) at (103.5, -0.575) {};
		\node [style=none] (135) at (103.5, 0.425) {};
		\node [style=map] (136) at (104.225, -1.125) {$g$};
		\node [style=none] (137) at (104.975, -1.825) {};
		\node [style=none] (138) at (104.225, -2.575) {};
		\node [style=Z] (140) at (104.225, -1.825) {};
		\node [style=none] (141) at (104.225, -1.825) {};
		\node [style=none] (142) at (104.975, -2.575) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=75, out=-135] (132) to (133.center);
		\draw [bend left=90, looseness=1.25] (133.center) to (134.center);
		\draw (134.center) to (135.center);
		\draw (132) to (131.center);
		\draw [in=90, out=-90, looseness=0.75] (137.center) to (138.center);
		\draw [in=90, out=-90, looseness=0.75] (141.center) to (142.center);
		\draw [in=-270, out=45, looseness=1.25] (141.center) to (137.center);
		\draw (141.center) to (136);
		\draw (132) to (136);
	\end{pgfonlayer}
\end{tikzpicture}
$$
Because the equivalence classes of maps in $\CPM(\FHilb)$ are defined in terms of the complex conjugation of maps in $\FHilb$;  the representative $g$ in $\FHilb$ is unique up to a scalar factor $e^{2\pi\cdot i\cdot \theta}$ for some $\theta \in [0,1)$.  That is to say, these maps are unique {\bf up to global phase}.



Take $\mathcal{H}=\mathcal{H}'$.  Up to global phase, the subobject $(\mathcal{H},e_B)$ can be identified with the the Hilbert space $\mathcal{H}$; where state preparation with respect to to $\xcirc$ and nondestructive measurement with respect to $\zcirc$ correspond to the following maps:
$$ 
\left\llbracket(1_{\mathcal H},1_{\mathcal H}, p_{B'})\right\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (143) at (106.925, 1.65) {};
		\node [style=none] (144) at (107.475, -0.225) {};
		\node [style=X] (145) at (106.925, 1.025) {};
		\node [style=none] (146) at (106.675, 0.525) {};
		\node [style=none] (147) at (105.975, 0.525) {};
		\node [style=none] (148) at (105.975, 1.65) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (146.center) to (145);
		\draw [in=-90, out=90] (147.center) to (148.center);
		\draw (143.center) to (145);
		\draw [in=90, out=-45] (145) to (144.center);
		\draw [in=-90, out=-450, looseness=1.75] (146.center) to (147.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{1cm} 
\left\llbracket
(p_B, 1_{\mathcal H},1_{\mathcal H})
\right\rrbracket
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (149) at (109.5, -0.725) {};
		\node [style=none] (150) at (108.475, 1) {};
		\node [style=Z] (151) at (108.85, 0.025) {};
		\node [style=none] (152) at (109.2, 0.55) {};
		\node [style=none] (153) at (109.6, 0.275) {};
		\node [style=none] (154) at (109.1, -0.725) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=180] (152.center) to (151);
		\draw [in=0, out=90] (153.center) to (152.center);
		\draw [in=90, out=-90] (153.center) to (154.center);
		\draw [in=-45, out=90] (149.center) to (151);
		\draw [in=-90, out=150, looseness=0.75] (151) to (150.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
The state preparation map and measurement maps for $\zcirc$ double the basis elements $|b_j\rangle$ and $\langle b_j|$ of $B$ and $B^*$:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (155) at (111.55, 1.775) {};
		\node [style=none] (156) at (112.1, -0.225) {};
		\node [style=Z] (157) at (111.55, 1.025) {};
		\node [style=none] (158) at (111.3, 0.525) {};
		\node [style=none] (159) at (110.6, 0.525) {};
		\node [style=none] (160) at (110.6, 1.775) {};
		\node [style=map] (161) at (112.1, -0.25) {$|b_j\rangle$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (158.center) to (157);
		\draw [in=-90, out=90] (159.center) to (160.center);
		\draw (155.center) to (157);
		\draw [in=90, out=-45] (157) to (156.center);
		\draw [in=-90, out=-450, looseness=1.75] (158.center) to (159.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (7) at (42.925, 0.475) {};
		\node [style=none] (8) at (42.875, -1.075) {};
		\node [style=none] (9) at (41.9, -1.025) {};
		\node [style=none] (10) at (41.9, 0.475) {};
		\node [style=map] (11) at (42.9, -0.225) {$| b_j\rangle$};
		\node [style=map] (12) at (42.9, -1.075) {$\langle b_j|$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=90] (9.center) to (10.center);
		\draw [in=-90, out=-450, looseness=1.75] (8.center) to (9.center);
		\draw (7.center) to (11);
	\end{pgfonlayer}
\end{tikzpicture}
\
,\hspace*{1cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (162) at (115.375, -0.725) {};
		\node [style=none] (163) at (114.1, 1) {};
		\node [style=Z] (164) at (114.725, 0.025) {};
		\node [style=none] (165) at (115.075, 0.55) {};
		\node [style=none] (166) at (115.475, 0.275) {};
		\node [style=none] (167) at (114.975, -0.725) {};
		\node [style=none] (168) at (114.975, -1.225) {};
		\node [style=none] (169) at (115.375, -1.225) {};
		\node [style=map] (170) at (114.1, 1) {$\langle b_j|$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=180] (165.center) to (164);
		\draw [in=0, out=90] (166.center) to (165.center);
		\draw [in=90, out=-90] (166.center) to (167.center);
		\draw (168.center) to (167.center);
		\draw (162.center) to (169.center);
		\draw [in=-45, out=90] (162.center) to (164);
		\draw [in=-90, out=150, looseness=0.75] (164) to (163.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (22) at (45.7, -0.5) {};
		\node [style=none] (23) at (46.175, 1.25) {};
		\node [style=none] (24) at (46.675, 0.5) {};
		\node [style=none] (25) at (46.675, -0.5) {};
		\node [style=none] (26) at (46.7, -1.75) {};
		\node [style=map] (27) at (45.675, -0.475) {$\langle b_j|$};
		\node [style=map] (28) at (45.675, 0.525) {$| b_j\rangle$};
		\node [style=none] (29) at (45.7, -1.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=0, out=90] (24.center) to (23.center);
		\draw [in=-270, out=-90] (24.center) to (25.center);
		\draw [in=-270, out=-90] (22.center) to (26.center);
		\draw [in=180, out=90] (28) to (23.center);
		\draw [in=90, out=-90] (25.center) to (29.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
Given a quantum state  $|\phi\rangle$ on $\mathcal H$,  measuring in the $B$-basis has the following effect:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (179) at (124.75, -0.475) {};
		\node [style=none] (180) at (123.725, 1.25) {};
		\node [style=Z] (181) at (124.1, 0.275) {};
		\node [style=none] (182) at (124.45, 0.8) {};
		\node [style=none] (183) at (124.85, 0.525) {};
		\node [style=none] (184) at (124.35, -0.475) {};
		\node [style=none] (185) at (124.35, -0.975) {};
		\node [style=none] (186) at (124.75, -0.975) {};
		\node [style=map] (187) at (124.575, -1) {$\phi\rangle$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=180] (182.center) to (181);
		\draw [in=0, out=90] (183.center) to (182.center);
		\draw [in=90, out=-90] (183.center) to (184.center);
		\draw (185.center) to (184.center);
		\draw (179.center) to (186.center);
		\draw [in=-45, out=90] (179.center) to (181);
		\draw [in=-90, out=150, looseness=0.75] (181) to (180.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\sum_{j \in \mathcal{J}}\left(\
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (120.975, 1.25) {};
		\node [style=map] (1) at (120.25, -1.25) {$\psi$};
		\node [style=map] (2) at (120.975, 0.5) {$|b_j\rangle$};
		\node [style=none] (3) at (120.25, -1.25) {};
		\node [style=map] (4) at (120.975, -0.5) {$\langle b_j|$};
		\node [style=none] (5) at (120.975, -0.5) {};
		\node [style=map] (6) at (118.975, -1.25) {$|b_j\rangle$};
		\node [style=none] (7) at (119.025, -1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2) to (0.center);
		\draw [in=-90, out=30] (1) to (5.center);
		\draw [in=450, out=90, looseness=1.75] (3.center) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}\
\right)
=
\sum_{j \in \mathcal{J}}
|\langle b_j|\phi\rangle|^2\cdot 
\left(\
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (25) at (82.2, 1.5) {};
		\node [style=map] (28) at (82.2, 0.75) {$| b_j\rangle$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (28) to (25.center);
	\end{pgfonlayer}
\end{tikzpicture}\
\right)
=
\sum_{j \in \mathcal{J}}
|\langle b_j|\phi\rangle|^2 |b_j\rangle
$$
Therefore, measuring $|b_j\rangle $ yields the scalar $|\langle b_j|\phi\rangle|^2$, which is the correct probability according to the Born rule.

There is a graphical calculus for this two-sorted prop of classical and quantum types.  
The classical wires are drawn thin and the quantum wires are drawn thick.
The pure spider we have have been working with so far is drawn with a thick border:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (11) at (4, -0.5) {};
		\node [style=none] (12) at (3, -0.5) {};
		\node [style=none] (13) at (3.5, -0.5) {$\cdots$};
		\node [style=none] (14) at (2.5, -2) {};
		\node [style=none] (15) at (3.5, -1.25) {};
		\node [style=none] (16) at (4.5, -0.5) {};
		\node [style=none] (17) at (3.5, -2) {$\cdots$};
		\node [style=none] (18) at (3, -2) {};
		\node [style=Zthick] (19) at (3.5, -1.25) {};
		\node [style=none] (20) at (4, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [thick,in=-150, out=90] (14.center) to (15);
		\draw [thick,in=-90, out=56] (15) to (11.center);
		\draw [thick,in=124, out=-90] (12.center) to (15);
		\draw [thick,in=-124, out=90] (18.center) to (19);
		\draw [thick,in=90, out=-56] (19) to (20.center);
		\draw [thick, in=-90, out=30] (19) to (16.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
The state preparation and measurement are drawn as thin spiders interfacing between the quantum and classical systems:
$$
\left\llbracket\
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (143) at (106.925, 1.65) {};
		\node [style=none] (144) at (107.475, -0.225) {};
		\node [style=Z] (145) at (106.925, 1.025) {};
		\node [style=none] (146) at (106.675, 0.525) {};
		\node [style=none] (147) at (105.975, 0.525) {};
		\node [style=none] (148) at (105.975, 1.65) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (146.center) to (145);
		\draw [in=-90, out=90] (147.center) to (148.center);
		\draw (143.center) to (145);
		\draw [in=90, out=-45] (145) to (144.center);
		\draw [in=-90, out=-450, looseness=1.75] (146.center) to (147.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (28, -4) {};
		\node [style=none] (1) at (28, -5) {};
		\node [style=none] (2) at (28, -3) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (0);
		\draw[thick]  (0) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}\
,
\hspace*{1cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (28, -4) {};
		\node [style=none] (1) at (28, -5) {};
		\node [style=none] (2) at (28, -3) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw[thick]  (1.center) to (0);
		\draw (0) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\left\llbracket\
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (149) at (109.5, -0.725) {};
		\node [style=none] (150) at (108.475, 1) {};
		\node [style=Z] (151) at (108.85, 0.025) {};
		\node [style=none] (152) at (109.2, 0.55) {};
		\node [style=none] (153) at (109.6, 0.275) {};
		\node [style=none] (154) at (109.1, -0.725) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=180] (152.center) to (151);
		\draw [in=0, out=90] (153.center) to (152.center);
		\draw [in=90, out=-90] (153.center) to (154.center);
		\draw [in=-45, out=90] (149.center) to (151);
		\draw [in=-90, out=150, looseness=0.75] (151) to (150.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
$$
The conjugation of pure spiders by state preparation and measurement maps creates {\bf bastard spiders} following \cite{pqp}.  Bastard spiders are drawn with a thin border.  For example:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (3.75, -0.5) {};
		\node [style=none] (1) at (2.75, -0.5) {};
		\node [style=none] (3) at (2.75, -2) {};
		\node [style=none] (4) at (3.5, -1.25) {};
		\node [style=none] (5) at (4.25, -0.5) {};
		\node [style=none] (7) at (3.25, -2) {};
		\node [style=Z] (8) at (3.5, -1.25) {};
		\node [style=none] (9) at (4.25, -2) {};
		\node [style=none] (10) at (3.25, -0.5) {};
		\node [style=none] (11) at (3.75, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [thick,in=-150, out=90] (3.center) to (4.center);
		\draw [thick,in=-90, out=56] (4.center) to (0.center);
		\draw [thick,in=150, out=-90] (1.center) to (4.center);
		\draw [thick,in=-124, out=90] (7.center) to (8);
		\draw [thick,in=90, out=-30] (8) to (9.center);
		\draw [thick,in=-90, out=30] (8) to (5.center);
		\draw [in=-90, out=120] (8) to (10.center);
		\draw [in=-60, out=90] (11.center) to (8);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (3.75, -0.5) {};
		\node [style=none] (1) at (2.75, -0.5) {};
		\node [style=none] (3) at (2.75, -2) {};
		\node [style=none] (4) at (3.5, -1.25) {};
		\node [style=none] (5) at (4.25, -0.5) {};
		\node [style=none] (7) at (3.25, -2) {};
		\node [style=Zthick] (8) at (3.5, -1.25) {};
		\node [style=none] (9) at (4.25, -2) {};
		\node [style=Z] (10) at (3.75, -2) {};
		\node [style=Z] (11) at (3.25, -0.5) {};
		\node [style=none] (12) at (3.25, 0) {};
		\node [style=none] (13) at (2.75, 0) {};
		\node [style=none] (14) at (3.75, 0) {};
		\node [style=none] (15) at (4.25, 0) {};
		\node [style=none] (16) at (2.75, -2.5) {};
		\node [style=none] (17) at (3.25, -2.5) {};
		\node [style=none] (18) at (3.75, -2.5) {};
		\node [style=none] (19) at (4.25, -2.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [thick,in=-150, out=90] (3.center) to (4.center);
		\draw [thick,in=-90, out=56] (4.center) to (0.center);
		\draw [thick,in=150, out=-90] (1.center) to (4.center);
		\draw [thick] (17.center) to (7.center);
		\draw [thick,in=-124, out=90] (7.center) to (8);
		\draw [thick,in=90, out=-30] (8) to (9.center);
		\draw [thick,in=-90, out=30] (8) to (5.center);
		\draw [thick] (1.center) to (13.center);
		\draw [thick] (0.center) to (14.center);
		\draw [thick] [in=120, out=-90] (11) to (8);
		\draw [thick] [in=300, out=90] (10) to (8);
		\draw [thick] (16.center) to (3.center);
		\draw [thick] (19.center) to (9.center);
		\draw [thick] (5.center) to (15.center);
		\draw  (18.center) to (10);
		\draw  (11) to (12.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
The thin border on $\zcirc$ indicates that the state has been measured in the basis $\zcirc$ and is a stochastic mixture of the basis element of $B$.
When a pure spider is connected to a bastard spider they both fuse into a bastard spider:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (20.25, -0.5) {};
		\node [style=none] (1) at (19.25, -0.5) {};
		\node [style=none] (2) at (19.75, -0.5) {$\cdots$};
		\node [style=none] (3) at (19.25, -2.75) {};
		\node [style=Z] (4) at (19.75, -1.25) {};
		\node [style=none] (5) at (20.75, -0.5) {};
		\node [style=none] (6) at (20.25, -2.75) {$\cdots$};
		\node [style=none] (7) at (19.75, -2.75) {};
		\node [style=Zthick] (8) at (20.25, -2) {};
		\node [style=none] (9) at (20.75, -2.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [thick,in=-135, out=90] (3.center) to (4);
		\draw [thick,in=-90, out=56] (4) to (0.center);
		\draw [thick,in=124, out=-90] (1.center) to (4);
		\draw [thick,in=-124, out=90] (7.center) to (8);
		\draw [thick,in=90, out=-56] (8) to (9.center);
		\draw [thick, in=-90, out=45] (8) to (5.center);
		\draw [thick] (8) to (4);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (11) at (4, -0.5) {};
		\node [style=none] (12) at (3, -0.5) {};
		\node [style=none] (13) at (3.5, -0.5) {$\cdots$};
		\node [style=none] (14) at (2.5, -2) {};
		\node [style=none] (16) at (4.5, -0.5) {};
		\node [style=none] (17) at (3.5, -2) {$\cdots$};
		\node [style=none] (18) at (3, -2) {};
		\node [style=Z] (19) at (3.5, -1.25) {};
		\node [style=none] (20) at (4, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [thick,in=-150, out=90] (14.center) to (19.center);
		\draw [thick,in=-90, out=56] (19.center) to (11.center);
		\draw [thick,in=124, out=-90] (12.center) to (19.center);
		\draw [thick,in=-124, out=90] (18.center) to (19.center);
		\draw [thick,in=90, out=-56] (19.center) to (20.center);
		\draw [thick, in=-90, out=30] (19.center) to (16.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
The discard map is classical spider with one thick wire:
$$
\left\llbracket\ 
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0.25, 0) {};
		\node [style=Z] (1) at (0.25, -1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw[thick] (1) to (0.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (71.775, -1.25) {};
		\node [style=Z] (1) at (70.875, -0.5) {};
		\node [style=none] (2) at (70.875, -1) {};
		\node [style=none] (3) at (71.8, -0.5) {};
		\node [style=none] (4) at (70.125, -1) {};
		\node [style=none] (5) at (71.125, -1.25) {};
		\node [style=none] (6) at (71.125, -1.75) {};
		\node [style=none] (7) at (71.775, -1.75) {};
		\node [style=none] (8) at (70.875, -0.5) {};
		\node [style=none] (9) at (70.125, -0.5) {};
		\node [style=none] (10) at (70.125, 0.25) {};
		\node [style=none] (11) at (70.875, 0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1) to (2.center);
		\draw [bend left=90, looseness=1.25] (2.center) to (4.center);
		\draw [in=90, out=-90] (3.center) to (5.center);
		\draw (6.center) to (5.center);
		\draw (0.center) to (7.center);
		\draw [in=-45, out=90] (0.center) to (1);
		\draw [in=90, out=60, looseness=1.50] (1) to (3.center);
		\draw [in=-90, out=90] (8.center) to (10.center);
		\draw [in=90, out=90, looseness=1.75] (10.center) to (11.center);
		\draw [in=90, out=-90] (11.center) to (9.center);
		\draw (4.center) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (12) at (75.45, -0.5) {};
		\node [style=none] (13) at (74.275, -0.25) {};
		\node [style=none] (14) at (74.975, -0.5) {};
		\node [style=none] (15) at (72.8, -0.25) {};
		\node [style=none] (17) at (72.8, -0.25) {};
		\node [style=none] (18) at (73.05, 0.5) {};
		\node [style=none] (19) at (73.8, 0.5) {};
		\node [style=Z] (20) at (74.275, 0.5) {};
		\node [style=none] (21) at (74.975, 0.5) {};
		\node [style=Z] (22) at (73.675, -0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [bend left=90, looseness=1.25] (13.center) to (15.center);
		\draw [in=90, out=90, looseness=1.75] (18.center) to (19.center);
		\draw [in=90, out=-90] (19.center) to (17.center);
		\draw (15.center) to (17.center);
		\draw (14.center) to (21.center);
		\draw [in=90, out=90, looseness=2.50] (21.center) to (20);
		\draw (13.center) to (20);
		\draw [in=-90, out=105] (22) to (18.center);
		\draw [in=315, out=90] (12.center) to (20);
		\draw (20) to (22);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (23) at (79.075, -0.5) {};
		\node [style=none] (24) at (77.65, 0) {};
		\node [style=none] (25) at (78.6, -0.5) {};
		\node [style=none] (27) at (77.175, 0) {};
		\node [style=none] (28) at (76.675, 0.5) {};
		\node [style=none] (29) at (77.175, 0.5) {};
		\node [style=Z] (30) at (77.9, 0.5) {};
		\node [style=none] (31) at (78.6, 0.5) {};
		\node [style=Z] (32) at (77.45, -0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=90, looseness=1.75] (28.center) to (29.center);
		\draw [in=90, out=-90] (29.center) to (27.center);
		\draw (25.center) to (31.center);
		\draw [in=90, out=90, looseness=2.50] (31.center) to (30);
		\draw [in=-135, out=90] (24.center) to (30);
		\draw [in=-90, out=150] (32) to (28.center);
		\draw [in=315, out=90] (23.center) to (30);
		\draw [in=30, out=-75] (30) to (32);
		\draw [in=270, out=270, looseness=1.25] (24.center) to (27.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (33) at (82.475, -0.75) {};
		\node [style=none] (34) at (82, -0.75) {};
		\node [style=none] (36) at (81.325, 0.5) {};
		\node [style=Z] (37) at (81.3, 0.5) {};
		\node [style=none] (38) at (82, 0.5) {};
		\node [style=Z] (39) at (81.1, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (34.center) to (38.center);
		\draw [in=90, out=90, looseness=2.50] (38.center) to (37);
		\draw [in=-165, out=150] (39) to (36.center);
		\draw [in=315, out=90] (33.center) to (37);
		\draw [in=30, out=-75] (37) to (39);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (40) at (84.85, -0.5) {};
		\node [style=none] (41) at (84.375, -0.5) {};
		\node [style=none] (43) at (83.7, 0.5) {};
		\node [style=Z] (44) at (83.675, 0.5) {};
		\node [style=none] (45) at (84.375, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (41.center) to (45.center);
		\draw [in=90, out=90, looseness=2.50] (45.center) to (44);
		\draw [in=315, out=90] (40.center) to (44);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (46) at (87.025, -0.5) {};
		\node [style=none] (47) at (86.5, -0.5) {};
		\node [style=none] (49) at (86.375, 0.5) {};
		\node [style=none] (50) at (87.05, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=90, looseness=1.25] (47.center) to (50.center);
		\draw [in=-90, out=90, looseness=1.25] (46.center) to (49.center);
		\draw [in=90, out=90, looseness=1.25] (49.center) to (50.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\left\llbracket\ 
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0.25, 0) {};
		\node [ground] (1) at (0.25, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1) to (0.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
$$
Notice that this way of describing the discard map is independent of the choice of orthonormal basis.

In general, we will draw thick borders around arbitrary pure maps $U$ between quantum systems; and thin borders around mixed maps $V$ between quantum systems:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map, thick] (3) at (0, 0) {$U$};
		\node [style=none] (5) at (0, .75) {};
		\node [style=none] (7) at (0, -.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [thick] (5.center) to (3.center) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ , \hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (3) at (0, 0) {$V$};
		\node [style=none] (5) at (0, .75) {};
		\node [style=none] (7) at (0, -.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [thick] (5.center) to (3.center) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
All isometries and unitaries in $\CPM(\FHilb)$ are pure so we always drawn them with a thick border.
This notation allows us to succinctly state define a very special notion of purification in $\CPM(\FHilb)$:
\begin{proposition}[Stinespring dilation]
Given a trace preserving  map  $V$ in $\CPM(\FHilb)$, there exists a unitary $U$ such that:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (3) at (0, 0) {$V$};
		\node [style=none] (5) at (0, 1) {};
		\node [style=none] (7) at (0, -1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [thick] (5.center) to (3.center) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (1) at (53.55, 0.75) {};
		\node [style=none] (2) at (54.55, 0.75) {};
		\node [style=map, thick] (3) at (54.05,0) {$U$};
		\node [style=none] (4) at (54.55, -.75) {};
		\node [style=none] (5) at (54.55, 1) {};
		\node [style=Zthick] (6) at (53.55, -.75) {};
		\node [style=none] (7) at (54.55, -1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [thick, in=-90, out=150] (3.center) to (1.center);
		\draw [thick] (3.center) to [in=270, out=30] (2.center) to (5.center);
		\draw [thick] (7.center) to  (4.center) to [in=-45, out=90] (3.center);
		\draw [thick, in=-135, out=90] (6.center) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
For all special commutative  \dag-Frobenius algebras $\zcirc$.
\end{proposition}
The proof is relatively involved so I will omit it.  See \cite{Stinespring1955} for the original statement, and \cite[Corollary 6.63]{pqp} for the graphical version which we use.  Essentially, the significance  of this result is that quantum processes can always be produced by first preparing a state, then applying quantum evolution and then discarding part of the state.

There is another closely related result which we will make use of:
\begin{proposition}[Essential uniqueness of purification]
Given two purifications $V:\mathcal{H}_1\otimes \mathcal{H}_0$ and $V':\mathcal{H}_1\otimes \mathcal{H}_0$ of a mixed state $W:\mathcal{H}_0$ in $\CPM(\FHilb)$:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map, thick] (0) at (0, 0) {$V$};
		\node [style=none] (1) at (0.5, 1) {};
		\node [style=none] (3) at (0.5, 1.25) {};
		\node [style=Z] (5) at (-0.5, 1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [thick] (0.center) to  [in=-90, out=45]  (1.center) to (3.center);
		\draw [thick, in=-90, out=135] (0.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (0, 0) {$W$};
		\node [style=none] (1) at (0, 1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [thick] (0.center) to (1.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map, thick] (0) at (0, 0) {$V'$};
		\node [style=none] (1) at (0.5, 1) {};
		\node [style=none] (3) at (0.5, 1.25) {};
		\node [style=Z] (5) at (-0.5, 1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [thick] (0.center) to  [in=-90, out=45]  (1.center) to (3.center);
		\draw [thick, in=-90, out=135] (0.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
So that without loss generality $\dim \mathcal{H}_1\leq \dim \mathcal{H}_2$, then there exists an isometry
$U:\mathcal{H}_1 \to \mathcal{H}_2$ such that:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (0, 0) {$V$};
		\node [style=none] (1) at (0.5, 0.75) {};
		\node [style=map] (5) at (-0.5, 0.75) {$U$};
		\node [style=none] (6) at (0.5, 1.5) {};
		\node [style=none] (7) at (-0.5, 1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=30] (0) to (1.center);
		\draw [in=-90, out=150] (0) to (5);
		\draw (5) to (7.center);
		\draw (6.center) to (1.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (8) at (2.25, 0) {$V'$};
		\node [style=none] (9) at (2.75, 0.75) {};
		\node [style=none] (11) at (2.75, 1.5) {};
		\node [style=none] (12) at (1.75, 1.5) {};
		\node [style=none] (13) at (1.75, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=30] (8) to (9.center);
		\draw (11.center) to (9.center);
		\draw (13.center) to (12.center);
		\draw [in=150, out=-90] (13.center) to (8);
	\end{pgfonlayer}
\end{tikzpicture}
$$
Moreover, $U$ is unique up to a unique unitary.
\end{proposition}
There is a very important relationship which bases can have to each other:
\begin{definition}
\label{def:complementary}
%Interacting Hopf-Frobenius algebras/ strongly complementary observables
Take commutative  \dag-Frobenius algebras $\zcirc$ and $\xcirc$. They are   {\bf strongly complementary} when the the bialgebras are Hopf algebras whose antipode is equivalently any of the following maps:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0.5, 0) {};
		\node [style=X] (1) at (1, 0.5) {};
		\node [style=none] (2) at (0, 1) {};
		\node [style=none] (3) at (1.5, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=135] (0) to (2.center);
		\draw (0) to (1);
		\draw [in=90, out=-45] (1) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (0.5, 0) {};
		\node [style=Z] (1) at (1, 0.5) {};
		\node [style=none] (2) at (0, 1) {};
		\node [style=none] (3) at (1.5, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=135] (0) to (2.center);
		\draw (0) to (1);
		\draw [in=90, out=-45] (1) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (1, 0) {};
		\node [style=X] (1) at (0.5, 0.5) {};
		\node [style=none] (2) at (1.5, 1) {};
		\node [style=none] (3) at (0, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=45] (0) to (2.center);
		\draw (0) to (1);
		\draw [in=90, out=-135] (1) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (1, 0) {};
		\node [style=Z] (1) at (0.5, 0.5) {};
		\node [style=none] (2) at (1.5, 1) {};
		\node [style=none] (3) at (0, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=45] (0) to (2.center);
		\draw (0) to (1);
		\draw [in=90, out=-135] (1) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
\end{definition}
Strongly complementary bases have important information-theoretical properties:
\begin{lemma}
\label{lem:strongcomp}
Given two strongly complementary bases given by special commutative \dag-Frobenius alegbras $\zcirc$ and $\xcirc$ preparing a state with respect to the basis $\zcirc$ and measuring with respect to the basis $\xcirc$ preserves no information, as:
$$
\left\llbracket\
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (20, -1) {};
		\node [style=X] (1) at (20, 0) {};
		\node [style=none] (2) at (20, 1) {};
		\node [style=none] (3) at (20, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (3.center) to (0);
		\draw (1) to (2.center);
		\draw[thick] (0) to (1);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (146) at (75.175, -1.275) {};
		\node [style=Z] (147) at (74.875, -0.525) {};
		\node [style=none] (148) at (74.1, -0.525) {};
		\node [style=none] (149) at (74.875, -0.525) {};
		\node [style=none] (150) at (73.575, 1.025) {};
		\node [style=X] (151) at (73.95, 0.3) {};
		\node [style=none] (153) at (74.7, 0.3) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-45] (147) to (146.center);
		\draw [in=-45, out=90] (149.center) to (151);
		\draw [in=-90, out=135] (151) to (150.center);
		\draw [in=90, out=-90] (153.center) to (148.center);
		\draw [in=-105, out=-90, looseness=1.50] (148.center) to (149.center);
		\draw [in=75, out=450, looseness=2.00] (153.center) to (151);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (30) at (385.2, -1.9) {};
		\node [style=Z] (31) at (385.2, -1.4) {};
		\node [style=none] (32) at (385.35, -0.35) {};
		\node [style=none] (33) at (384.425, 0.675) {};
		\node [style=X] (34) at (384.425, 0.2) {};
		\node [style=Z] (37) at (385.9, -0.35) {};
		\node [style=X] (38) at (384.85, -0.325) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (31) to (30.center);
		\draw (34) to (33.center);
		\draw [in=-45, out=15, looseness=1.25] (31) to (37);
		\draw [in=165, out=-120] (34) to (31);
		\draw (34) to (38);
		\draw [in=90, out=60, looseness=1.75] (38) to (32.center);
		\draw [in=-120, out=-90, looseness=1.50] (32.center) to (37);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (51, -1.4) {};
		\node [style=Z] (1) at (51, -0.9) {};
		\node [style=none] (2) at (50.525, 1.775) {};
		\node [style=X] (3) at (50.525, 1.125) {};
		\node [style=Z] (4) at (51.775, 0.6) {};
		\node [style=X] (5) at (51.025, 0.125) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1) to (0.center);
		\draw (3) to (2.center);
		\draw [in=-45, out=15] (1) to (4);
		\draw [in=150, out=-150] (3) to (1);
		\draw [in=120, out=-30, looseness=1.25] (3) to (5);
		\draw [in=15, out=-165] (4) to (5);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (84) at (52.55, 1.525) {};
		\node [style=Z] (85) at (52.55, 1.025) {};
		\node [style=none] (86) at (52.525, -0.9) {};
		\node [style=X] (87) at (52.525, -0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (85) to (84.center);
		\draw (87) to (86.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
\end{lemma}
Actually, we only needed the Hopf algebra part of the bialgebra for these two bases to have this property.  However, the bialgebra structure is indispensable for other reasons.
%
%Given two strongly complementary bases, we can augment the Stinespring dilation with state preparation and measurement:
%
%$$
%\begin{tikzpicture}
%	\begin{pgfonlayer}{nodelayer}
%		\node [style=Z] (1) at (53.55, 0.5) {};
%		\node [style=none] (2) at (54.55, 0.5) {};
%		\node [style=map, thick] (3) at (54.05, -0.5) {$U$};
%		\node [style=none] (4) at (54.55, -1.5) {};
%		\node [style=none] (5) at (54.55, 1.25) {};
%		\node [style=Zthick] (6) at (53.55, -1.5) {};
%		\node [style=none] (7) at (54.55, -2.75) {};
%		\node [style=none] (8) at (53.55, 1.25) {};
%		\node [style=X] (9) at (53.55, -2) {};
%		\node [style=none] (10) at (53.55, -2.75) {};
%	\end{pgfonlayer}
%	\begin{pgfonlayer}{edgelayer}
%		\draw [thick, in=-90, out=150] (3.center) to (1.center);
%		\draw [thick] (3.center) to [in=270, out=30] (2.center) to (5.center);
%		\draw [thick] (7.center) to  (4.center) to [in=-45, out=90] (3.center);
%		\draw [thick] (9.center) to (6.center) to [in=-135, out=90] (3.center);
%		\draw (1.center) to (8.center);
%		\draw (10.center) to (9.center);
%	\end{pgfonlayer}
%\end{tikzpicture}
%$$
%
%We feed in the input on the bottom left wire and read out a measurement on the top left wire.

Given two strongly complementary observables, we can construct the quantum teleportation protocol  (originally discovered for qubits by \cite{teleportation}).
The abstract description of quantum teleportation in terms \dag-compact closed categories was first introduced in \cite{abramsky}; however, we present a qudit generalization of the one using bastard spiders found in \cite[Page 706]{pqp}:
\begingroup\allowdisplaybreaks
\begin{protocol} \
\label{proto:tele}
\begin{enumerate}
\item
Alice and Bob first prepare a qudit Bell state together and establish a classical channel with which Alice is able to send two dits to Bob.
\item
They are separated in space. 
\item
Alice first applies a unitary operation in between her two qudits. 
\item
Alice  measures both of the qudits in the complementary bases and then sends two classical dits to Bob. 
\item
 Bob uses the two classical dits to perform phase-correction to his half of the Bell state in the complementary bases.
\end{enumerate}
Graphically:
\begin{align*}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (8) at (380.25, 8.75) {};
		\node [style=none] (9) at (382.25, 3.8) {};
		\node [style=none] (10) at (379, 8.5) {Alice};
		\node [style=none] (11) at (381.5, 8.5) {Bob};
		\node [style=none] (12) at (379.5, 5.75) {};
		\node [style=none] (13) at (383.75, 5.75) {};
		\node [style=none] (14) at (379.5, 6.75) {};
		\node [style=none] (15) at (383.75, 6.75) {};
		\node [style=none] (16) at (378, 6.75) {Phase correction};
		\node [style=none] (17) at (378.25, 5.75) {Measurement};
		\node [style=Xthick] (18) at (380.5, 4.65) {};
		\node [style=Zthick] (19) at (381.25, 5.15) {};
		\node [style=X] (20) at (381.25, 5.75) {};
		\node [style=Z] (21) at (380.5, 5.75) {};
		\node [style=none] (22) at (380.5, 3.8) {};
		\node [style=Zthick] (23) at (382.25, 4.55) {};
		\node [style=none] (24) at (383, 5.15) {};
		\node [style=none] (25) at (383, 8.75) {};
		\node [style=Zthick] (26) at (383, 7.5) {};
		\node [style=Xthick] (27) at (383, 8.25) {};
		\node [style=X] (28) at (382.25, 6.75) {};
		\node [style=Z] (29) at (381.5, 6.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=dotted, in=-90, out=90, looseness=1.25] (9.center) to (8.center);
		\draw [style=dotted] (13.center) to (12.center);
		\draw [style=dotted] (15.center) to (14.center);
		\draw [style=thick] (22.center) to (18);
		\draw [style=thick] (18) to (19);
		\draw [style=thick] (18) to (21);
		\draw [style=thick] (19) to (20);
		\draw [style=thick, in=-45, out=165] (23) to (19);
		\draw [style=thick] (25.center) to (27);
		\draw [style=thick] (27) to (26);
		\draw [style=thick] (26) to (24.center);
		\draw [style=thick, in=15, out=-90, looseness=0.75] (24.center) to (23);
		\draw [style=thick, in=-165, out=90, looseness=0.75] (28) to (26);
		\draw [style=thick, in=90, out=-165, looseness=0.75] (27) to (29);
		\draw [in=-105, out=90] (20) to (28);
		\draw [in=90, out=-105] (29) to (21);
	\end{pgfonlayer}
\end{tikzpicture}
&=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Xthick] (52) at (389.75, 6.25) {};
		\node [style=Zthick] (53) at (390.25, 7) {};
		\node [style=X] (54) at (389.75, 7.75) {};
		\node [style=Z] (55) at (389, 7.75) {};
		\node [style=none] (56) at (389.75, 5.75) {};
		\node [style=none] (58) at (390.25, 7) {};
		\node [style=none] (59) at (389.75, 9.75) {};
		\node [style=Zthick] (60) at (390.25, 8.5) {};
		\node [style=Xthick] (61) at (389.75, 9.25) {};
		\node [style=X] (62) at (389.75, 7.75) {};
		\node [style=Z] (63) at (389, 7.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=thick] (56.center) to (52);
		\draw [style=thick, in=-90, out=30] (52) to (53);
		\draw [style=thick, in=-90, out=150] (52) to (55);
		\draw [style=thick, in=-90, out=150] (53) to (54);
		\draw [style=thick] (59.center) to (61);
		\draw [style=thick, in=90, out=-30] (61) to (60);
		\draw [style=thick, in=15, out=-30] (60) to (58.center);
		\draw [style=thick, in=-150, out=90] (62) to (60);
		\draw [style=thick, in=90, out=-165] (61) to (63);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Xthick] (0) at (408.75, 5.5) {};
		\node [style=Zthick] (1) at (409.25, 6.25) {};
		\node [style=Z] (2) at (407.25, 7.75) {};
		\node [style=none] (3) at (408.75, 5) {};
		\node [style=none] (4) at (408.75, 10) {};
		\node [style=Zthick] (5) at (408.75, 6.75) {};
		\node [style=Xthick] (6) at (408.75, 9.5) {};
		\node [style=Z] (7) at (407.25, 7.75) {};
		\node [style=Zthick] (8) at (409, 8) {};
		\node [style=X] (9) at (408.25, 8.75) {};
		\node [style=Xthick] (10) at (408.25, 8.25) {};
		\node [style=Xthick] (11) at (408.5, 7.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=thick] (3.center) to (0);
		\draw [style=thick, in=-90, out=30] (0) to (1);
		\draw [style=thick, in=-90, out=150] (0) to (2);
		\draw [style=thick] (4.center) to (6);
		\draw [style=thick, in=90, out=-165] (6) to (7);
		\draw [style=thick] (10) to (9);
		\draw [style=thick, in=165, out=-135, looseness=1.25] (10) to (5);
		\draw [style=thick, in=105, out=-45] (10) to (11);
		\draw [style=thick] (11) to (8);
		\draw [style=thick] (1) to (5);
		\draw [style=thick, in=315, out=60] (1) to (6);
		\draw [style=thick,in=-45, out=30] (5) to (8);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Xthick] (169) at (416.35, 5.5) {};
		\node [style=Zthick] (170) at (416.85, 6.25) {};
		\node [style=Z] (171) at (415.35, 7.5) {};
		\node [style=none] (172) at (416.35, 5) {};
		\node [style=none] (173) at (416.35, 9.5) {};
		\node [style=Zthick] (174) at (416.35, 6.75) {};
		\node [style=Xthick] (175) at (416.35, 9) {};
		\node [style=Z] (176) at (415.35, 7.5) {};
		\node [style=X] (178) at (416.35, 8) {};
		\node [style=Xthick] (179) at (416.35, 7.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=thick] (172.center) to (169);
		\draw [style=thick, in=-90, out=30] (169) to (170);
		\draw [style=thick, in=-90, out=150] (169) to (171);
		\draw [style=thick] (173.center) to (175);
		\draw [style=thick, in=90, out=-165] (175) to (176);
		\draw [style=thick] (179) to (178);
		\draw [style=thick] (170) to (174);
		\draw [style=thick, in=315, out=75] (170) to (175);
	\end{pgfonlayer}
\end{tikzpicture}\\
&=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Xthick] (134) at (406.5, 7.5) {};
		\node [style=Z] (135) at (405.9, 8.5) {};
		\node [style=none] (136) at (406.5, 7) {};
		\node [style=none] (137) at (406.5, 10) {};
		\node [style=Xthick] (138) at (406.5, 9.5) {};
		\node [style=Z] (139) at (405.9, 8.5) {};
		\node [style=X] (140) at (406.5, 8.75) {};
		\node [style=Xthick] (141) at (406.5, 8.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=thick] (136.center) to (134);
		\draw [style=thick, in=-90, out=150] (134) to (135);
		\draw [style=thick] (137.center) to (138);
		\draw [style=thick, in=90, out=-165] (138) to (139);
		\draw [style=thick] (141) to (140);
		\draw [style=thick, bend left=75, looseness=0.75] (138) to (134);
	\end{pgfonlayer}
\end{tikzpicture}
\approx
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Xthick] (154) at (410.85, 7.5) {};
		\node [style=Z] (155) at (410.25, 8.5) {};
		\node [style=none] (156) at (410.85, 7) {};
		\node [style=none] (157) at (410.85, 10) {};
		\node [style=Xthick] (158) at (410.85, 9.5) {};
		\node [style=Z] (159) at (410.25, 8.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=thick] (156.center) to (154);
		\draw [style=thick, in=-90, out=150] (154) to (155);
		\draw [style=thick] (157.center) to (158);
		\draw [style=thick, in=90, out=-165] (158) to (159);
		\draw [style=thick, bend left=75, looseness=0.75] (158) to (154);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Xthick] (0) at (411.1, 7.75) {};
		\node [style=none] (1) at (412.1, 10) {};
		\node [style=Xthick] (2) at (411.35, 9) {};
		\node [style=Zthick] (3) at (410.35, 9.25) {};
		\node [style=Z] (4) at (410.35, 10) {};
		\node [style=Zthick] (5) at (410.85, 8.5) {};
		\node [style=none] (6) at (411.1, 6.5) {};
		\node [style=Xthick] (7) at (411.1, 7) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=thick, in=-75, out=45] (0) to (2);
		\draw [style=thick] (2) to (5);
		\draw [style=thick] (5) to (3);
		\draw [style=thick] (3) to (4);
		\draw [style=thick] (7) to (0);
		\draw [style=thick] (7) to (6.center);
		\draw [style=thick, in=270, out=30] (7) to (1.center);
		\draw [style=thick, bend left=45] (0) to (3);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Xthick] (166) at (413.35, 7.75) {};
		\node [style=none] (167) at (414.1, 10) {};
		\node [style=Zthick] (169) at (413.35, 8.5) {};
		\node [style=Z] (170) at (413.35, 9.25) {};
		\node [style=none] (172) at (413.35, 6.5) {};
		\node [style=Xthick] (173) at (413.35, 7) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=thick] (169) to (170);
		\draw [style=thick] (173) to (166);
		\draw [style=thick] (173) to (172.center);
		\draw [style=thick, in=270, out=30, looseness=0.75] (173) to (167.center);
	\end{pgfonlayer}
\end{tikzpicture}
\approx
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (167) at (414.1, 10) {};
		\node [style=none] (168) at (414.1, 6.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=thick] (167.center) to (168.center);
	\end{pgfonlayer}
\end{tikzpicture}
\end{align*}

So that if if Alice prepares a quantum state $|\phi\rangle$, then Bob receives it:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (39) at (389, 8.7) {};
		\node [style=none] (40) at (391, 3.75) {};
		\node [style=none] (41) at (387.75, 8.45) {Alice};
		\node [style=none] (42) at (390.25, 8.45) {Bob};
		\node [style=none] (43) at (388.25, 5.7) {};
		\node [style=none] (44) at (392.5, 5.7) {};
		\node [style=none] (45) at (388.25, 6.7) {};
		\node [style=none] (46) at (392.5, 6.7) {};
		\node [style=none] (16) at (386.5, 6.75) {Phase correction};
		\node [style=none] (48) at (387, 5.7) {Measurement};
		\node [style=Xthick] (49) at (389.25, 4.6) {};
		\node [style=Zthick] (50) at (390, 5.1) {};
		\node [style=X] (51) at (390, 5.7) {};
		\node [style=Z] (52) at (389.25, 5.7) {};
		\node [style=none] (53) at (389.25, 3.75) {};
		\node [style=Zthick] (54) at (391, 4.5) {};
		\node [style=none] (55) at (391.75, 5.1) {};
		\node [style=none] (56) at (391.75, 8.7) {};
		\node [style=Zthick] (57) at (391.75, 7.45) {};
		\node [style=Xthick] (58) at (391.75, 8.2) {};
		\node [style=X] (59) at (391, 6.7) {};
		\node [style=Z] (60) at (390.25, 6.7) {};
		\node [style=map] (61) at (389.25, 3.75) {$|\phi\rangle$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=dotted, in=-90, out=90, looseness=1.25] (40.center) to (39.center);
		\draw [style=dotted] (44.center) to (43.center);
		\draw [style=dotted] (46.center) to (45.center);
		\draw [style=thick] (53.center) to (49);
		\draw [style=thick] (49) to (50);
		\draw [style=thick] (49) to (52);
		\draw [style=thick] (50) to (51);
		\draw [style=thick, in=-45, out=165] (54) to (50);
		\draw [style=thick] (56.center) to (58);
		\draw [style=thick] (58) to (57);
		\draw [style=thick] (57) to (55.center);
		\draw [style=thick, in=15, out=-90, looseness=0.75] (55.center) to (54);
		\draw [style=thick, in=-165, out=90, looseness=0.75] (59) to (57);
		\draw [style=thick, in=90, out=-165, looseness=0.75] (58) to (60);
		\draw [in=-105, out=90] (51) to (59);
		\draw [in=90, out=-105] (60) to (52);
	\end{pgfonlayer}
\end{tikzpicture}
\approx
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (62) at (394.25, 8.675) {};
		\node [style=map] (63) at (394.25, 7.75) {$|\phi\rangle$};
		\node [style=none] (64) at (393.25, 8.675) {};
		\node [style=none] (65) at (393.25, 3.75) {};
		\node [style=none] (66) at (392.5, 8.675) {Alice};
		\node [style=none] (67) at (395.5, 8.675) {Bob};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=dotted, in=-90, out=90, looseness=1.25] (65.center) to (64.center);
		\draw [thick] (63) to (62.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
\end{protocol}\endgroup
Notice how all parts of this protocol are physically realizable operations.  The Bell-state is a quantum state and unitary operations are quantum operations.  As we discussed, measurement is realizable, and produces a classical outcome according to a probability distribution via the Born rule (in fact, in this case each possible outcome is equally likely).  Finally, for Bob's phase correction operation, he receives the two measurement outcomes of Alice, and conditioned on these outcomes he applies quantum operations to the quantum channel.  


This is in contrast to the naive way in which one might hope to teleport a qudit from Alice to Bob using the compact closed structure induced by $\zcirc$:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (381.25, 5.5) {};
		\node [style=none] (1) at (382.25, 3.5) {};
		\node [style=none] (2) at (380.5, 5.5) {Alice};
		\node [style=none] (3) at (382, 5.5) {Bob};
		\node [style=none] (14) at (380.5, 3.75) {};
		\node [style=Zthick] (15) at (382.25, 4.25) {};
		\node [style=none] (16) at (383, 5.5) {};
		\node [style=none] (17) at (383, 5.5) {};
		\node [style=map] (22) at (380.5, 3.75) {$|\phi\rangle$};
		\node [style=Zthick] (25) at (381, 5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [thick] (22.center) to  [in=-135, out=90] (25.center)  to [in=165, out=-15, looseness=0.75]   (15.center)  to [in=-90, out=30]  (16.center)  to (17.center);
		\draw [style=dotted, in=-90, out=90, looseness=1.25] (1.center) to (0.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (26) at (384.75, 7) {};
		\node [style=none] (27) at (384.75, 4.5) {};
		\node [style=none] (28) at (384, 7) {Alice};
		\node [style=none] (29) at (385.5, 7) {Bob};
		\node [style=none] (32) at (386.5, 5.5) {};
		\node [style=none] (33) at (386.5, 7) {};
		\node [style=map] (34) at (386.5, 5.5) {$|\phi\rangle$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [thick] (34) to (33.center);
		\draw [style=dotted] (27.center) to (26.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
The cap not a quantum operation, nor is it a measurement, or a classical operation,  therefore it does not specify a physically realizable quantum protocol.

The reason we ask not only for the Hopf law but also for the bialgebra law is  because the following two very important bases have this property:
\begin{example}
Given fixed dimension $d$, recall that the standard basis, or $Z$-basis,  is denoted as follows:
$$\{ |0\rangle, \ldots, |d-1\rangle \}$$
The Fourier basis, or $X$-basis, is denoted as follows:
$$\{\sqrt{d} \mathcal{F}|0\rangle, \ldots, \sqrt{d}\mathcal{F}|d-1\rangle \}$$

Where the qudit quantum Fourier transform is the unitary map:
$$\mathcal{F} := \dfrac{1}{\sqrt{d}} \sum_{j,k=0}^{d-1} e^{2\pi\cdot i \cdot j \cdot k/d} | k\rangle \langle j | $$
The $Z$ and $X$ bases are strongly complementary.
\end{example}
For qubits, the  state $|+\rangle:=\mathcal{F}|0\rangle$ is called the {\bf plus state}; and  $|-\rangle:=\mathcal{F}|1\rangle$ is called the {\bf minus state}.
Notice how we multiply the $X$-basis elements by a factor of $\sqrt d$ so that these two Frobenius algebras interact to form a Hopf algebra on the nose (as opposed to up to scaling factors).  This means that the Fourier basis we have chosen is only orthogonal, and thus the corresponding Frobenius algebra is not special.  However, this isn't a problem, because it is special up to the invertible  scalar $1/\sqrt{d}$.

This pair of complementary bases will occur throughout this thesis.  As a matter of notation, as mentioned earlier we draw the ``$Z$-spiders'' for the standard basis in white,
and ``$X$-spiders'' for the Fourier basis in  grey as follows:
\begin{align*}
\left\llbracket\ 
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (4, -0.5) {};
		\node [style=none] (1) at (3, -0.5) {};
		\node [style=none] (2) at (3.5, -0.75) {$\cdots$};
		\node [style=Z] (4) at (3.5, -1.25) {};
		\node [style=none] (6) at (3.5, -1.75) {$\cdots$};
		\node [style=none] (7) at (3, -2) {};
		\node [style=Z] (8) at (3.5, -1.25) {};
		\node [style=none] (9) at (4, -2) {};
		\node [style=none] (10) at (3.5, -2) {$n$};
		\node [style=none] (11) at (3.5, -0.5) {$m$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=56] (4) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
&=
\sum_{j=0}^{d-1} | j, \ldots, j\rangle \langle j,\ldots, j|\\
\left\llbracket\ 
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (4, -0.5) {};
		\node [style=none] (1) at (3, -0.5) {};
		\node [style=none] (2) at (3.5, -0.75) {$\cdots$};
		\node [style=X] (4) at (3.5, -1.25) {};
		\node [style=none] (6) at (3.5, -1.75) {$\cdots$};
		\node [style=none] (7) at (3, -2) {};
		\node [style=none] (8) at (3.5, -1.25) {};
		\node [style=none] (9) at (4, -2) {};
		\node [style=none] (10) at (3.5, -2) {$n$};
		\node [style=none] (11) at (3.5, -0.5) {$m$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=56] (4) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
&=
\sqrt{d}\sum_{j=0}^{d-1}  \mathcal{F} | j, \ldots, j\rangle \langle j,\ldots, j| \mathcal{F}^\dag
\end{align*}
The $Z$-spiders compare standard basis elements and the $X$-spiders compare their sums (which is why we ask for the Bialgebra law on top of the Hopf law):
$$
\sqrt{d}\sum_{j=0}^{d-1}  \mathcal{F} | j, \ldots, j\rangle \langle j,\ldots, j| \mathcal{F}^\dag\\
=
\sum_{\forall x \in (\Z/d\Z)^n,  y  \in (\Z/d\Z)^m: \sum  x_j= \sum y _k} | y_1 ,\ldots, y_n \rangle \langle  x_1,\ldots, x_n|
$$
When $d=2$ the antipode is the identity, therefore it doesn't matter if the wires are inputs or outputs of spiders.  For example, we can draw the {\bf controlled-not gate} by connecting together $Z$ and $X$ spiders, only having to worry about the connectivity:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (14) at (9.5, -1.75) {};
		\node [style=Z] (15) at (8.75, -1.75) {};
		\node [style=none] (16) at (9.5, -1) {};
		\node [style=none] (17) at (8.75, -1) {};
		\node [style=none] (18) at (9.5, -2.5) {};
		\node [style=none] (19) at (8.75, -2.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (17.center) to (15);
		\draw (15) to (14);
		\draw (14) to (16.center);
		\draw (14) to (18.center);
		\draw (19.center) to (15);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (20) at (11.25, -1.75) {};
		\node [style=Z] (21) at (10.5, -2) {};
		\node [style=none] (22) at (11.25, -1) {};
		\node [style=none] (23) at (10.5, -1) {};
		\node [style=none] (24) at (11.25, -2.75) {};
		\node [style=none] (25) at (10.5, -2.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (23.center) to (21);
		\draw (21) to (20);
		\draw (20) to (22.center);
		\draw (20) to (24.center);
		\draw (25.center) to (21);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (8) at (12.75, -2) {};
		\node [style=Z] (9) at (12, -1.75) {};
		\node [style=none] (10) at (12.75, -1) {};
		\node [style=none] (11) at (12, -1) {};
		\node [style=none] (12) at (12.75, -2.75) {};
		\node [style=none] (13) at (12, -2.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (11.center) to (9);
		\draw (9) to (8);
		\draw (8) to (10.center);
		\draw (8) to (12.center);
		\draw (13.center) to (9);
	\end{pgfonlayer}
\end{tikzpicture}
$$
In other terms, the $Z$ and $X$-spiders are {\bf flexsymmetric}   \cite[\S 5]{flexsymmetric}.

%The following pair of strongly complementary observables will come up often throughout this thesis:
%
%\begin{example}
%Qudit quantum teleportation in doubled picture:
%
%tODO
%\end{example}

We almost have all of the essential ingredients of categorical quantum mechanics; however, bastard spiders alone are not very expressive.  The following bridges this gap:
\begin{definition}
\label{def:phases}
Given a $\dag$-Frobenius algebra $\xcirc$ on an object $X$, a {\bf phase} for the Frobenius algebra is a unitary endomorphism $\theta:X\to X$ which commutes with the multiplication and comultiplication, so that:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (5) at (2, 12) {};
		\node [style=none] (7) at (1.5, 11.25) {};
		\node [style=none] (8) at (2.5, 11.25) {};
		\node [style=none] (9) at (2, 12.75) {};
		\node [style=map] (11) at (1.5, 11.25) {$\theta$};
		\node [style=none] (12) at (1.5, 10.5) {};
		\node [style=none] (13) at (2.5, 10.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-150] (5) to (7.center);
		\draw [in=90, out=-30] (5) to (8.center);
		\draw (9.center) to (5);
		\draw (11) to (12.center);
		\draw (13.center) to (8.center);
	\end{pgfonlayer}
\end{tikzpicture}
\eref{phasel}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (0, 11.25) {};
		\node [style=map] (1) at (0, 12) {$\theta$};
		\node [style=none] (2) at (-0.5, 10.5) {};
		\node [style=none] (3) at (0.5, 10.5) {};
		\node [style=none] (4) at (0, 12.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (4.center) to (1);
		\draw (1) to (0);
		\draw [in=90, out=-150] (0) to (2.center);
		\draw [in=90, out=-30] (0) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}
\eref{phaser}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (14) at (-1.75, 12) {};
		\node [style=none] (15) at (-1.25, 11.25) {};
		\node [style=none] (16) at (-2.25, 11.25) {};
		\node [style=none] (17) at (-1.75, 12.75) {};
		\node [style=map] (18) at (-1.25, 11.25) {$\theta$};
		\node [style=none] (19) at (-1.25, 10.5) {};
		\node [style=none] (20) at (-2.25, 10.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (14) to (15.center);
		\draw [in=90, out=-150] (14) to (16.center);
		\draw (17.center) to (14);
		\draw (18) to (19.center);
		\draw (20.center) to (16.center);
	\end{pgfonlayer}
\end{tikzpicture}\ , 
\hspace*{1cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (26) at (7.75, 11.25) {};
		\node [style=none] (27) at (7.25, 12) {};
		\node [style=none] (28) at (8.25, 12) {};
		\node [style=none] (29) at (7.75, 10.5) {};
		\node [style=map] (30) at (7.25, 12) {$\theta$};
		\node [style=none] (31) at (7.25, 12.75) {};
		\node [style=none] (32) at (8.25, 12.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=150] (26) to (27.center);
		\draw [in=-90, out=30] (26) to (28.center);
		\draw (29.center) to (26);
		\draw (30) to (31.center);
		\draw (32.center) to (28.center);
	\end{pgfonlayer}
\end{tikzpicture}
\erefop{phasel}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (21) at (5.75, 12) {};
		\node [style=map] (22) at (5.75, 11.25) {$\theta$};
		\node [style=none] (23) at (5.25, 12.75) {};
		\node [style=none] (24) at (6.25, 12.75) {};
		\node [style=none] (25) at (5.75, 10.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (25.center) to (22);
		\draw (22) to (21);
		\draw [in=-90, out=150] (21) to (23.center);
		\draw [in=-90, out=30] (21) to (24.center);
	\end{pgfonlayer}
\end{tikzpicture}
\erefop{phaser}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (33) at (4, 11.25) {};
		\node [style=none] (34) at (4.5, 12) {};
		\node [style=none] (35) at (3.5, 12) {};
		\node [style=none] (36) at (4, 10.5) {};
		\node [style=map] (37) at (4.5, 12) {$\theta$};
		\node [style=none] (38) at (4.5, 12.75) {};
		\node [style=none] (39) at (3.5, 12.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=30] (33) to (34.center);
		\draw [in=-90, out=150] (33) to (35.center);
		\draw (36.center) to (33);
		\draw (37) to (38.center);
		\draw (39.center) to (35.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
Phases for Frobenius algebras are closed under composition; and they form a group called the {\bf phase group} for the Frobenius algebra.  The phase group associated with a commutative Frobenius algebra is therefore Abelian.
\end{definition}
The motivating example is again  $\FHilb$, which makes sense of the name:
\begin{example}
Given an orthonormal basis $\{| b_j \rangle \}_{j \in \mathcal J}$ of $\mathcal H$ , the phases are generated by the following unitaries, for all $\{\theta_j \} \in [0, 1)^{\mathcal J}$:
$$\sum_{j \in \mathcal J} e^{  2\pi \cdot i \cdot b_j \cdot \theta_j/d }|  b_j \rangle\langle b_j|$$
\end{example}
Recall that maps in $\CPM(\FHilb)$ are unique up to global phase, therefore when the basis has a chosen order $\{ |b_0\rangle,\cdots, |b_{d-1}\rangle \}$, as a matter of convention fix $\theta_0=0$.  This means that the phases of that basis in $\CPM(\FHilb)$ are uniquely parameterized by the group $[0, 1)^{d-1}$. In the literature it is commonplace to index the phases over $[0,2\pi)^{d-1}$ rather than over $[0,1)^{d-1}$.  We chose the latter  because it is much more amenable to generalization away from quantum mechanics. 

%The curve  $\{e^{2 \pi \cdot i \cdot \theta}\ | \ \theta \in [0, 1)\}$ carves out the unit circle in the complex plane so the phase group is isomorphic to the circle (hence the name).


The normal form for spiders extends to spiders with phases:
\begin{lemma}[Phased spider normal form]
The connected components of a commutative \dag-Frobenius algebra $\xcirc$ and its phase group can be factorized into the following form; which we will call a phased-spider:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (4.75, 3.25) {};
		\node [style=X] (1) at (4, 4.25) {};
		\node [style=X] (2) at (4.75, 1.75) {};
		\node [style=X] (3) at (4, 0.75) {};
		\node [style=none] (4) at (5, 4.25) {};
		\node [style=none] (5) at (5, 0.75) {};
		\node [style=none] (6) at (3.75, 0) {};
		\node [style=none] (7) at (5, 5) {};
		\node [style=none] (8) at (5, 0) {};
		\node [style=none] (9) at (4.25, 5) {};
		\node [style=none] (10) at (3.75, 5) {};
		\node [style=none] (11) at (4.25, 0) {};
		\node [style=none] (12) at (4.5, 3.5) {};
		\node [style=none] (13) at (4, 4) {};
		\node [style=none] (14) at (4, 1) {};
		\node [style=none] (15) at (4.5, 1.5) {};
		\node [style=none] (16) at (4.25, 3.75) {$\ddots$};
		\node [style=none] (17) at (4.25, 1.25) {$\reflectbox{$\ddots$}$};
		\node [style=none] (18) at (4.7, 0) {$\cdots$};
		\node [style=none] (19) at (4.7, 5) {$\cdots$};
		\node [style=map] (20) at (4.75, 2.5) {$\theta$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (7.center) to (4.center);
		\draw [in=105, out=-90] (10.center) to (1);
		\draw [in=60, out=-90, looseness=0.75] (4.center) to (0);
		\draw [in=-90, out=75] (1) to (9.center);
		\draw [in=300, out=90] (5.center) to (2);
		\draw [in=90, out=-120] (3) to (6.center);
		\draw [in=90, out=-60] (3) to (11.center);
		\draw (8.center) to (5.center);
		\draw (0) to (2);
		\draw (3) to (14.center);
		\draw (15.center) to (2);
		\draw (13.center) to (1);
		\draw (0) to (12.center);
	\end{pgfonlayer}
\end{tikzpicture}
=:
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.5, 1.75) {};
		\node [style=none] (1) at (2.75, 1.75) {};
		\node [style=none] (2) at (2, 1.75) {};
		\node [style=none] (3) at (2.45, 1.75) {$\cdots$};
		\node [style=none] (4) at (2.75, 3.25) {};
		\node [style=none] (5) at (2, 3.25) {};
		\node [style=none] (6) at (1.5, 3.25) {};
		\node [style=none] (7) at (2.45, 3.25) {$\cdots$};
		\node [style=X] (8) at (2, 2.5) {$\theta$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=45] (8) to (4.center);
		\draw (8) to (5.center);
		\draw [in=135, out=-90] (6.center) to (8);
		\draw [in=90, out=-150] (8) to (0.center);
		\draw (2.center) to (8);
		\draw [in=90, out=-30] (8) to (1.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
The normal form for commutative \dag-Frobenius algebras $\xcirc$ plus phases, as well as special special commutative \dag-Frobenius algebras $\zcirc$ plus phases induce phased-spider fusion rules:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.5, -0.5) {};
		\node [style=none] (1) at (0.5, -0.5) {};
		\node [style=none] (2) at (1, -0.5) {$\cdots$};
		\node [style=none] (3) at (0.5, -2.75) {};
		\node [style=X] (4) at (1, -1.25) {$\theta$};
		\node [style=none] (5) at (2, -0.5) {};
		\node [style=none] (6) at (1.5, -2.75) {$\cdots$};
		\node [style=none] (7) at (1, -2.75) {};
		\node [style=X] (8) at (1.5, -2) {$\phi$};
		\node [style=none] (9) at (2, -2.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-124, out=90] (3.center) to (4);
		\draw [in=-90, out=56] (4) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
		\draw [in=-90, out=56] (8) to (5.center);
		\draw (8) to (4);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (11) at (4, -0.5) {};
		\node [style=none] (12) at (3, -0.5) {};
		\node [style=none] (13) at (3.5, -0.5) {$\cdots$};
		\node [style=none] (14) at (2.5, -2) {};
		\node [style=none] (15) at (3.5, -1.25) {};
		\node [style=none] (16) at (4.5, -0.5) {};
		\node [style=none] (17) at (3.5, -2) {};
		\node [style=none] (18) at (3, -2) {};
		\node [style=X] (19) at (3.5, -1.25) {$\theta+\phi$};
		\node [style=none] (20) at (4, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-150, out=90] (14.center) to (15);
		\draw [in=-90, out=56] (15) to (11.center);
		\draw [in=124, out=-90] (12.center) to (15);
		\draw [in=-124, out=90] (18.center) to (19);
		\draw [in=90, out=-56] (19) to (20.center);
		\draw [in=-90, out=30] (19) to (16.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ , \hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (32) at (20.25, -0.5) {};
		\node [style=none] (33) at (19.25, -0.5) {};
		\node [style=none] (34) at (19.75, -0.5) {$\cdots$};
		\node [style=none] (35) at (19.25, -2.75) {};
		\node [style=Z] (36) at (19.75, -1.25) {$\theta$};
		\node [style=none] (37) at (20.75, -0.5) {};
		\node [style=none] (38) at (20.25, -2.75) {$\cdots$};
		\node [style=none] (39) at (19.75, -2.75) {};
		\node [style=Z] (40) at (20.25, -2) {$\phi$};
		\node [style=none] (41) at (20.75, -2.75) {};
		\node [style=none] (42) at (20, -1.5) {\reflectbox{$\ddots$}};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (35.center) to (36);
		\draw [in=-90, out=56] (36) to (32.center);
		\draw [in=124, out=-90] (33.center) to (36);
		\draw [in=-124, out=90] (39.center) to (40);
		\draw [in=90, out=-56] (40) to (41.center);
		\draw [in=-90, out=45] (40) to (37.center);
		\draw [bend right=45, looseness=1.25] (40) to (36);
		\draw [bend right=45, looseness=1.25] (36) to (40);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (11) at (4, -0.5) {};
		\node [style=none] (12) at (3, -0.5) {};
		\node [style=none] (13) at (3.5, -0.5) {$\cdots$};
		\node [style=none] (14) at (2.5, -2) {};
		\node [style=none] (15) at (3.5, -1.25) {};
		\node [style=none] (16) at (4.5, -0.5) {};
		\node [style=none] (17) at (3.5, -2) {$\cdots$};
		\node [style=none] (18) at (3, -2) {};
		\node [style=Z] (19) at (3.5, -1.25) {$\theta+\phi$};
		\node [style=none] (20) at (4, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-150, out=90] (14.center) to (15);
		\draw [in=-90, out=56] (15) to (11.center);
		\draw [in=124, out=-90] (12.center) to (15);
		\draw [in=-124, out=90] (18.center) to (19);
		\draw [in=90, out=-56] (19) to (20.center);
		\draw [in=-90, out=30] (19) to (16.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
This notation is compatible with the non-phased spider notation, where a spider drawn with no phase corresponds to a phased spider whose phase is the identity:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (4, -0.5) {};
		\node [style=none] (1) at (3, -0.5) {};
		\node [style=none] (2) at (3.5, -0.5) {$\cdots$};
		\node [style=none] (4) at (3.5, -1.25) {};
		\node [style=none] (6) at (3.5, -2) {$\cdots$};
		\node [style=none] (7) at (3, -2) {};
		\node [style=X] (8) at (3.5, -1.25) {};
		\node [style=none] (9) at (4, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=56] (4.center) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4.center);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (4, -0.5) {};
		\node [style=none] (1) at (3, -0.5) {};
		\node [style=none] (2) at (3.5, -0.5) {$\cdots$};
		\node [style=none] (4) at (3.5, -1.25) {};
		\node [style=none] (6) at (3.5, -2) {$\cdots$};
		\node [style=none] (7) at (3, -2) {};
		\node [style=X] (8) at (3.5, -1.25) { $0$ };
		\node [style=none] (9) at (4, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=56] (4.center) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4.center);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}\ ,
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (4, -0.5) {};
		\node [style=none] (1) at (3, -0.5) {};
		\node [style=none] (2) at (3.5, -0.5) {$\cdots$};
		\node [style=none] (4) at (3.5, -1.25) {};
		\node [style=none] (6) at (3.5, -2) {$\cdots$};
		\node [style=none] (7) at (3, -2) {};
		\node [style=Z] (8) at (3.5, -1.25) {};
		\node [style=none] (9) at (4, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=56] (4.center) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4.center);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (4, -0.5) {};
		\node [style=none] (1) at (3, -0.5) {};
		\node [style=none] (2) at (3.5, -0.5) {$\cdots$};
		\node [style=none] (4) at (3.5, -1.25) {};
		\node [style=none] (6) at (3.5, -2) {$\cdots$};
		\node [style=none] (7) at (3, -2) {};
		\node [style=Z] (8) at (3.5, -1.25) { $0$ };
		\node [style=none] (9) at (4, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=56] (4.center) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4.center);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
\end{lemma}
\begin{definition}
\label{def:zx}
Given some fixed dimension $d$, a fragment of the qudit {\bf ZX-calculus} is a prop generated by two strongly complementary spiders, each of which is parameterized by phase groups. 

We also require that this comes equipped with a faithful $\dag$-symmetric monoidal functor into $\FHilb$, sending the objects $n\mapsto \ell^2((\Z/d\Z)^n)$ and sending the two phased spiders to the $Z$ and $X$-phased spiders in a way that preserves the phase-group structure.

That is to say, we have spiders decorated by phase groups $G$ and $H$ and group homomorphisms $g:G\to [0,1)^d$ and $h:H\to [0,1)^d$, respectively such that:

$$
\left\llbracket\ 
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (4, -0.5) {};
		\node [style=none] (1) at (3, -0.5) {};
		\node [style=none] (2) at (3.5, -0.75) {$\cdots$};
		\node [style=Z] (4) at (3.5, -1.25) {$\phi$};
		\node [style=none] (6) at (3.5, -1.75) {$\cdots$};
		\node [style=none] (7) at (3, -2) {};
		\node [style=none] (8) at (3.5, -1.25) {};
		\node [style=none] (9) at (4, -2) {};
		\node [style=none] (10) at (3.5, -2) {$n$};
		\node [style=none] (11) at (3.5, -0.5) {$m$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=56] (4) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
=
\sum_{j=0}^{d-1} e^{2\cdot \pi \cdot i \cdot j\cdot g_j(\phi)/d} | j, \ldots, j\rangle \langle j,\ldots, j|
$$
$$
\left\llbracket\ 
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (4, -0.5) {};
		\node [style=none] (1) at (3, -0.5) {};
		\node [style=none] (2) at (3.5, -0.75) {$\cdots$};
		\node [style=X] (4) at (3.5, -1.25) {$\theta$};
		\node [style=none] (6) at (3.5, -1.75) {$\cdots$};
		\node [style=none] (7) at (3, -2) {};
		\node [style=none] (8) at (3.5, -1.25) {};
		\node [style=none] (9) at (4, -2) {};
		\node [style=none] (10) at (3.5, -2) {$n$};
		\node [style=none] (11) at (3.5, -0.5) {$m$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=56] (4) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
=
\sqrt{d}
\sum_{j=0}^{d-1} e^{2\cdot \pi \cdot i \cdot j\cdot h_j(\theta)/d} \mathcal{F} | j, \ldots, j\rangle \langle j,\ldots, j| \mathcal{F}^\dag
$$

Take a fragment $\llbracket-\rrbracket:{\sf ZX}\to \Hilb$ of the ZX-calculus and a \dag-compact closed subcategory of $\X\hookrightarrow\FHilb$, such that this interpretation essentially-surjectively factors through $\X$ (so that $\X$ contains all the objects of $\llbracket{\sf ZX}\rrbracket$ up to isomorphism).
The fragment is {\bf universal} for $\X$ when the map ${\sf ZX}\to \X$ is full and {\bf complete} when it is faithful.
\end{definition}
The {\bf scalable ZX-calculus} \cite{szx} refers to the proof nets for fragments of the ZX-calculus Frobenius algebras on wires of composite dimension are denoted as follows:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (21) at (-1, 2.5) {};
		\node [style=none] (23) at (-1.5, 3.5) {};
		\node [style=none] (24) at (-0.5, 3.5) {};
		\node [style=none] (29) at (-1, 3.3) {$\cdots$};
		\node [style=none] (30) at (-1, 2.5) {};
		\node [style=Z] (300) at (-1, 2.5) {$\theta_L, \theta_R$};
		\node [style=none] (32) at (-1.5, 1.5) {};
		\node [style=none] (33) at (-0.5, 1.5) {};
		\node [style=none] (38) at (-1, 1.7) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple, in=270, out=45] (21) to (24.center);
		\draw [style=simple, in=135, out=-90] (23.center) to (21);
		\draw [style=simple, in=90, out=-45] (30) to (33.center);
		\draw [style=simple, in=-135, out=90] (32.center) to (30);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0.5, 2.5) {};
		\node [style=Z] (1) at (1.5, 2.5) {};
		\node [style=none] (4) at (0.5, 3.25) {};
		\node [style=none] (5) at (1.5, 3.25) {};
		\node [style=none] (6) at (0.5, 3.75) {};
		\node [style=none] (7) at (1.5, 3.75) {};
		\node [style=otimes] (9) at (1.5, 3.25) {};
		\node [style=otimes] (10) at (0.5, 3.25) {};
		\node [style=none] (11) at (1, 3.5) {$\cdots$};
		\node [style=Z] (12) at (0.5, 2.5) {$\theta_L$};
		\node [style=Z] (13) at (1.5, 2.5) {$\theta_R$};
		\node [style=none] (14) at (0.5, 1.75) {};
		\node [style=none] (15) at (1.5, 1.75) {};
		\node [style=none] (16) at (0.5, 1.25) {};
		\node [style=none] (17) at (1.5, 1.25) {};
		\node [style=otimes] (18) at (1.5, 1.75) {};
		\node [style=otimes] (19) at (0.5, 1.75) {};
		\node [style=none] (20) at (1, 1.5) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (0) to (5.center);
		\draw [style=simple, in=120, out=-120, looseness=1.25] (4.center) to (0);
		\draw [style=simple, in=-60, out=60, looseness=1.25] (1) to (5.center);
		\draw [style=simple] (1) to (4.center);
		\draw [style=simple] (4.center) to (6.center);
		\draw [style=simple] (5.center) to (7.center);
		\draw [style=simple] (12) to (15.center);
		\draw [style=simple, in=-120, out=120, looseness=1.25] (14.center) to (12);
		\draw [style=simple, in=60, out=-60, looseness=1.25] (13) to (15.center);
		\draw [style=simple] (13) to (14.center);
		\draw [style=simple] (14.center) to (16.center);
		\draw [style=simple] (15.center) to (17.center);
	\end{pgfonlayer}
\end{tikzpicture}\ ,
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (21) at (-1, 2.5) {};
		\node [style=none] (23) at (-1.5, 3.5) {};
		\node [style=none] (24) at (-0.5, 3.5) {};
		\node [style=none] (29) at (-1, 3.3) {$\cdots$};
		\node [style=none] (30) at (-1, 2.5) {};
		\node [style=X] (300) at (-1, 2.5) {$\theta_L,\theta_R$};
		\node [style=none] (32) at (-1.5, 1.5) {};
		\node [style=none] (33) at (-0.5, 1.5) {};
		\node [style=none] (38) at (-1, 1.7) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple, in=270, out=45] (21) to (24.center);
		\draw [style=simple, in=135, out=-90] (23.center) to (21);
		\draw [style=simple, in=90, out=-45] (30) to (33.center);
		\draw [style=simple, in=-135, out=90] (32.center) to (30);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (0.5, 2.5) {};
		\node [style=X] (1) at (1.5, 2.5) {};
		\node [style=none] (4) at (0.5, 3.25) {};
		\node [style=none] (5) at (1.5, 3.25) {};
		\node [style=none] (6) at (0.5, 3.75) {};
		\node [style=none] (7) at (1.5, 3.75) {};
		\node [style=otimes] (9) at (1.5, 3.25) {};
		\node [style=otimes] (10) at (0.5, 3.25) {};
		\node [style=none] (11) at (1, 3.5) {$\cdots$};
		\node [style=X] (12) at (0.5, 2.5) {$\theta_L$};
		\node [style=X] (13) at (1.5, 2.5) {$\theta_R$};
		\node [style=none] (14) at (0.5, 1.75) {};
		\node [style=none] (15) at (1.5, 1.75) {};
		\node [style=none] (16) at (0.5, 1.25) {};
		\node [style=none] (17) at (1.5, 1.25) {};
		\node [style=otimes] (18) at (1.5, 1.75) {};
		\node [style=otimes] (19) at (0.5, 1.75) {};
		\node [style=none] (20) at (1, 1.5) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (0) to (5.center);
		\draw [style=simple, in=120, out=-120, looseness=1.25] (4.center) to (0);
		\draw [style=simple, in=-60, out=60, looseness=1.25] (1) to (5.center);
		\draw [style=simple] (1) to (4.center);
		\draw [style=simple] (4.center) to (6.center);
		\draw [style=simple] (5.center) to (7.center);
		\draw [style=simple] (12) to (15.center);
		\draw [style=simple, in=-120, out=120, looseness=1.25] (14.center) to (12);
		\draw [style=simple, in=60, out=-60, looseness=1.25] (13) to (15.center);
		\draw [style=simple] (13) to (14.center);
		\draw [style=simple] (14.center) to (16.center);
		\draw [style=simple] (15.center) to (17.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
As we use proof nets for monoidal categories extensively throughout this thesis, we won't declare when we are using scalable ZX-notation; it will just be the default setting which we work in.


Consider the simplest fragment of the ZX-calculus:
\begin{definition}
The {\bf phase-free} qudit ZX-calculus
is the fragment of the ZX-calculus generated by the $Z$ and $X$ spiders with no phases.
%
%\begin{align*}
%\left\llbracket\ 
%\begin{tikzpicture}
%	\begin{pgfonlayer}{nodelayer}
%		\node [style=none] (0) at (4, -0.5) {};
%		\node [style=none] (1) at (3, -0.5) {};
%		\node [style=none] (2) at (3.5, -0.75) {$\cdots$};
%		\node [style=Z] (4) at (3.5, -1.25) {};
%		\node [style=none] (6) at (3.5, -1.75) {$\cdots$};
%		\node [style=none] (7) at (3, -2) {};
%		\node [style=Z] (8) at (3.5, -1.25) {};
%		\node [style=none] (9) at (4, -2) {};
%		\node [style=none] (10) at (3.5, -2) {$n$};
%		\node [style=none] (11) at (3.5, -0.5) {$m$};
%	\end{pgfonlayer}
%	\begin{pgfonlayer}{edgelayer}
%		\draw [in=-90, out=56] (4) to (0.center);
%		\draw [in=124, out=-90] (1.center) to (4);
%		\draw [in=-124, out=90] (7.center) to (8);
%		\draw [in=90, out=-56] (8) to (9.center);
%	\end{pgfonlayer}
%\end{tikzpicture}
%\ \right\rrbracket
%&=
%\dfrac{1}{\sqrt{p}}
%\sum_{j=0}^{p-1} | j, \ldots, j\rangle \langle j,\ldots, j|\\
%\left\llbracket\ 
%\begin{tikzpicture}
%	\begin{pgfonlayer}{nodelayer}
%		\node [style=none] (0) at (4, -0.5) {};
%		\node [style=none] (1) at (3, -0.5) {};
%		\node [style=none] (2) at (3.5, -0.75) {$\cdots$};
%		\node [style=X] (4) at (3.5, -1.25) {};
%		\node [style=none] (6) at (3.5, -1.75) {$\cdots$};
%		\node [style=none] (7) at (3, -2) {};
%		\node [style=none] (8) at (3.5, -1.25) {};
%		\node [style=none] (9) at (4, -2) {};
%		\node [style=none] (10) at (3.5, -2) {$n$};
%		\node [style=none] (11) at (3.5, -0.5) {$m$};
%	\end{pgfonlayer}
%	\begin{pgfonlayer}{edgelayer}
%		\draw [in=-90, out=56] (4) to (0.center);
%		\draw [in=124, out=-90] (1.center) to (4);
%		\draw [in=-124, out=90] (7.center) to (8);
%		\draw [in=90, out=-56] (8) to (9.center);
%	\end{pgfonlayer}
%\end{tikzpicture}
%\ \right\rrbracket
%&=
%\sum_{j=0}^{p-1}  \mathcal{F} | j, \ldots, j\rangle \langle j,\ldots, j| \mathcal{F}^\dag\\
%&=
%\sum_{\forall (x_j) \in \F_p^n,  (y_k) \in \F_p^m: \sum  x_j= \sum y _k \mod p} | y_1 ,\ldots, y_n \rangle \langle  x_1,\ldots, x_n|
%\end{align*}
\end{definition}
This has a relational semantics; to expose which we need the following definition:
\begin{definition}
A unitary map $f:\mathcal{H}\to \mathcal{H}$ is a {\bf stabilizer} of a state $|\phi\rangle$ on $\mathcal H$ in case $|\phi\rangle$ is a +1-eigenvector of $g$ so that $g| \phi\rangle = |\phi \rangle$.


The qudit ${\cal X}$-gate (qubit $\Not$-gate)  shifts the X-basis vectors by $a$ mod $d$:
$$
{\cal X} := \sum_{b=0}^{d-1} | b+1\rangle \langle b|
\ , \hspace*{.2cm} \text{where \ \ }
{\cal X}^a = \sum_{b=0}^{d-1} | b+a\rangle \langle b|
$$

Similarly, the  qudit ${\cal Z}$-gate  shifts the Z-basis vectors by $a$ mod $d$:
$$
{\cal Z}
:=
{\cal F}
{\cal X}
{\cal F}^\dag
=
\sum_{b=0}^{d-1}
e^{2\cdot\pi \cdot b/d} | b\rangle \langle b|
\ , \hspace*{.2cm} \text{where \ \ }
{\cal Z}^z
=
{\cal F}
{\cal X}^z
{\cal F}^\dag
=
\sum_{b=0}^{d-1}
e^{2\cdot\pi \cdot z\cdot b/d} | b\rangle \langle b|
$$


An $X$-stabilizer of an $n$-qudit state $\phi$ is a stabilizer of the form:
$$
{\cal X}^{a_0}
\otimes  {\cal X}^{a_1}
\otimes 
\cdots 
\otimes {\cal X}^{a_{n-2}}
\otimes {\cal X}^{a_{n-1}}
$$
Similarly, a $Z$-stabilizer of an $n$-qudit state $\phi$ is a stabilizer of the form:
$$
{\cal Z}^{a_0}
\otimes  {\cal Z}^{a_1} 
\otimes 
\cdots
\otimes {\cal Z}^{a_{n-2}}
\otimes {\cal Z}^{a_{n-1}}
$$
\end{definition}
The $X$ stabilizers characterize the phase-free ZX-calculus (this has been known for quite some time to both the categorical concurrency and quantum communities in the qubit case, see for example \cite[Page 8]{ih}):
\begin{lemma}
Given an odd prime $p$, $\LinRel_{\F_p}$ is isomorphic to the qupit phase-free ZX-calculus modulo invertible scalars.
\end{lemma}
\begin{proof}
Given a phase-free ZX-diagram it is easy to see how the $X$-stabilizers form a linear subspace over $\F_p$ as follows:
$$
\left\llbracket
D
\right\rrbracket_X
:=
\left\{ 
\left(
\begin{bmatrix}
           a_{1} \\
           \vdots \\
           a_{n}
\end{bmatrix}
,
\begin{bmatrix}
           b_{1} \\
           \vdots \\
           b_{m}
\end{bmatrix}
\right) \in \F_p^{n}\oplus\F_p^m
\ : \
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (1, 0) {$D$};
		\node [style=map] (1) at (0.45, 0.75) {${\cal X}^{b_1}$};
		\node [style=map] (2) at (1.55, 0.75) {${\cal X}^{b_m}$};
		\node [style=map] (3) at (1.55, -0.75) {${\cal X}^{a_n}$};
		\node [style=map] (4) at (0.45, -0.75) {${\cal X}^{a_1}$};
		\node [style=none] (5) at (0.45, 1.25) {};
		\node [style=none] (6) at (1.55, 1.25) {};
		\node [style=none] (7) at (0.45, -1.25) {};
		\node [style=none] (8) at (1.55, -1.25) {};
		\node [style=none] (9) at (1, 1.2) {$\cdots$};
		\node [style=none] (10) at (1, -1.2) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=45] (0) to (2);
		\draw [in=-45, out=90] (3) to (0);
		\draw [in=-90, out=135] (0) to (1);
		\draw [in=-135, out=90] (4) to (0);
		\draw (1) to (5.center);
		\draw (7.center) to (4);
		\draw (8.center) to (3);
		\draw (2) to (6.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (0, 0) {$D$};
		\node [style=none] (1) at (-0.5, 0.75) {};
		\node [style=none] (2) at (0.5, 0.75) {};
		\node [style=none] (3) at (0.5, -0.75) {};
		\node [style=none] (4) at (-0.5, -0.75) {};
		\node [style=none] (9) at (0, 0.5) {$\cdots$};
		\node [style=none] (10) at (0, -0.5) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=45] (0) to (2);
		\draw [in=-45, out=90] (3) to (0);
		\draw [in=-90, out=135] (0) to (1);
		\draw [in=-135, out=90] (4) to (0);
	\end{pgfonlayer}
\end{tikzpicture}
 \right\}
$$
Conversely, given an $\F_p$-linear subspace, take the projector onto the  joint $+1$-eigenspace spanned by the corresponding $X$-stabilizers:
$$
S\mapsto \sum_{(x_1,\cdots, x_n) \in S} \dfrac{1}{|S|} | x_1, \cdots x_n \rangle\langle x_1, \cdots, x_n  |
$$
%Given a basis $\{e_1,\cdots, e_\ell\}$ for $S$, this projector can be written even more succinctly:
%$$
%\prod_{j=1}^\ell \dfrac{I+{\mathcal Z}^{e_j}}{2}
%$$
Regarding this as a state on $\ell^{2}(\F_p^n)$ in $\CPM(\FHilb)$, partition the codomain of the state into an input and output.  Bending the input wires down  yields an inverse to the previous mapping.
\end{proof}



\begin{example}
Consider the following phase-free ZX-diagram: 
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.75, 0.25) {};
		\node [style=X] (1) at (43.25, 0.75) {};
		\node [style=none] (2) at (42.5, -0.25) {};
		\node [style=none] (3) at (43, -0.25) {};
		\node [style=none] (4) at (43.5, -0.25) {};
		\node [style=none] (5) at (42.5, 1.25) {};
		\node [style=none] (6) at (43, 1.25) {};
		\node [style=none] (7) at (43.5, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=285, out=90] (4.center) to (1);
		\draw [in=-90, out=135] (1) to (6.center);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=105] (0) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
Its $X$-stabilizers are parameterized by all the  $a_1,a_2,a_3,b_1,b_2,b_3 \in \F_p$ such that:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.725, 0.5) {};
		\node [style=X] (1) at (43.775, 0.75) {};
		\node [style=none] (2) at (42.2, -0.25) {};
		\node [style=none] (3) at (43.25, -0.25) {};
		\node [style=none] (4) at (44.3, -0.25) {};
		\node [style=none] (5) at (42.2, 1.5) {};
		\node [style=none] (6) at (43.25, 1.5) {};
		\node [style=none] (7) at (44.3, 1.5) {};
		\node [style=none] (8) at (42.2, 2.25) {};
		\node [style=none] (9) at (43.25, 2.25) {};
		\node [style=none] (10) at (44.3, 2.25) {};
		\node [style=none] (11) at (42.2, -1) {};
		\node [style=none] (12) at (43.25, -1) {};
		\node [style=none] (13) at (44.3, -1) {};
		\node [style=map] (14) at (42.2, -0.25) {${\cal X}^{a_1}$};
		\node [style=map] (15) at (43.25, -0.25) {${\cal X}^{a_2}$};
		\node [style=map] (16) at (44.3, -0.25) {${\cal X}^{a_3}$};
		\node [style=map] (17) at (42.2, 1.5) {${\cal X}^{b_1}$};
		\node [style=map] (18) at (43.25, 1.5) {${\cal  X}^{b_2}$};
		\node [style=map] (19) at (44.3, 1.5) {${\cal X}^{b_3}$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=285, out=90] (4.center) to (1);
		\draw [in=-90, out=135] (1) to (6.center);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=105] (0) to (5.center);
		\draw (5.center) to (8.center);
		\draw (6.center) to (9.center);
		\draw (7.center) to (10.center);
		\draw (13.center) to (4.center);
		\draw (12.center) to (3.center);
		\draw (11.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.75, 0.5) {};
		\node [style=X] (1) at (43.75, 0.75) {};
		\node [style=none] (2) at (42.25, -0.25) {};
		\node [style=none] (3) at (43.25, -0.25) {};
		\node [style=none] (4) at (44.25, -0.25) {};
		\node [style=none] (5) at (42.25, 1.5) {};
		\node [style=none] (6) at (43.25, 1.5) {};
		\node [style=none] (7) at (44.25, 1.5) {};
		\node [style=none] (8) at (42.25, 2.25) {};
		\node [style=none] (9) at (43.25, 2.25) {};
		\node [style=none] (10) at (44.25, 2.25) {};
		\node [style=none] (11) at (42.25, -1) {};
		\node [style=none] (12) at (43.25, -1) {};
		\node [style=none] (13) at (44.25, -1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=285, out=90] (4.center) to (1);
		\draw [in=-90, out=135] (1) to (6.center);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=105] (0) to (5.center);
		\draw (5.center) to (8.center);
		\draw (6.center) to (9.center);
		\draw (7.center) to (10.center);
		\draw (13.center) to (4.center);
		\draw (12.center) to (3.center);
		\draw (11.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
By labeling the wires with linear equations over $\F_p$, we can calculate these stabilizers:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.75, 0.5) {};
		\node [style=X] (1) at (43.75, 0.75) {};
		\node [style=none] (2) at (42.25, -0.25) {};
		\node [style=none] (3) at (43.25, -0.25) {};
		\node [style=none] (4) at (44.25, -0.25) {};
		\node [style=none] (5) at (42.25, 1.5) {};
		\node [style=none] (6) at (43.25, 1.5) {};
		\node [style=none] (7) at (44.25, 1.5) {};
		\node [style=none] (8) at (42.25, 2.25) {};
		\node [style=none] (9) at (43.25, 2.25) {};
		\node [style=none] (10) at (44.25, 2.25) {};
		\node [style=none] (11) at (42.25, -1) {};
		\node [style=none] (12) at (43.25, -1) {};
		\node [style=none] (13) at (44.25, -1) {};
		\node [style=none,color=blue] (14) at (42, -0.5) {$a_1$};
		\node [style=none,color=blue] (15) at (43, -0.5) {$a_2$};
		\node [style=none,color=blue] (16) at (44, -0.5) {$a_3$};
		\node [style=none,color=blue] (17) at (42, 1.75) {$b_1$};
		\node [style=none,color=blue] (18) at (43, 1.75) {$b_2$};
		\node [style=none,color=blue] (19) at (44, 1.75) {$b_3$};
		\node [style=none,color=blue] (20) at (40.75, 0.5) {$a_1=a_2=b_1$};
		\node [style=none,color=blue] (21) at (45.75, 0.75) {$a_1+a_3=b_2+b_3$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=285, out=90] (4.center) to (1);
		\draw [in=-90, out=135] (1) to (6.center);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=105] (0) to (5.center);
		\draw (5.center) to (8.center);
		\draw (6.center) to (9.center);
		\draw (7.center) to (10.center);
		\draw (13.center) to (4.center);
		\draw (12.center) to (3.center);
		\draw (11.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
Which gives us a linear subspace of $\F_p^{3} \oplus \F_p^3$:

\hfil\scalebox{.9}{$
\left\llbracket
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.75, 0.25) {};
		\node [style=X] (1) at (43.25, 0.75) {};
		\node [style=none] (2) at (42.5, -0.25) {};
		\node [style=none] (3) at (43, -0.25) {};
		\node [style=none] (4) at (43.5, -0.25) {};
		\node [style=none] (5) at (42.5, 1.25) {};
		\node [style=none] (6) at (43, 1.25) {};
		\node [style=none] (7) at (43.5, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=285, out=90] (4.center) to (1);
		\draw [in=-90, out=135] (1) to (6.center);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=105] (0) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
\right\rrbracket_X
=
\left\{
\left(
\begin{bmatrix}
           a_{1} \\
           a_{2} \\
           a_{3}
\end{bmatrix}
,
\begin{bmatrix}
           b_{1} \\
           b_{2} \\
           b_{3}
\end{bmatrix}
\right)
: a_1,a_2,a_3,b_1,b_2,b_3 \in \F_p,
a_1=a_2=b_1\wedge
a_1+a_3 = b_2+b_3
\right\}
$}
\end{example}


\begin{definition}
The $\cal X$-gate fragment of the ZX-calculus is given by adjoining the $\cal X$-gate as a generator to the phase free ZX-calculus.
\end{definition}
The qudit $\cal X$-gate is a phase for the 
$X$-spider as:
$$
{\cal X} =
 \sum_{j=0}^{j-1} | j+1\rangle \langle j|
=
 \sum_{j=0}^{d-1} e^{2 \pi\cdot i\cdot j/d} {\mathcal F} | j \rangle \langle j|  {\mathcal F}^\dag
$$
Therefore, natural number powers of the ${\cal X}$-gate are also phases for the $X$-spider as:
$$
{\cal X}^n
= 
 \sum_{j=0}^{d-1} | j+n\rangle \langle j|
=
\sum_{j=0}^{d-1} e^{2 \pi\cdot i\cdot n\cdot j/d} {\mathcal F}| j \rangle \langle j|  {\mathcal F}^\dag
$$
So one can ask if the the fragment of the odd prime qudit ZX-calculus with these $\cal X$-gate phases has a similar relational semantics to the phase-free ZX-calculus.  The answer is yes, and this result is not contained in the literature to my knowledge:
\begin{lemma}
$\Aff\Rel_{\F_p}$ is isomorphic to the qupit fragment of the ZX-calculus with $\cal X$-gates as phases modulo invertible scalars.
\end{lemma}
This is given by the interpretation:

$$
\left\llbracket\ 
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (4, -0.5) {};
		\node [style=none] (1) at (3, -0.5) {};
		\node [style=none] (2) at (3.5, -0.75) {$\cdots$};
		\node [style=Z] (4) at (3.5, -1.25) {};
		\node [style=none] (6) at (3.5, -1.75) {$\cdots$};
		\node [style=none] (7) at (3, -2) {};
		\node [style=Z] (8) at (3.5, -1.25) {};
		\node [style=none] (9) at (4, -2) {};
		\node [style=none] (10) at (3.5, -2) {$n$};
		\node [style=none] (11) at (3.5, -0.5) {$m$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=56] (4) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
=
\sum_{i=0}^{p-1} | i, \ldots, i\rangle \langle i,\ldots, i|
$$
$$
\left\llbracket\ 
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (4, -0.5) {};
		\node [style=none] (1) at (3, -0.5) {};
		\node [style=none] (2) at (3.5, -0.75) {$\cdots$};
		\node [style=X] (4) at (3.5, -1.25) {$a$};
		\node [style=none] (6) at (3.5, -1.75) {$\cdots$};
		\node [style=none] (7) at (3, -2) {};
		\node [style=none] (8) at (3.5, -1.25) {};
		\node [style=none] (9) at (4, -2) {};
		\node [style=none] (10) at (3.5, -2) {$n$};
		\node [style=none] (11) at (3.5, -0.5) {$m$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=56] (4) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
=
\sum_{\sum  x_i = \sum y _j +a \mod p} | y_1 ,\ldots, y_n \rangle \langle  x_1,\ldots, x_n|
$$

The proof is almost identical to that for linear relations and phase-free ZX-diagrams.
\begin{example}
Consider the following  diagram in the $\mathcal X$-gate fragment of the qupit ZX-calculus:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.75, 0.5) {};
		\node [style=X] (1) at (43.75, 0.75) {};
		\node [style=none] (2) at (42.25, -0.25) {};
		\node [style=none] (3) at (43.25, -0.25) {};
		\node [style=none] (4) at (44.25, -0.25) {};
		\node [style=none] (5) at (42.25, 2.25) {};
		\node [style=none] (6) at (43.25, 2.25) {};
		\node [style=none] (7) at (44.25, 2.25) {};
		\node [style=map] (8) at (43.25, 1.5) {${\cal X}^c$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=285, out=90] (4.center) to (1);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=105] (0) to (5.center);
		\draw [in=-90, out=150] (1) to (8);
		\draw (8) to (6.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
To compute the $X$ stabilizers is to find the $a_1,a_2,a_3,b_1,b_2,b_3 \in \F_p$ such that
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.725, 0) {};
		\node [style=X] (1) at (43.775, 0.25) {};
		\node [style=none] (2) at (42.2, -0.75) {};
		\node [style=none] (3) at (43.25, -0.75) {};
		\node [style=none] (4) at (44.3, -0.75) {};
		\node [style=none] (5) at (42.2, 1.75) {};
		\node [style=none] (6) at (43.25, 1.75) {};
		\node [style=none] (7) at (44.3, 1.75) {};
		\node [style=none] (8) at (42.2, 2.5) {};
		\node [style=none] (9) at (43.25, 2.5) {};
		\node [style=none] (10) at (44.3, 2.5) {};
		\node [style=none] (11) at (42.2, -1.5) {};
		\node [style=none] (12) at (43.25, -1.5) {};
		\node [style=none] (13) at (44.3, -1.5) {};
		\node [style=map] (14) at (42.2, -0.75) {${\cal X}^{a_1}$};
		\node [style=map] (15) at (43.25, -0.75) {${\cal X}^{a_2}$};
		\node [style=map] (16) at (44.3, -0.75) {${\cal X}^{a_3}$};
		\node [style=map] (17) at (42.2, 1.75) {${\cal X}^{b_1}$};
		\node [style=map] (18) at (43.25, 1.75) {${\cal X}^{b_2}$};
		\node [style=map] (19) at (44.3, 1.75) {${\cal X}^{b_3}$};
		\node [style=map] (20) at (43.25, 1) {${\cal X}^c$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=-60, out=90] (4.center) to (1);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=120] (0) to (5.center);
		\draw (5.center) to (8.center);
		\draw (6.center) to (9.center);
		\draw (7.center) to (10.center);
		\draw (13.center) to (4.center);
		\draw (12.center) to (3.center);
		\draw (11.center) to (2.center);
		\draw [in=-90, out=150] (1) to (20);
		\draw (20) to (18);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.75, 0.5) {};
		\node [style=X] (1) at (43.75, 0.75) {};
		\node [style=none] (2) at (42.25, -0.25) {};
		\node [style=none] (3) at (43.25, -0.25) {};
		\node [style=none] (4) at (44.25, -0.25) {};
		\node [style=none] (5) at (42.25, 1.5) {};
		\node [style=none] (6) at (43.25, 1.5) {};
		\node [style=none] (7) at (44.25, 1.5) {};
		\node [style=none] (8) at (42.25, 2.25) {};
		\node [style=none] (9) at (43.25, 2.25) {};
		\node [style=none] (10) at (44.25, 2.25) {};
		\node [style=none] (11) at (42.25, -1) {};
		\node [style=none] (12) at (43.25, -1) {};
		\node [style=none] (13) at (44.25, -1) {};
		\node [style=map] (14) at (43.25, 1.5) {${\cal X}^c$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=285, out=90] (4.center) to (1);
		\draw [in=-90, out=135] (1) to (6.center);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=105] (0) to (5.center);
		\draw (5.center) to (8.center);
		\draw (6.center) to (9.center);
		\draw (7.center) to (10.center);
		\draw (13.center) to (4.center);
		\draw (12.center) to (3.center);
		\draw (11.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
In $\Aff\Rel_{\F_p}$, this equation looks like:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.75, 0) {};
		\node [style=X] (1) at (43.75, 0.25) {$c$};
		\node [style=none] (2) at (42.25, -0.75) {};
		\node [style=none] (3) at (43.25, -0.75) {};
		\node [style=none] (4) at (44.25, -0.75) {};
		\node [style=none] (5) at (42.25, 1) {};
		\node [style=none] (6) at (43.25, 1) {};
		\node [style=none] (7) at (44.25, 1) {};
		\node [style=none] (8) at (42.25, 1.75) {};
		\node [style=none] (9) at (43.25, 1.75) {};
		\node [style=none] (10) at (44.25, 1.75) {};
		\node [style=none] (11) at (42.25, -1.5) {};
		\node [style=none] (12) at (43.25, -1.5) {};
		\node [style=none] (13) at (44.25, -1.5) {};
		\node [style=X] (14) at (42.25, -0.75) {$a_1$};
		\node [style=X] (15) at (43.25, -0.75) {$a_2$};
		\node [style=X] (16) at (44.25, -0.75) {$a_3$};
		\node [style=X] (17) at (42.25, 1) {$b_1$};
		\node [style=X] (18) at (43.25, 1) {$b_2$};
		\node [style=X] (19) at (44.25, 1) {$b_3$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=-60, out=90] (4.center) to (1);
		\draw [in=-90, out=135] (1) to (6.center);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=135] (0) to (5.center);
		\draw (5.center) to (8.center);
		\draw (6.center) to (9.center);
		\draw (7.center) to (10.center);
		\draw (13.center) to (4.center);
		\draw (12.center) to (3.center);
		\draw (11.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.75, 0) {};
		\node [style=X] (1) at (43.75, 0.25) {$c$};
		\node [style=none] (2) at (42.25, -0.75) {};
		\node [style=none] (3) at (43.25, -0.75) {};
		\node [style=none] (4) at (44.25, -0.75) {};
		\node [style=none] (5) at (42.25, 1) {};
		\node [style=none] (6) at (43.25, 1) {};
		\node [style=none] (7) at (44.25, 1) {};
		\node [style=none] (8) at (42.25, 1.75) {};
		\node [style=none] (9) at (43.25, 1.75) {};
		\node [style=none] (10) at (44.25, 1.75) {};
		\node [style=none] (11) at (42.25, -1.5) {};
		\node [style=none] (12) at (43.25, -1.5) {};
		\node [style=none] (13) at (44.25, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=-45, out=90] (4.center) to (1);
		\draw [in=-90, out=135] (1) to (6.center);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=135] (0) to (5.center);
		\draw (5.center) to (8.center);
		\draw (6.center) to (9.center);
		\draw (7.center) to (10.center);
		\draw (13.center) to (4.center);
		\draw (12.center) to (3.center);
		\draw (11.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
These $a_1,a_2,a_3,b_1,b_2,b_3$ are parameterized by the elements of the affine subspace:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (14) at (48.75, 0.5) {};
		\node [style=X] (15) at (49.75, 0.75) {$c$};
		\node [style=none] (16) at (48.25, -0.25) {};
		\node [style=none] (17) at (49.25, -0.25) {};
		\node [style=none] (18) at (50.25, -0.25) {};
		\node [style=none] (19) at (48.25, 1.5) {};
		\node [style=none] (20) at (49.25, 1.5) {};
		\node [style=none] (21) at (50.25, 1.5) {};
		\node [style=none] (22) at (48.25, 2.25) {};
		\node [style=none] (23) at (49.25, 2.25) {};
		\node [style=none] (24) at (50.25, 2.25) {};
		\node [style=none] (25) at (48.25, -1) {};
		\node [style=none] (26) at (49.25, -1) {};
		\node [style=none] (27) at (50.25, -1) {};
		\node [style=none,color=blue] (28) at (48, -0.5) {$a_1$};
		\node [style=none,color=blue] (29) at (49, -0.5) {$a_2$};
		\node [style=none,color=blue] (30) at (50, -0.5) {$a_3$};
		\node [style=none,color=blue] (31) at (48, 1.75) {$b_1$};
		\node [style=none,color=blue] (32) at (49, 1.75) {$b_2$};
		\node [style=none,color=blue] (33) at (50, 1.75) {$b_3$};
		\node [style=none,color=blue] (34) at (46.75, 0.75) {$a_1=a_2=b_1$};
		\node [style=none,color=blue] (35) at (52, 0.75) {$a_1+a_3+c=b_2+b_3$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (16.center) to (14);
		\draw [in=90, out=-45] (14) to (17.center);
		\draw [in=285, out=90] (18.center) to (15);
		\draw [in=-90, out=135] (15) to (20.center);
		\draw [in=-90, out=45] (15) to (21.center);
		\draw (14) to (15);
		\draw [in=-90, out=105] (14) to (19.center);
		\draw (19.center) to (22.center);
		\draw (20.center) to (23.center);
		\draw (21.center) to (24.center);
		\draw (27.center) to (18.center);
		\draw (26.center) to (17.center);
		\draw (25.center) to (16.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
So that:
$$
\left\llbracket
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.75, 0.25) {};
		\node [style=X] (1) at (43.25, 0.75) {$c$};
		\node [style=none] (2) at (42.5, -0.25) {};
		\node [style=none] (3) at (43, -0.25) {};
		\node [style=none] (4) at (43.5, -0.25) {};
		\node [style=none] (5) at (42.5, 1.25) {};
		\node [style=none] (6) at (43, 1.25) {};
		\node [style=none] (7) at (43.5, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=285, out=90] (4.center) to (1);
		\draw [in=-90, out=135] (1) to (6.center);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=105] (0) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
\right\rrbracket
=
\left\{
\left(
\begin{bmatrix}
           a_{1} \\
           a_{2} \\
           a_{3}
\end{bmatrix}
,
\begin{bmatrix}
           b_{1} \\
           b_{2} \\
           b_{3}
\end{bmatrix}
\right)
:
a_1=a_2=a_3\wedge
a_1+a_3+c = b_2+b_3
\right\}
$$
\end{example}


Because we can represent affine subspaces over $\F_p$ in the qupit ZX-calculus we can use the string diagrammatic notation for graphical linear and graphical affine algebra within the qupit ZX-calculus.
In the literature, this representation of matrices over $\F_2$ has already been exploited \cite{szxi,szxii}.




There is nothing particularly special about the $\mathcal X$-gate.  By interpreting circuits in the $\mathcal Z$-gate fragment of the qupit ZX-calculus modulo scalars in terms of their $Z$-stabilizers,  we would have similarly recovered the categories of linear/affine relations over $\F_p$. 


The $\mathcal Z$ and $\mathcal X$ operators are very important in quantum computing:
\begin{definition}
\label{definition:begin}
Fix some local dimension $d$.
A single qudit {\bf Weyl operator} is an $d$-dimensional unitary of the form, $\mathcal{X}^{x}\mathcal{Z}^{z}$, for $x,z \in \Z/d\Z$.

An $n$-qudit Weyl operator is the $n$-fold tensor product of single qudit Weyl operators.

The $n$-qudit Weyl operators form the {\bf Heisenberg-Weyl group} (or the qubit Pauli group) $\mathcal{P}_d^n$ under matrix multiplication and the Hermitian adjoint.
\end{definition}
Weyl operators have the following property (see \cite[\S 10.3.1]{nielsen}):
\begin{lemma}
\label{lem:ueb}
$n$-qudit Weyl operators are an orthonormal basis for the finite dimensional  Hilbert space of operators

$$
\FHilb(\ell^2((\Z/d\Z)^n), \ell^2((\Z/d\Z)^n))
\cong \ell^2((\Z/d\Z)^n)^*\otimes \ell^2((\Z/d\Z)^n)
$$

with respect to the scaled trace inner product:

$$
\langle  -,= \rangle
:=
\dfrac{1}{d^n}\tr((-)^\dag,=)
$$
\end{lemma}
The obvious choice of operator basis would have been:
$$
\{ |a_0, \cdots, a_{n-1} \rangle \langle  b_0,\cdots, b_{n-1} | \ | \ a_0,\cdots, a_{n-1},b_0,\cdots, b_{n-1} \in \Z/d\Z \}
$$

However, these basis elements are not unitary, and therefore can not be used to correct for errors.
On the other hand if at some point a known unitary error occurs,  because Weyl operators form a unitary basis, the error can be undone by applying controlled Weyl operators.

In fact, the quantum teleportation protocol relies on this fact.
Let us reexamine the phase-correction step in this protocol in more detail.

Notice how the $Z$-and $X$-bases are respectively: 

$$\{ \mathcal{X}^n|0\rangle \}_{n\in \Z/d\Z}
\ , \hspace{,5cm} \{\mathcal{F}|n\rangle=\mathcal{F} \mathcal{X}^n |0\rangle =\mathcal{Z}^n \mathcal{F} |0\rangle\}_{n\in \Z/d\Z}$$

Therefore to correct for the error $\mathcal{Z}^{-z}\mathcal{X}^{-x}$ which was communicated to him by Alice in terms as the pair of classical dits $(x,z)$,  Bob applies the following classically controlled operation:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Zthick] (22) at (223.5, 0) {};
		\node [style=Xthick] (23) at (223.5, 1) {};
		\node [style=X] (24) at (222.25, -1) {};
		\node [style=Z] (25) at (221, -1) {};
		\node [style=map] (26) at (221, -2) {$|x\rangle$};
		\node [style=map] (27) at (222.25, -2) {$\mathcal{F}|z\rangle$};
		\node [style=none] (28) at (223.5, -2.5) {};
		\node [style=none] (29) at (223.5, 2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [thick] (28.center) to (22.center) to (23.center)  to (29.center);
		\draw [thick, in=-165, out=90, looseness=0.75] (25) to (23);
		\draw [thick, in=-165, out=90] (24) to (22);
		\draw (27) to (24);
		\draw (26) to (25);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Zthick] (22) at (223.5, 0) {};
		\node [style=Xthick] (23) at (223.5, 1) {};
		\node [style=map, thick] (24) at (222.25, -1) {$\mathcal{F}|z\rangle$};
		\node [style=map, thick] (25) at (221, -1) {$|x\rangle$};
		\node [style=none] (28) at (223.5, -2.5) {};
		\node [style=none] (29) at (223.5, 2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [thick] (28.center) to (22.center) to (23.center)  to (29.center);
		\draw [thick, in=-165, out=90, looseness=0.75] (25) to (23);
		\draw [thick, in=-165, out=90] (24) to (22);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Zthick] (22) at (223.5, 0) {};
		\node [style=Xthick] (23) at (223.5, 1) {};
		\node [style=map, thick] (24) at (222.25, -1) {$\mathcal{Z}^z$};
		\node [style=map, thick] (25) at (221, -1) {$\mathcal{X}^x$};
		\node [style=none] (28) at (223.5, -2.5) {};
		\node [style=none] (29) at (223.5, 2) {};
		\node [style=Zthick] (240) at (222.25, -2) {};
		\node [style=Xthick] (250) at (221, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [thick] (28.center) to (22.center) to (23.center)  to (29.center);
		\draw [thick, in=-165, out=90, looseness=0.75] (25.center) to (23.center);
		\draw [thick, in=-165, out=90] (24.center) to (22.center);
		\draw [thick] (24.center) to (240.center);
		\draw [thick] (25.center) to (250.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Zthick] (22) at (223.5, 0) {};
		\node [style=Xthick] (23) at (223.5, 1) {};
		\node [style=Zthick] (24) at (222.25, -1) {};
		\node [style=Xthick] (25) at (221, -1) {};
		\node [style=none] (28) at (223.5, -2.5) {};
		\node [style=none] (29) at (223.5, 3) {};
		\node [style=map, thick] (240) at (223.5, -1) {$\mathcal{Z}^z$};
		\node [style=map, thick] (25-) at (223.5, 2) {$\mathcal{X}^x$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [thick] (28.center) to (22.center) to (23.center)  to (29.center);
		\draw [thick, in=-165, out=90, looseness=0.75] (25.center) to (23.center);
		\draw [thick, in=-165, out=90] (24.center) to (22.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map, thick] (22) at (223.5, 0) {$\mathcal{Z}^z$};
		\node [style=map, thick] (23) at (223.5, 1) {$\mathcal{X}^x$};
		\node [style=none] (28) at (223.5, -2.5) {};
		\node [style=none] (29) at (223.5, 2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [thick] (28.center) to (22.center) to (23.center)  to (29.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
Where the second last equation follows from the fact that $\mathcal{X}^x$ is a phase for $\xcirc$  and $\mathcal{Z}^z$ is a phase for $\zcirc$.
%
%Recall the Stinespring dialtion of a trace preserving map in $\CPM(\FHilb)$.  Using what we know about phase correction and measurement using the $Z$ and $X$ bases, turning the state on the bottom left into a state preparation map in in the $Z$ basis and the discard into a measurement in the $Z$ basis.  This describes the evolution of a quantum state with classical inputs and outputs:
%
% we get a model of the quantum evolution of a state 


The stabilizer formalism is a tractable tool used for correcting errors. Indeed, everything we have discussed so far, including quantum telportation is encompassed by this formalism.
It was first introduced in  \cite{gottesman} and later generalized to qudits in various ways.  We follow the qudit generalization provided in \cite{gota}:
\begin{definition}
An $n$-qudit {\bf Clifford operator} $U$ is a unitary on $\ell^2((\Z/d\Z)^n)$ that preserves the Heisenberg-Weyl group, so that $U {\cal P}_d^{ n} U^\dag = {\cal P}_d^{ n}$.  The $n$-qudit Clifford operators form the $n$-qudit {\bf Clifford group } under matrix multiplication and the Hermitian adjoint.  The qudit Clifford groupoid (or full qudit Clifford group) is the prop where the maps $n\to n$ are qudit Clifford operators.


An $n$-qudit (pure) {\bf stabilizer state} is a state $ U |0\rangle^{\otimes n}$ for an $n$-qudit Clifford $U$.


Given any $n$-qudit pure stabilizer state $|\psi \rangle$,  the {\bf stabilizer group} of $|\psi \rangle$   is the subgroup of ${\cal S}_{|\psi\rangle} \subset {\cal P}_d^{ n}$  whose elements  stabilize $|\psi\rangle$.
\end{definition}
The reason why stabilizer states are so nice is because we can chose to work with their very well-behaved stabilizer groups:
\begin{lemma}
Up to global phase, stabilizer states are in bijective correspondence their stabilizer groups, and stabilizer groups are in bijection with maximal Abelian subgroups of $ {\cal P}_d^{ n}$.
\end{lemma}
\begin{definition}
The prop of qudit {\bf stabilizer circuits}, generated by qudit Clifford operators as well as the state $|0\rangle$ and effect $\langle 0|$.
\end{definition}
There is a crucial difference between the  qubit and quopit Heinsenberg-Weyl group:
\begin{lemma}
All single quopit Weyl operators all can be factored into
$
e^{2\pi \cdot i\cdot a /p} {\cal Z}^z{\cal X}^x
$ 
for $a,z,x \in \F_p$.
Whereas all single qubit Weyl operators can be factored into 
$
 i^a {\cal Z}^z{\cal X}^x
$
for $z,x \in \F_2$ and $a \in \Z/4\Z$.
\end{lemma}
This difference between qubits and quopits  is also reflected in the structure of the Clifford groupoid:
\begin{lemma}[{\cite[Page 5]{gota}}]
Up to nonzero scalars, the qupit Clifford groupoid is generated by the Fourier transform $\mathcal F$, the  phase-shift gate $\mathcal S$, controlled-$\mathcal X$ gate $\mathcal{C}_{\mathcal X}$, and scaling gates $\mathcal{M}_a$ for every $a \in \F_p^*$ where:
$$
\mathcal{C}_{\mathcal X}:= \sum_{j,k=0}^{p-1} |j,j+k \rangle \langle j,k |\, \hspace*{.5cm}
\mathcal{M}_a := \sum_{j=0}^{p-1} |j\cdot a \rangle\langle j |
$$ 
$$
\text{Such that for qubits, }
\mathcal{S}:= \sum_{j=0}^{1} i^j |j\rangle\langle j |
\text{, and for quopits, }
\mathcal{S}:= \sum_{j=0}^{p-1} e^{\pi\cdot i \cdot j(j-1)/(2p)} |j\rangle\langle j |
$$
\end{lemma}
As we will discuss in much further detail in Chapter \ref{chap:stab}, the ZX-calculus is naturally suited for stabilizer circuits:
\begin{definition}
The {\bf qubit stabilizer fragment of the ZX-calculus} is generated by two spiders with phases in the group $\Z/4\Z$ where:
$$
\Z/4\Z \to [0,1)^2;\ n \mapsto (0,n/4)
$$
The generators of qubit stabilizer circuits are interpreted as follows:
$$
\llbracket {\mathcal F}\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (68) at (396.5, -0.45) {};
		\node [style=none] (69) at (396.5, -2.55) {};
		\node [style=Z] (70) at (396.5, -2.1) {$1$};
		\node [style=Z] (71) at (396.5, -0.9) {$1$};
		\node [style=X] (72) at (396.5, -1.5) {$1$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (69.center) to (70);
		\draw (70) to (72);
		\draw (72) to (71);
		\draw (71) to (68.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {\mathcal S}\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.25, -1) {};
		\node [style=none] (1) at (1.25, -2.5) {};
		\node [style=X] (4) at (1.25, -1.75) {$1$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (4);
		\draw (4) to (0.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {\mathcal X}\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.25, -1) {};
		\node [style=none] (1) at (1.25, -2.5) {};
		\node [style=X] (4) at (1.25, -1.75) {$2$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (4);
		\draw (4) to (0.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {\mathcal C}_{\mathcal X}\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (14) at (9.5, -1.75) {};
		\node [style=Z] (15) at (8.75, -1.75) {};
		\node [style=none] (16) at (9.5, -1) {};
		\node [style=none] (17) at (8.75, -1) {};
		\node [style=none] (18) at (9.5, -2.5) {};
		\node [style=none] (19) at (8.75, -2.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (17.center) to (15);
		\draw (15) to (14);
		\draw (14) to (16.center);
		\draw (14) to (18.center);
		\draw (19.center) to (15);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {| 0 \rangle }\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (5) at (6, -2) {};
		\node [style=none] (7) at (6, -1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (5) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {\langle 0 | }\rrbracket=
\begin{tikzpicture}[scale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (5) at (6, -2) {};
		\node [style=none] (7) at (6, -1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (5) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
The {\bf quopit stabilizer fragment of the ZX-calculus} is generated by two spiders with phases in the group $(\Z/p\Z)^2$ where:
$$
(\Z/p\Z)^2 \to [0,1)^p; \ (n,m)\mapsto  \prod_{j=0}^{p-1} (n j +m j^2)/(2p) \mod 1
$$
The generators of quopit stabilizer circuits are interpreted as follows:
$$
\llbracket {\mathcal F}\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (73) at (397.5, -0.575) {};
		\node [style=none] (74) at (397.5, -2.9) {};
		\node [style=Z] (75) at (397.5, -2.375) {$0,1$};
		\node [style=Z] (76) at (397.5, -1.1) {$0,1$};
		\node [style=X] (77) at (397.5, -1.75) {$0,1$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (74.center) to (75);
		\draw (75) to (77);
		\draw (77) to (76);
		\draw (76) to (73.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {\mathcal S}\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.25, -1) {};
		\node [style=none] (1) at (1.25, -2.5) {};
		\node [style=X] (4) at (1.25, -1.75) {$0,1$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (4);
		\draw (4) to (0.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {\mathcal X}\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.25, -1) {};
		\node [style=none] (1) at (1.25, -2.5) {};
		\node [style=X] (4) at (1.25, -1.75) {$1,0$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (4);
		\draw (4) to (0.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {\mathcal C}_{\mathcal X}\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (8) at (7.75, -1.75) {};
		\node [style=Z] (9) at (7, -2) {};
		\node [style=none] (10) at (7.75, -1) {};
		\node [style=none] (11) at (7, -1) {};
		\node [style=none] (12) at (7.75, -2.75) {};
		\node [style=none] (13) at (7, -2.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (11.center) to (9);
		\draw (9) to (8);
		\draw (8) to (10.center);
		\draw (8) to (12.center);
		\draw (13.center) to (9);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {| 0 \rangle }\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (5) at (6, -2) {};
		\node [style=none] (7) at (6, -1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (5) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {\langle 0 | }\rrbracket=
\begin{tikzpicture}[scale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (5) at (6, -2) {};
		\node [style=none] (7) at (6, -1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (5) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
\end{definition}
The scaling gate is derived in stabilizer circuits, so it need not be stated. However it it corresponds to the multiplication of a scalar under the embedding:
$$
(\Mat_{\F_p},+) \to (\LinRel_{\F_p},+) \to (\FHilb/\sim,\otimes)
$$
That is using the notation for graphical linear/affine algebra within the qupit ZX-calculus:
$$
\llbracket {\mathcal M}_a \rrbracket = 
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (47) at (44, -2) {};
		\node [style=none] (48) at (44, -3) {};
		\node [style=scalar] (50) at (44, -2.5) {$a$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (48.center) to (50);
		\draw (50) to (47.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

Even though the quopit and qubit stabilizer fragments of the ZX-calculus diverge, they coincide when the phases are restricted.  We have already observed this during our analysis of the phase free, $\mathcal X$-gate and $\mathcal Z$-gate fragments of the ZX-calculus.
\begin{definition}
\label{def:biaffine}
Given any prime $p$, the {\bf biaffine} fragment of the stabilizer ZX-calculus is generated by $Z$ and $X$ spiders with phases in $\Z/p\Z$ where:
$$
\Z/p\Z \to [0,1)^p; \ n \mapsto  \prod_{j=0}^{p-1} (n j)/(2p)
$$
\end{definition}
The qubit \cite{backensstab,backens2015} and qutrit \cite{qutrit} stabilizer ZX-calculi both have complete presentations.  However, during the process of writing this thesis, an axiomatization was provided for the quopit stabilizer ZX-calculus \cite{booth}, followed shortly by an even simpler presentation \cite{poor}.  Note that the interpretations of the generators in \cite{poor,booth} differ slightly for technical reasons (specifically they designed their presentations to be flexsymmetric following \cite[\S 5]{flexsymmetric}).


Despite being used being used extensively for error correction, as we will discuss in Section \ref{sec:qec}, unlike general quantum circuits, stabilizer circuits are not any more powerful than classical probabilistic computing:
\begin{theorem}[Gottesman-Knill]
Stabilizer circuits can be classically probabilistically  simulated in polynomial time.
\end{theorem}
The original proof for qudits is found in  \cite{gottesmanknill}; however, it follows immediately for qudits.  Later on, we will effectively reprove the quopit Gottesman-Knill theorem when we give a relational characterization of quopit stabilizer circuits.  In fact stabilizer circuits are the largest classically simulatable fragment containing the Clifford group:
\begin{proposition}[{\cite[Appendix D]{campbell}}]
\label{prop:campbell}
Adding any non-Clifford unitary to stabilizer circuits is an approximately universal set of generators for qupit  circuits.
\end{proposition}
By approximately universal, this means that such a set of generators is dense in the appropriate sense.
The qubit case seems to be folklore; the reference I provided was for qupits.  Surely this also holds for all dimensions, but the group theory becomes harder.  It is dense in an efficient way, by the Solvay-Kiataev theorem, proved initially for qubits  \cite{Kitaev1997}, and later for all qudits \cite[\S 5]{Dawson2006}.

Therefore, by adding any other phases to qupit stabilizer circuits is maximally expressive.  The first approximately universal axiomatization of the qudit ZX-calculus, was obtained by adding the $1/8$ phase: yielding a complete axiomatization for the qubit  Clifford+T quantum circuits \cite{Jeandel}.

Later, two complete presentations for the full qubit ZX-calculus followed,  where all phases are allowed  \cite{zxcompleteb,zxcompletea}. These presentations of the qubit ZX-calculus are universal on the nose, so that they both are presentations for the full subcategory of $\Mat_\C$ whose objects are powers of $2$.


Up until this point, we have discussed quantum circuits as being generated by spiders. Although spiders are good for copying and adding standard basis elements; it is hard to construct nonlinear behaviour using these generators.

To accommodate for this, {\bf $H$-boxes} were devised in the qubit case by \cite{zh}:
\begin{definition}
\label{def:zh}
Given any $c\in \C$, the $c$-labelled qubit $H$-box with $n$ inputs and $m$ outputs is the operator $\ell^2(\F_2^n)\to \ell^2(\F_2^m)$:
$$
\left\llbracket
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=H] (0) at (1, 11.25) {$c$};
		\node [style=none] (1) at (1.5, 10.5) {};
		\node [style=none] (2) at (1.5, 12) {};
		\node [style=none] (3) at (0.5, 10.5) {};
		\node [style=none] (4) at (0.5, 12) {};
		\node [style=none] (5) at (1, 12) {$\cdots$};
		\node [style=none] (6) at (1, 10.5) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=30, out=-90] (2.center) to (0);
		\draw [in=90, out=-30] (0) to (1.center);
		\draw [in=-150, out=90] (3.center) to (0);
		\draw [in=-90, out=150] (0) to (4.center);
	\end{pgfonlayer}
\end{tikzpicture}
\right\rrbracket
=
\sum_{a_0,\ldots, a_{n-1},b_0,\ldots, b_{m-1} =0}^1
c^{a_0\cdot\ldots\cdot a_{n-1}\cdot b_0\cdot\ldots\cdot b_{m-1}} | b_0,\ldots, b_{m-1}\rangle \langle a_0,\ldots, a_{n-1} |
$$
Ie, the matrix where all entries are $1$, except for the bottom-right entry which is $c$.


The $H$-box with label $-1$ and one input and one out is equal to $\sqrt{2}\mathcal{F}$.
Because of this relationship with the Fourier transform, a ``phase-free'' $H$-box with no label, corresponds to one with label -1:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=H] (0) at (1, 11.25) {};
		\node [style=none] (1) at (1.5, 10.5) {};
		\node [style=none] (2) at (1.5, 12) {};
		\node [style=none] (3) at (0.5, 10.5) {};
		\node [style=none] (4) at (0.5, 12) {};
		\node [style=none] (5) at (1, 12) {$\cdots$};
		\node [style=none] (6) at (1, 10.5) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=30, out=-90] (2.center) to (0);
		\draw [in=90, out=-30] (0) to (1.center);
		\draw [in=-150, out=90] (3.center) to (0);
		\draw [in=-90, out=150] (0) to (4.center);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1, 11.25) {};
		\node [style=H] (10) at (1, 11.25) {$-1$};
		\node [style=none] (1) at (1.5, 10.5) {};
		\node [style=none] (2) at (1.5, 12) {};
		\node [style=none] (3) at (0.5, 10.5) {};
		\node [style=none] (4) at (0.5, 12) {};
		\node [style=none] (5) at (1, 12) {$\cdots$};
		\node [style=none] (6) at (1, 10.5) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=30, out=-90] (2.center) to (0);
		\draw [in=90, out=-30] (0) to (1.center);
		\draw [in=-150, out=90] (3.center) to (0);
		\draw [in=-90, out=150] (0) to (4.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
This is the reason for the name ``$H$-box'' as the qubit Fourier transform is often called the ``Hadamard gate.''

One should not confuse an $H$-box with one input and one output (drawn in grey) with the antipode for the Hopf algebra (drawn in black) for the $Z$ and $X$-spiders.


Although $H$-boxes do not correspond to Frobenius algebras, they do satisfy a sort of fusion rule:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=H] (0) at (0, 0) {$c$};
		\node [style=none] (1) at (0.5, -0.75) {};
		\node [style=none] (3) at (-0.5, -0.75) {};
		\node [style=none] (6) at (0, -0.75) {$\cdots$};
		\node [style=H] (7) at (0, 1.5) {};
		\node [style=none] (9) at (0.5, 2.25) {};
		\node [style=none] (11) at (-0.5, 2.25) {};
		\node [style=none] (12) at (0, 2.25) {$\cdots$};
		\node [style=H] (14) at (0, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw [in=-150, out=90] (3.center) to (0);
		\draw [in=30, out=-90] (9.center) to (7);
		\draw [in=-90, out=150] (7) to (11.center);
		\draw (7) to (14);
		\draw (14) to (0);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (16) at (4.5, -0.75) {};
		\node [style=none] (17) at (4.5, 0.75) {};
		\node [style=none] (18) at (3.5, -0.75) {};
		\node [style=none] (19) at (3.5, 0.75) {};
		\node [style=none] (20) at (4, 0.75) {$\cdots$};
		\node [style=none] (21) at (4, -0.75) {$\cdots$};
		\node [style=none] (22) at (4, 0) {};
		\node [style=H] (23) at (4, 0) {$c$};
		\node [style=H] (24) at (3, 0) {$2$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=120] (22.center) to (19.center);
		\draw [in=-90, out=60] (22.center) to (17.center);
		\draw [in=90, out=-120] (22.center) to (18.center);
		\draw [in=90, out=-60] (22.center) to (16.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

The following diagram multiplies standard basis elements:
\begin{align*}
\left\llbracket\
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=H] (0) at (0, 3.5) {};
		\node [style=none] (1) at (0.5, 2.75) {};
		\node [style=none] (3) at (-0.5, 2.75) {};
		\node [style=none] (6) at (0, 2.75) {$\cdots$};
		\node [style=H] (7) at (0, 4.25) {};
		\node [style=none] (8) at (0, 5) {};
		\node [style=H] (9) at (-1, 4) {$1/2$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw [in=-150, out=90] (3.center) to (0);
		\draw (0) to (7);
		\draw (7) to (8.center);
	\end{pgfonlayer}
\end{tikzpicture}\
\right\rrbracket
=
\sum_{a_0,\ldots, a_{n-1}=0}^1
|a_0\cdot\ldots\cdot a_{n-1}\rangle\langle a_0,\cdots, a_{n-1}|
\end{align*}

That is to say, $H$-boxes, allow us to construct $\sf and$-gates, which we denote as follows:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.25, 3.5) {};
		\node [style=andin] (1) at (1.25, 3.5) {};
		\node [style=none] (2) at (1.75, 2.75) {};
		\node [style=none] (3) at (0.75, 2.75) {};
		\node [style=none] (4) at (1.25, 2.75) {$\cdots$};
		\node [style=none] (5) at (1.25, 4.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0.center) to (2.center);
		\draw [in=-150, out=90] (3.center) to (0.center);
		\draw (0.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=H] (8) at (3.25, 3.5) {};
		\node [style=none] (9) at (3.75, 2.75) {};
		\node [style=none] (10) at (2.75, 2.75) {};
		\node [style=none] (11) at (3.25, 2.75) {$\cdots$};
		\node [style=H] (12) at (3.25, 4.25) {};
		\node [style=none] (13) at (3.25, 5) {};
		\node [style=H] (15) at (2.25, 4) {$1/2$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (8) to (9.center);
		\draw [in=-150, out=90] (10.center) to (8);
		\draw (8) to (12);
		\draw (12) to (13.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
\end{definition}
In analogy to the ZX-calculus, a {\bf fragment of the ZH-calculus} is presented by unphased $Z$ and $X$ spiders, in addition to  $H$-boxes labelled by a semiring $S$ and an interpretation into $\FHilb$. The interpretation must send the $Z$ and $X$ spiders to to the $Z$ and $X$ spiders in $\Hilb$ in the same way as for the phase-free ZX-calculus. We also ask that there is a semiring homorphism $f:S\to \C$ such that 
$$
\left\llbracket
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=H] (0) at (1, 11.25) {$c$};
		\node [style=none] (1) at (1.5, 10.5) {};
		\node [style=none] (2) at (1.5, 12) {};
		\node [style=none] (3) at (0.5, 10.5) {};
		\node [style=none] (4) at (0.5, 12) {};
		\node [style=none] (5) at (1, 12) {$\cdots$};
		\node [style=none] (6) at (1, 10.5) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=30, out=-90] (2.center) to (0);
		\draw [in=90, out=-30] (0) to (1.center);
		\draw [in=-150, out=90] (3.center) to (0);
		\draw [in=-90, out=150] (0) to (4.center);
	\end{pgfonlayer}
\end{tikzpicture}
\right\rrbracket
=
\sum_{a_0,\ldots, a_{n-1},b_0,\ldots, b_{m-1} =0}^1
(f(c))^{a_0\cdot\ldots\cdot a_{n-1}\cdot b_0\cdot\ldots\cdot b_{m-1}} | b_0,\ldots, b_{m-1}\rangle \langle a_0,\ldots, a_{n-1} |
$$

The notions of completeness and universality are essentially the same as for the ZX-calculus. 

The full qubit ZH-calculus was proved to be complete and universal for all qubit complex matrices in the original paper \cite{zh}.  

Recall that an H-box with no label is the same as an H-box which is labelled by $-1$.  Therefore an axiomatization for the phase-free ZH-calculus must be compatible with the semiring homorphism $\Z\to\C$.
Completeness for the phase-free ZH-calculus up to a scalar factor followed shortly after full completeness \cite{zhpi}; giving a presentation for qubit matrices over $\Z[1/\sqrt{2}]$.
They also showed that the  phase-free ZH-calculus is approximately universal for quantum circuits.
%TODO GIVE GENERATORS AND EQUATIONS

In the following chapter we prove completeness for the circuits generated by unphased $Z$ and $X$-spiders as well as $\AND$ gates and $\Not$-gates.  We prove that this is essentially the natural-number labelled H-box fragment of the ZH-calculus. the only difference being that we carefully avoid having matrices with entries which are not natural numbers.

Recently, a universal set of generators has been proposed for the qudit ZH-calculus, but no completeness theorem exists so far \cite{roy}.



%TODO TITOUANS DISCARD CONSTRUCTION

%
%
%
%For the interest of the reader,  there has recently been work on axiomatizing density matrices in terms of generators and relations.  Given a $\dag$-monoidal category $\X$, the discard construction on $\X$, $\X^\disc$ can be regarded as the quotient of $\CoPara(\X)$  by the congruence that  the isometries of $\X$ are freely discarded \cite{discard}.  They show, for example,  that when $\X$ is a complete axiomatization of any one of  the qubit stabilizer fragment of the ZX-calculus, the full qubit ZX-calculus, or the ZH-calculus, then there is a $\dag$-symmetric monoidal isomorphism $\X^\disc\cong \CPM(\X)$.  Unlike the CPM construction, this approach to density matrices is amenable to presentations in terms of generators and relations.  All three of these props have complete presentations where their isometries are known, so mixed circuits automatically get a complete axiomatization.   We will see in Chapter \ref{chap:stab} how we add discarding in a very similar way.
