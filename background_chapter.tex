
\section{Category theory}
\label{sec:cat}

In this section we review some category theory needed for this thesis. We will review the theory of monoidal category theory and its more refined cousins. We will review some basic properties of limits and categories of spans and relations.  Finally we will review some basic notions in internal category theory.

\subsection{Monoidal categories and string diagrams}
\label{subsec:moncat}

In this subsection we review the basic theory of monoidal categories as well as their string diagrams.   The material for which a reference is not provided can be found in an introductory reference to category theory (eg MacLane \cite{maclane}).  The reader uninterested in technical details is invited to skip the commutative diagrams and go straight to the pictures.

\begin{definition}
A {\bf monoidal category} is a category $\X$ equipped with a functor $\X\times\X\to \X$ called the {\bf tensor product}, equipped with a distinguished object $I$ of $\X$ called the {\bf tensor unit}; along with the following natural isomorphisms (given by components):

\begin{description}
\item[Left unitor:]
$$
u_X^L:I\otimes X \to X
$$
\item[Right unitor:]
$$
u_X^R: X\otimes I \to X
$$
\item[Associator:]
$$
\alpha_{X,Y,Z}:(X\otimes Y)\otimes Z \to X\otimes(Y\otimes Z)
$$
\end{description}

Satisfying the following coherence equations:

\begin{description}
\item[MacLane pentagon:]


$$
\xymatrix{
  ((W\otimes X )\otimes Y)\otimes Z \ar[rr]^{\alpha_{W\otimes X,Y,Z}} \ar[d]_{\alpha_{W,X,Y}\otimes 1_Z}
    &
    & (W\otimes X )\otimes (Y\otimes Z) \ar[d]^{\alpha_{W, X,Y\otimes Z}}
  \\  (W\otimes(X\otimes Y))\otimes Z \ar[dr]_{\alpha_{W,\otimes Y,Z}}
    & 
    & W\otimes (X\otimes(Y\otimes Z)) 
  \\&
    W\otimes ((X\otimes Y)\otimes Z) \ar[ur]_{1_W\otimes \alpha_{X,Y,Z}}
}
$$

\item[Unit triangle:]

$$
\xymatrix{
  (X\otimes I)\otimes Y \ar[rr]^{\alpha_{X,I,Y}} \ar[dr]_{u_X^{R}\otimes 1_Y}
    &
    & X\otimes (I\otimes Y) \ar[dl]^{1_X\otimes u_Y^{L}}\\
  & X\otimes Y
}
$$

\end{description}


We will call a map out of the tensor unit a {\bf state}, a map into the tensor unit an {\bf effect}, and an endomorphism on a the tensor unit a {\bf scalar}.
\end{definition}


\begin{example}
Both the category $\FSets$ of finite sets and functions and the category $\Sets$ of sets and functions are monoidal categories under both the product and under the coproduct.

Given a field $k$, the category $\Vect_k$ vector spaces over $k$  and the category $\FVect_k$ of finite-dimensional vector spaces over $k$ are monoidal with respect to the bilinear tensor product and the direct sum.

The category $\Hilb$ of Hilbert spaces and the category $\FHilb$ of finite dimensional Hilbert spaces are both monoidal categories with respect to the bilinear tensor product and direct sum.
\end{example}



\begin{definition}
Given two monoidal categories $\X$ and $\Y$ a (strong) {\bf monoidal functor} from $\X$ to $\Y$ is a functor $F:\X\to \Y$ together with an isomorphism $\epsilon:I^\X \to F(I^\X)$ and natural isomorphism with components $\mu_{X,Y}:F(X)\otimes^\Y F(Y) \to F(X \otimes^\X Y)$ such that the following coherence equations hold:

\begin{description}

\item[Interaction with associator:]

$$
\xymatrix{
 (F(X)\otimes^\Y F(Y))\otimes^\Y F(Z) \ar[rrr]^{\alpha_{F(X),F(Y),F(Z)}^{\Y}} \ar[d]_{\mu_{X,Y}\otimes^\Y F(Z)}
   &&& F(X) \otimes^\Y (F(Y)\otimes^\Y F(Z)) \ar[d]^{F(X)\otimes^\Y \mu_{Y,Z}}
 \\F(X\otimes^\X Y)\otimes^\Y F(Z) \ar[d]_{\mu_{X\otimes^\X Y,Z}}
   &&& F(X)\otimes^\Y F(Y\otimes^\X Z) \ar[d]^{\mu_{X,Y\otimes^\Y Z}}
 \\ F((X\otimes^\X Y) \otimes^\X Z) \ar[rrr]_{F(\alpha_{X,Y,Z}^\Y)}
   &&& F(X\otimes^\X (Y\otimes^\X Z))
}
$$

\item[Interaction with unitors:]
$$
\xymatrix{
 I^\Y \otimes^\Y F(X) \ar[rr]^{\epsilon \otimes^\Y F(X)} \ar[d]_{(u^L)^\Y_{F(X)}}
  &&  F(I^\X) \otimes^\Y F(X) \ar[d]^{\mu_{1^\X,X}}
\\F(X)
 & & F(I^\X\otimes^\X X) \ar[ll]^{F((u^L)^\X_{X} )}
}
$$


$$
\xymatrix{
  F(X)  \otimes^\Y I^\Y \ar[rr]^{ F(X)  \otimes^\Y \epsilon} \ar[d]_{(u^R)^\Y_{F(X)}}
  && F(X) \otimes^\Y    F(I^\X)  \ar[d]^{\mu_{X,1^\X}}
\\F(X)
 & & F(X \otimes^\X I^\X ) \ar[ll]^{F((u^R)^\X_{X} )}
}
$$
\end{description}


A {\bf monoidal natural transformation} between parallel monoidal functors $F,G:\X\to \Y$ is a natural transformation $\phi:F\to G$ such that the following coherence equations hold:

$$
\xymatrix{
  F(X)\otimes^\Y F(Y) \ar[rr]^{\phi_X\otimes^\Y \phi_Y} \ar[d]_{\mu^F_{X,Y}}
   && G(X)\otimes^\Y G(Y) \ar[d]^{\mu^G_{X,Y}}
 \\G(X\otimes^\X Y) \ar[rr]_{\phi_{X\otimes^\X Y}}
   && G(X\otimes^\X Y)
},
\hspace*{.5cm}
\xymatrix{
I^\Y \ar[dr]^{\eta^G} \ar[d]_{\eta^F}
\\ F(I^\X) \ar[r]_{\phi_{I^\X}}
  &G(I^\X)
}
$$

Monoidal categories, monoidal functors and monoidal natural transformations arrange themselves into the bicategory of monoidal categories. 
\end{definition}


%Both the category $\FinMonot$ of finite sets and monotone functions and the category $\Monot$ of sets and monotone functions are monoidal categories under both the product and under the coproduct.






If all of the components of the natural transformations are equalities, then the monoidal category is {\bf strict}.  Therefore, we can forget the bracketing when we tensor things, and regard the tensor product of multiple objecs as a list.
A {\bf strict monoidal functor} is a monoidal functor where the natural transformations $\epsilon$ and $\mu$ are the identity.
Likewise, strict monoidal categories, strict monoidal functors and monoidal natural transformations arrange themselves into the bicategory of strict monoidal categories.




\begin{example}

The category $\FinOrd$ of finite ordinals and functions is the category where:

\begin{description}
\item[Objects:] The objects are the natural numbers.

\item[Maps:]
For each natural number $n$, the finite ordinal $[n]$ is a distinguished $n$-element set with a chosen total order.


A map from $n\to m$ is a function from $[n]\to [m]$.

The composition and identity is given by the composition and identity of sets and functions.
\end{description}

This has two strict monoidal structures.  The first one comes from the disjoint union:

\begin{description}
\item[Tensor unit:] The tensor unit is the natural number 0.
\item[Monoidal product:]
On objects this acts as addition.  On maps, $f:n\to m$ and $g:k\to \ell$, the map $f+g$ is corresponds to the chosen disjoint union $f\sqcup g$ $[n+k]\to [k+\ell]$ respecting the chosen order.
\end{description}

The second comes from the cartesian product:

\begin{description}
\item[Tensor unit:] The tensor unit is the natural number 1.
\item[Monoidal product:]
On objects this acts as multiplication.  On maps, $f:n\to m$ and $g:k\to \ell$, the map $f\times g$ is corresponds to the chosen product $f\times g:[n\cdot k]\to [k\cdot \ell]$ respecting the chosen order.
\end{description}


Restricting $\FinOrd$ to functions which preserve the chosen order of the ordinals yields the category $\FinOrdMonot$ of finite ordinals and monotone functions.  This is a strict monoidal category with respect to the disjoint union.
\end{example}

\begin{example}
Given a commutative semiring $S$, the category, $\Mat_S$, of matrices over $S$ is strict monoidal under the bilinear tensor product and the direct sum.
\end{example}






Strict monoidal categories are very nice to work with because they have a particularly concise graphical calculus, called {\bf string diagrams}.  A map $f:X_1\otimes \cdots \otimes X_n\to Y_1\otimes \cdots \otimes Y_m$ is drawn as a box with $n$ wires coming out of the bottom and $m$ wires coming out of the top, all being labelled by their respective objects, as follows:


$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (0, 3) {$f$};
		\node [style=none] (1) at (-0.75, 2.25) {};
		\node [style=none] (2) at (-0.25, 2.25) {};
		\node [style=none] (3) at (0.75, 2.25) {};
		\node [style=none] (4) at (-0.75, 2) {$X_1$};
		\node [style=none] (5) at (-0.25, 2) {$X_2$};
		\node [style=none] (6) at (0.75, 2) {$X_n$};
		\node [style=none] (7) at (0.25, 2.25) {$\cdots$};
		\node [style=none] (8) at (-0.75, 3.75) {};
		\node [style=none] (9) at (-0.25, 3.75) {};
		\node [style=none] (10) at (0.75, 3.75) {};
		\node [style=none] (11) at (-0.75, 4) {$Y_1$};
		\node [style=none] (12) at (-0.25, 4) {$Y_2$};
		\node [style=none] (13) at (0.75, 4) {$Y_m$};
		\node [style=none] (14) at (0.25, 3.75) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-135, looseness=0.75] (0) to (1.center);
		\draw [in=255, out=90] (2.center) to (0);
		\draw [in=90, out=-45, looseness=0.75] (0) to (3.center);
		\draw [in=105, out=-90] (9.center) to (0);
		\draw [in=-90, out=135, looseness=0.75] (0) to (8.center);
		\draw [in=-90, out=45, looseness=0.75] (0) to (10.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

The identity on an object $X$ is drawn as a line:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (1) at (0.5, 0.5) {};
		\node [style=none] (3) at (0.5, 3) {};
		\node [style=none] (4) at (0.5, 0.25) {$X$};
		\node [style=none] (6) at (0.5, 3.25) {$X$};
		\node [style=map] (13) at (0.5, 1.75) {$1_X$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (3.center) to (13);
		\draw (13) to (1.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (9) at (1.5, 0.5) {};
		\node [style=none] (10) at (1.5, 3) {};
		\node [style=none] (11) at (1.5, 0.25) {$X$};
		\node [style=none] (14) at (1.5, 3.25) {$X$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (10.center) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

We often omit the object labels when it is clear from context.  The tensor product of two maps

$$
\dfrac{f:W_1\otimes\cdots \otimes W_n\to X_1\otimes \cdots \otimes X_m, \hspace*{.5cm} g:Y_1\otimes\cdots \otimes Y_k\to Z_1\otimes \cdots \otimes Z_\ell}{f\otimes g:W_1\otimes\cdots \otimes W_n\otimes Y_1\otimes\cdots \otimes Y_k\to  X_1\otimes \cdots \otimes X_m\otimes Z_1\otimes \cdots \otimes Z_\ell}
$$

is drawn by pasting them side-by-side:


$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (79) at (20.25, 2.25) {};
		\node [style=none] (80) at (20.75, 2.25) {};
		\node [style=none] (81) at (21.75, 2.25) {};
		\node [style=none] (82) at (21.25, 2.25) {$\cdots$};
		\node [style=none] (83) at (20.25, 3.75) {};
		\node [style=none] (84) at (20.75, 3.75) {};
		\node [style=none] (85) at (21.75, 3.75) {};
		\node [style=none] (86) at (21.25, 3.75) {$\cdots$};
		\node [style=none] (87) at (22.25, 2.25) {};
		\node [style=none] (88) at (22.75, 2.25) {};
		\node [style=none] (89) at (23.75, 2.25) {};
		\node [style=none] (90) at (23.25, 2.25) {$\cdots$};
		\node [style=none] (91) at (22.25, 3.75) {};
		\node [style=none] (92) at (22.75, 3.75) {};
		\node [style=none] (93) at (23.75, 3.75) {};
		\node [style=none] (94) at (23.25, 3.75) {$\cdots$};
		\node [style=map] (95) at (22.1, 3) {\ $f\otimes g$\ \ };
		\node [style=none] (96) at (21.5, 3) {};
		\node [style=none] (97) at (21.75, 3) {};
		\node [style=none] (98) at (22, 3) {};
		\node [style=none] (99) at (22.25, 3) {};
		\node [style=none] (100) at (22.5, 3) {};
		\node [style=none] (101) at (22.75, 3) {};
		\node [style=none] (102) at (20.25, 2) {$W_1$};
		\node [style=none] (103) at (20.75, 2) {$W_2$};
		\node [style=none] (104) at (21.75, 2) {$W_m$};
		\node [style=none] (105) at (22.25, 2) {$Y_1$};
		\node [style=none] (106) at (22.75, 2) {$Y_2$};
		\node [style=none] (107) at (23.75, 2) {$Y_k$};
		\node [style=none] (108) at (20.25, 4) {$X_1$};
		\node [style=none] (109) at (20.75, 4) {$X_2$};
		\node [style=none] (110) at (21.75, 4) {$X_m$};
		\node [style=none] (111) at (22.25, 4) {$Z_1$};
		\node [style=none] (112) at (22.75, 4) {$Z_2$};
		\node [style=none] (113) at (23.75, 4) {$Z_\ell$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=90, looseness=0.50] (79.center) to (96.center);
		\draw [in=-90, out=90, looseness=0.50] (80.center) to (97.center);
		\draw [in=90, out=-90] (98.center) to (81.center);
		\draw (87.center) to (99.center);
		\draw [in=90, out=-90] (100.center) to (88.center);
		\draw [in=-90, out=90, looseness=0.75] (89.center) to (101.center);
		\draw [in=-90, out=90, looseness=0.75] (101.center) to (93.center);
		\draw [in=90, out=-90] (92.center) to (100.center);
		\draw (99.center) to (91.center);
		\draw [in=90, out=-90] (85.center) to (98.center);
		\draw [in=-90, out=90, looseness=0.50] (97.center) to (84.center);
		\draw [in=-90, out=90, looseness=0.50] (96.center) to (83.center);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (49) at (16.5, 3) {$f$};
		\node [style=none] (50) at (15.75, 2.25) {};
		\node [style=none] (51) at (16.25, 2.25) {};
		\node [style=none] (52) at (17.25, 2.25) {};
		\node [style=none] (53) at (16.75, 2.25) {$\cdots$};
		\node [style=none] (54) at (15.75, 3.75) {};
		\node [style=none] (55) at (16.25, 3.75) {};
		\node [style=none] (56) at (17.25, 3.75) {};
		\node [style=none] (57) at (16.75, 3.75) {$\cdots$};
		\node [style=map] (58) at (18.5, 3) {$g$};
		\node [style=none] (59) at (17.75, 2.25) {};
		\node [style=none] (60) at (18.25, 2.25) {};
		\node [style=none] (61) at (19.25, 2.25) {};
		\node [style=none] (62) at (18.75, 2.25) {$\cdots$};
		\node [style=none] (63) at (17.75, 3.75) {};
		\node [style=none] (64) at (18.25, 3.75) {};
		\node [style=none] (65) at (19.25, 3.75) {};
		\node [style=none] (66) at (18.75, 3.75) {$\cdots$};
		\node [style=none] (67) at (15.75, 4) {$X_1$};
		\node [style=none] (68) at (16.25, 4) {$X_2$};
		\node [style=none] (69) at (17.25, 4) {$X_m$};
		\node [style=none] (70) at (15.75, 2) {$W_1$};
		\node [style=none] (71) at (16.25, 2) {$W_2$};
		\node [style=none] (72) at (17.25, 2) {$W_m$};
		\node [style=none] (73) at (17.75, 2) {$Y_1$};
		\node [style=none] (74) at (18.25, 2) {$Y_2$};
		\node [style=none] (75) at (19.25, 2) {$Y_k$};
		\node [style=none] (76) at (17.75, 4) {$Z_1$};
		\node [style=none] (77) at (18.25, 4) {$Z_2$};
		\node [style=none] (78) at (19.25, 4) {$Z_\ell$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-135, looseness=0.75] (49) to (50.center);
		\draw [in=255, out=90] (51.center) to (49);
		\draw [in=90, out=-45, looseness=0.75] (49) to (52.center);
		\draw [in=105, out=-90] (55.center) to (49);
		\draw [in=-90, out=135, looseness=0.75] (49) to (54.center);
		\draw [in=-90, out=45, looseness=0.75] (49) to (56.center);
		\draw [in=90, out=-135, looseness=0.75] (58) to (59.center);
		\draw [in=255, out=90] (60.center) to (58);
		\draw [in=90, out=-45, looseness=0.75] (58) to (61.center);
		\draw [in=105, out=-90] (64.center) to (58);
		\draw [in=-90, out=135, looseness=0.75] (58) to (63.center);
		\draw [in=-90, out=45, looseness=0.75] (58) to (65.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

And the composite of two  composable maps

$$
\dfrac{
f:X_1\otimes \cdots \otimes X_n\to Y_1\otimes \cdots \otimes Y_m,\hspace*{.5cm}g:Y_1\otimes\cdots \otimes Y_m\to Z_1\otimes \cdots \otimes Z_k}
{f;g:X_1\otimes \cdots \otimes X_n\to Z_1\otimes \cdots \otimes Z_k}
$$ 

is drawn by connecting each of  the $Z_i$ wires together:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (34) at (13.25, 2) {$X_1$};
		\node [style=none] (35) at (13.75, 2) {$X_2$};
		\node [style=none] (36) at (14.75, 2) {$X_n$};
		\node [style=none] (37) at (13.25, 4) {$Z_1$};
		\node [style=none] (38) at (13.75, 4) {$Z_2$};
		\node [style=none] (39) at (14.75, 4) {$Z_k$};
		\node [style=map] (40) at (14, 3) {$f;g$};
		\node [style=none] (41) at (13.25, 2.25) {};
		\node [style=none] (42) at (13.75, 2.25) {};
		\node [style=none] (43) at (14.75, 2.25) {};
		\node [style=none] (44) at (14.25, 2.25) {$\cdots$};
		\node [style=none] (45) at (13.25, 3.75) {};
		\node [style=none] (46) at (13.75, 3.75) {};
		\node [style=none] (47) at (14.75, 3.75) {};
		\node [style=none] (48) at (14.25, 3.75) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-135, looseness=0.75] (40) to (41.center);
		\draw [in=255, out=90] (42.center) to (40);
		\draw [in=90, out=-45, looseness=0.75] (40) to (43.center);
		\draw [in=105, out=-90] (46.center) to (40);
		\draw [in=-90, out=135, looseness=0.75] (40) to (45.center);
		\draw [in=-90, out=45, looseness=0.75] (40) to (47.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (23) at (11.5, 1.75) {$f$};
		\node [style=none] (24) at (10.75, 1) {};
		\node [style=none] (25) at (11.25, 1) {};
		\node [style=none] (26) at (12.25, 1) {};
		\node [style=none] (27) at (11.75, 1) {$\cdots$};
		\node [style=map] (28) at (11.5, 2.75) {$g$};
		\node [style=none] (29) at (10.75, 3.5) {};
		\node [style=none] (30) at (11.25, 3.5) {};
		\node [style=none] (31) at (12.25, 3.5) {};
		\node [style=none] (32) at (11.75, 3.5) {$\cdots$};
		\node [style=none] (33) at (11.7, 2.25) {$\cdots$};
		\node [style=none] (34) at (10.75, 0.75) {$X_1$};
		\node [style=none] (35) at (11.25, 0.75) {$X_2$};
		\node [style=none] (36) at (12.25, 0.75) {$X_n$};
		\node [style=none] (37) at (10.75, 3.75) {$Z_1$};
		\node [style=none] (38) at (11.25, 3.75) {$Z_2$};
		\node [style=none] (39) at (12.25, 3.75) {$Z_k$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-135, looseness=0.75] (23) to (24.center);
		\draw [in=255, out=90] (25.center) to (23);
		\draw [in=90, out=-45, looseness=0.75] (23) to (26.center);
		\draw [in=105, out=-90] (30.center) to (28);
		\draw [in=-90, out=135, looseness=0.75] (28) to (29.center);
		\draw [in=-90, out=45, looseness=0.75] (28) to (31.center);
		\draw [in=105, out=-105] (28) to (23);
		\draw [in=225, out=135, looseness=1.25] (23) to (28);
		\draw [in=30, out=-30, looseness=1.50] (28) to (23);
	\end{pgfonlayer}
\end{tikzpicture}
$$

The axioms of a strict monoidal category are equivalent to planar isotopy of their string diagrams, for example, the functoriality of the tensor product allows one to exchange two disconnected maps:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (22) at (1, 5) {};
		\node [style=none] (23) at (0, 5) {};
		\node [style=none] (37) at (0, 3) {};
		\node [style=none] (38) at (1, 3) {};
		\node [style=map] (39) at (0, 3.75) {$f$};
		\node [style=map] (40) at (1, 4.25) {$g$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (37.center) to (39);
		\draw (39) to (23.center);
		\draw (38.center) to (40);
		\draw (40) to (22.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (41) at (3, 5) {};
		\node [style=none] (42) at (2, 5) {};
		\node [style=none] (43) at (2, 3) {};
		\node [style=none] (44) at (3, 3) {};
		\node [style=map] (45) at (2, 4.25) {$f$};
		\node [style=map] (46) at (3, 3.75) {$g$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (43.center) to (45);
		\draw (45) to (42.center);
		\draw (44.center) to (46);
		\draw (46) to (41.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

%FUNCTOR BOX 


We can always chose to work with strict monoidal categories if we want to:

\begin{theorem}
Every monoidal category is monoidally equivalent to a strict monoidal category. 
\end{theorem}


The strictification of a monoidal category has a particularly succinct presentation due to \cite{wilson}, so that we can use string diagrams for strict monoidal categories to reason about nonstrict monoidal categories:
\begin{definition}
\label{def:proofnets}
Given a monoidal category $(\X,\otimes,I,\alpha,u^L,u^R)$, there is a monoidally equivalent strict monoidal category $\bar \X$ with:

\begin{description}
\item[Objects:] Finite lists of objects in $\X$.

\item[Maps:] The maps are generated by a map $f:[X]\to [Y]$, for every map $f:X\to Y$ in $\X$. As well as the four following generators (referred to as tensor, cotensor, unit introduction and unit removal):


$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.5, 3.5) {};
		\node [style=none] (1) at (0.5, 3.5) {};
		\node [style=none] (2) at (1, 4.25) {};
		\node [style=none] (3) at (1, 5) {};
		\node [style=none] (4) at (0.5, 3.25) {$X$};
		\node [style=none] (5) at (1.5, 3.25) {$Y$};
		\node [style=none] (6) at (1, 5.25) {$X\otimes Y$};
		\node [style=otimes] (20) at (1, 4.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (3.center) to (2);
		\draw [in=90, out=-30] (2) to (0.center);
		\draw [in=90, out=-150] (2) to (1.center);
	\end{pgfonlayer}
\end{tikzpicture}
\,\hspace{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.5, 5) {};
		\node [style=none] (1) at (0.5, 5) {};
		\node [style=none] (2) at (1, 4.25) {};
		\node [style=none] (3) at (1, 3.5) {};
		\node [style=none] (4) at (0.5, 5.25) {$X$};
		\node [style=none] (5) at (1.5, 5.25) {$Y$};
		\node [style=none] (6) at (1, 3.25) {$X\otimes Y$};
		\node [style=otimes] (20) at (1, 4.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (3.center) to (2);
		\draw [in=-90, out=30] (2) to (0.center);
		\draw [in=-90, out=150] (2) to (1.center);
	\end{pgfonlayer}
\end{tikzpicture}
\,\hspace{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=unit] (2) at (1, 3.25) {};
		\node [style=none] (3) at (1, 4) {};
		\node [style=none] (6) at (1, 4.25) {$I$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (3.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
\,\hspace{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=unit] (2) at (1, 4.25) {};
		\node [style=none] (3) at (1, 3.5) {};
		\node [style=none] (6) at (1, 3.25) {$I$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (3.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
$$

\item[Modulo the equations:] \


For all $f:X\to Y$ and $g:Y\to Z$ in $\X$:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (1) at (0.5, 0.5) {};
		\node [style=none] (3) at (0.5, 3) {};
		\node [style=none] (4) at (0.5, 0.25) {$X$};
		\node [style=none] (6) at (0.5, 3.25) {$Z$};
		\node [style=map] (7) at (0.5, 1.25) {$f$};
		\node [style=map] (8) at (0.5, 2.25) {$g$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (3.center) to (8);
		\draw (8) to (7);
		\draw (7) to (1.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (9) at (1.5, 0.5) {};
		\node [style=none] (10) at (1.5, 3) {};
		\node [style=none] (11) at (1.5, 0.25) {$X$};
		\node [style=none] (12) at (1.5, 3.25) {$Z$};
		\node [style=map] (13) at (1.5, 1.75) {$f;g$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (13) to (9.center);
		\draw (13) to (10.center);
	\end{pgfonlayer}
\end{tikzpicture}\, 
\hspace*{1cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (1) at (0.5, 0.5) {};
		\node [style=none] (3) at (0.5, 3) {};
		\node [style=none] (4) at (0.5, 0.25) {$X$};
		\node [style=none] (6) at (0.5, 3.25) {$X$};
		\node [style=map] (13) at (0.5, 1.75) {$1_X$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (3.center) to (13);
		\draw (13) to (1.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (9) at (1.5, 0.5) {};
		\node [style=none] (10) at (1.5, 3) {};
		\node [style=none] (11) at (1.5, 0.25) {$X$};
		\node [style=none] (14) at (1.5, 3.25) {$X$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (10.center) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
For all $f:W\to X$ and $g:Y\to Z$ in $\X$:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=otimes] (0) at (4, 5.25) {};
		\node [style=none] (1) at (4, 6) {};
		\node [style=otimes] (2) at (4, 3.75) {};
		\node [style=none] (3) at (4, 3) {};
		\node [style=none] (4) at (4, 5.25) {};
		\node [style=none] (5) at (4, 3.75) {};
		\node [style=map] (6) at (3.5, 4.5) {$ f$};
		\node [style=map] (7) at (4.5, 4.5) {$ g$};
		\node [style=none] (8) at (4, 6.25) {$Y\otimes Z$};
		\node [style=none] (9) at (4, 2.75) {$X\otimes Y$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (0);
		\draw (3.center) to (2);
		\draw [in=90, out=-150] (4.center) to (6);
		\draw [in=150, out=-90] (6) to (5.center);
		\draw [in=-90, out=30] (5.center) to (7);
		\draw [in=-30, out=90] (7) to (4.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (1) at (4, 6) {};
		\node [style=none] (3) at (4, 3) {};
		\node [style=map] (6) at (4, 4.5) {$ {f\otimes g}$};
		\node [style=none] (8) at (4, 6.25) {$Y\otimes Z$};
		\node [style=none] (9) at (4, 2.75) {$X\otimes Y$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (6);
		\draw (6) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.5, 3.5) {};
		\node [style=none] (1) at (0.5, 3.5) {};
		\node [style=none] (2) at (1, 4.25) {};
		\node [style=none] (3) at (1, 5) {};
		\node [style=none] (4) at (1.5, 5.75) {};
		\node [style=none] (5) at (0.5, 5.75) {};
		\node [style=none] (6) at (1, 5) {};
		\node [style=otimes] (7) at (1, 4.25) {};
		\node [style=otimes] (8) at (1, 5) {};
		\node [style=none] (9) at (0.5, 3.25) {$X$};
		\node [style=none] (10) at (1.5, 3.25) {$Y$};
		\node [style=none] (11) at (0.5, 6) {$X$};
		\node [style=none] (12) at (1.5, 6) {$Y$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (3.center) to (2.center);
		\draw [in=90, out=-30] (2.center) to (0.center);
		\draw [in=90, out=-150] (2.center) to (1.center);
		\draw [in=-90, out=30] (6.center) to (4.center);
		\draw [in=-90, out=150] (6.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.5, 0.5) {};
		\node [style=none] (1) at (0.5, 0.5) {};
		\node [style=none] (2) at (1.5, 2.75) {};
		\node [style=none] (3) at (0.5, 2.75) {};
		\node [style=none] (4) at (0.5, 0.25) {$X$};
		\node [style=none] (5) at (1.5, 0.25) {$Y$};
		\node [style=none] (6) at (0.5, 3) {$X$};
		\node [style=none] (7) at (1.5, 3) {$Y$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (0.center) to (2.center);
		\draw (1.center) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=unit] (0) at (4, 5.25) {};
		\node [style=none] (1) at (4, 6) {};
		\node [style=unit] (2) at (4, 4.25) {};
		\node [style=none] (3) at (4, 3.5) {};
		\node [style=none] (4) at (4, 5.25) {};
		\node [style=none] (5) at (4, 4.25) {};
		\node [style=none] (6) at (4, 6.25) {$I$};
		\node [style=none] (7) at (4, 3.25) {$I$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (0);
		\draw (3.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (8) at (4, 2.75) {};
		\node [style=none] (9) at (4, 0.25) {};
		\node [style=none] (10) at (4, 3) {$I$};
		\node [style=none] (11) at (4, 0) {$I$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (9.center) to (8.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=unit] (2) at (1, 4.25) {};
		\node [style=none] (3) at (1, 5) {};
		\node [style=unit] (9) at (1, 5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (3.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (2, 0) {};
		\node [style=none] (1) at (2, -1) {};
		\node [style=none] (2) at (3, -1) {};
		\node [style=none] (3) at (3, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw[style=dashed] (3.center) to (0.center) to (1.center) to (2.center) to cycle;
	\end{pgfonlayer}
\end{tikzpicture}
$$
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (3) at (8, 3.5) {};
		\node [style=none] (4) at (8, 3.25) {$(X\otimes Y)\otimes Z$};
		\node [style=none] (9) at (8, 7.5) {$X\otimes (Y\otimes Z)$};
		\node [style=none] (14) at (8, 7.25) {};
		\node [style=map] (15) at (8, 5.25) {$\alpha_{X,Y,Z}$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (15) to (14.center);
		\draw (15) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (11) at (8.5, 5) {};
		\node [style=none] (12) at (7.5, 5) {};
		\node [style=none] (13) at (8, 4.25) {};
		\node [style=none] (14) at (8, 3.5) {};
		\node [style=none] (17) at (8, 3.25) {$(X\otimes Y)\otimes Z$};
		\node [style=otimes] (18) at (8, 4.25) {};
		\node [style=none] (19) at (8, 5.75) {};
		\node [style=none] (20) at (7, 5.75) {};
		\node [style=none] (21) at (7.5, 5) {};
		\node [style=none] (23) at (7.5, 7.5) {$X\otimes (Y\otimes Z)$};
		\node [style=otimes] (24) at (7.5, 5) {};
		\node [style=none] (25) at (7, 5.75) {};
		\node [style=none] (26) at (8, 5.75) {};
		\node [style=none] (27) at (7.5, 6.5) {};
		\node [style=none] (28) at (7.5, 7.25) {};
		\node [style=otimes] (29) at (7.5, 6.5) {};
		\node [style=none] (30) at (7.5, 5) {};
		\node [style=none] (31) at (8.5, 5) {};
		\node [style=none] (32) at (8, 5.75) {};
		\node [style=otimes] (33) at (8, 5.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (14.center) to (13.center);
		\draw [in=-90, out=30] (13.center) to (11.center);
		\draw [in=-90, out=150] (13.center) to (12.center);
		\draw [in=-90, out=150] (21.center) to (20.center);
		\draw (28.center) to (27.center);
		\draw [in=90, out=-150] (27.center) to (25.center);
		\draw [in=90, out=-30] (27.center) to (26.center);
		\draw (32.center) to (30.center);
		\draw [in=90, out=-30] (32.center) to (31.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (17) at (11.75, 2) {};
		\node [style=none] (19) at (11.75, 0.5) {};
		\node [style=none] (20) at (11.75, 2.25) {$X$};
		\node [style=none] (21) at (11.75, 0.25) {$I\otimes X$};
		\node [style=map] (22) at (11.75, 1.25) {$u_X^L$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (17.center) to (22);
		\draw (19.center) to (22);
	\end{pgfonlayer}
\end{tikzpicture}
=
 \begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (79) at (11.25, 2) {};
		\node [style=none] (80) at (12.25, 2) {};
		\node [style=none] (81) at (11.75, 1.25) {};
		\node [style=none] (82) at (11.75, 0.5) {};
		\node [style=none] (83) at (12.25, 2.25) {$X$};
		\node [style=none] (84) at (11.75, 0.25) {$I\otimes X$};
		\node [style=otimes] (85) at (11.75, 1.25) {};
		\node [style=unit] (86) at (11.25, 2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (82.center) to (81.center);
		\draw [in=-90, out=150] (81.center) to (79.center);
		\draw [in=-90, out=30] (81.center) to (80.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (17) at (11.75, 2) {};
		\node [style=none] (19) at (11.75, 0.5) {};
		\node [style=none] (20) at (11.75, 2.25) {$X$};
		\node [style=none] (21) at (11.75, 0.25) {$ X\otimes I$};
		\node [style=map] (22) at (11.75, 1.25) {$u_X^R$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (17.center) to (22);
		\draw (19.center) to (22);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (71) at (12.25, -0.75) {};
		\node [style=none] (72) at (11.25, -0.75) {};
		\node [style=none] (73) at (11.75, -1.5) {};
		\node [style=none] (74) at (11.75, -2.25) {};
		\node [style=none] (75) at (11.25, -0.5) {$X$};
		\node [style=none] (76) at (11.75, -2.5) {$X\otimes I$};
		\node [style=otimes] (77) at (11.75, -1.5) {};
		\node [style=unit] (78) at (12.25, -0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (74.center) to (73.center);
		\draw [in=-90, out=30] (73.center) to (71.center);
		\draw [in=-90, out=150] (73.center) to (72.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
\item[Composition:] Vertical pasting.
\item[Tensor product:] Horizontal pasting.
\item[Tensor unit:] The empty list $[]$.

\end{description}
\end{definition}


Notice that by flipping around the diagrams for the unitors and associators we get their inverses: 
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (3) at (8, 3.5) {};
		\node [style=none] (4) at (8, 3.25) {$X\otimes (Y\otimes Z)$};
		\node [style=none] (9) at (8, 7.5)  {$(X\otimes Y)\otimes Z$};
		\node [style=none] (14) at (8, 7.25) {};
		\node [style=map] (15) at (8, 5.25) {$\alpha_{X,Y,Z}^{-1}$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (15) to (14.center);
		\draw (15) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (34) at (12.75, 5.75) {};
		\node [style=none] (35) at (11.75, 5.75) {};
		\node [style=none] (36) at (12.25, 6.5) {};
		\node [style=none] (37) at (12.25, 7.25) {};
		\node [style=none] (38) at (12.25, 7.5) {$(X\otimes Y)\otimes Z$};
		\node [style=otimes] (39) at (12.25, 6.5) {};
		\node [style=none] (40) at (12.25, 5) {};
		\node [style=none] (41) at (11.25, 5) {};
		\node [style=none] (42) at (11.75, 5.75) {};
		\node [style=none] (43) at (11.75, 3.25) {$X\otimes (Y\otimes Z)$};
		\node [style=otimes] (44) at (11.75, 5.75) {};
		\node [style=none] (45) at (11.25, 5) {};
		\node [style=none] (46) at (12.25, 5) {};
		\node [style=none] (47) at (11.75, 4.25) {};
		\node [style=none] (48) at (11.75, 3.5) {};
		\node [style=otimes] (49) at (11.75, 4.25) {};
		\node [style=none] (50) at (11.75, 5.75) {};
		\node [style=none] (51) at (12.75, 5.75) {};
		\node [style=none] (52) at (12.25, 5) {};
		\node [style=otimes] (53) at (12.25, 5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (37.center) to (36.center);
		\draw [in=90, out=-30] (36.center) to (34.center);
		\draw [in=90, out=-150] (36.center) to (35.center);
		\draw [in=90, out=-150] (42.center) to (41.center);
		\draw (48.center) to (47.center);
		\draw [in=-90, out=150] (47.center) to (45.center);
		\draw [in=-90, out=30] (47.center) to (46.center);
		\draw (52.center) to (50.center);
		\draw [in=-90, out=30] (52.center) to (51.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (17) at (11.75, 2) {};
		\node [style=none] (19) at (11.75, 0.5) {};
		\node [style=none] (20) at (11.75, 2.25) {$I\otimes X$};
		\node [style=none] (21) at (11.75, 0.25) {$X$};
		\node [style=map] (22) at (11.75, 1.25) {$(u_X^L)^{-1}$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (17.center) to (22);
		\draw (19.center) to (22);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (63) at (7.5, -2.5) {};
		\node [style=none] (64) at (8.5, -2.5) {};
		\node [style=none] (65) at (8, -1.75) {};
		\node [style=none] (66) at (8, -1) {};
		\node [style=none] (67) at (8.5, -2.75) {$X$};
		\node [style=none] (68) at (8, -0.75) {$I\otimes X$};
		\node [style=otimes] (69) at (8, -1.75) {};
		\node [style=unit] (70) at (7.5, -2.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (66.center) to (65.center);
		\draw [in=90, out=-150] (65.center) to (63.center);
		\draw [in=90, out=-30] (65.center) to (64.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (17) at (11.75, 2) {};
		\node [style=none] (19) at (11.75, 0.5) {};
		\node [style=none] (20) at (11.75, 2.25) {$ X\otimes I$};
		\node [style=none] (21) at (11.75, 0.25) {$X$};
		\node [style=map] (22) at (11.75, 1.25) {$(u_X^R)^{-1}$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (17.center) to (22);
		\draw (19.center) to (22);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (54) at (8.5, 0.25) {};
		\node [style=none] (55) at (7.5, 0.25) {};
		\node [style=none] (56) at (8, 1) {};
		\node [style=none] (57) at (8, 1.75) {};
		\node [style=none] (58) at (7.5, 0) {$X$};
		\node [style=none] (60) at (8, 2) {$X\otimes I$};
		\node [style=otimes] (61) at (8, 1) {};
		\node [style=unit] (62) at (8.5, 0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (57.center) to (56.center);
		\draw [in=90, out=-30] (56.center) to (54.center);
		\draw [in=90, out=-150] (56.center) to (55.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$




I will refer to the string diagrams in this category as proof nets for monoidal categories because of their close relation to proof nets for linearly distributive categories.  Even in the case when we are already working in a strict monoidal category, it will still often be useful to use proof nets; for example, we can bundle up wires together so that we can make induction arguments using pictures.  Indeed, proof nets have been rediscovered in the setting of quantum circuits as the scalable ZX-calculus for precisely this reason \cite{szx} (although they have not discovered the units and counits).  We will discuss this further in Section \ref{sec:cqm}.


These proof nets are closely related to proof nets for linearly-distributive categories; so much so, that this monoidal counterpart was considered folklore by some.  I will discuss the relation to proof nets in linear logic in Chapter \ref{chap:grothendieck}, as well as an attempt to connect them to other categorical constructions.  This proved to be much more difficult than expected.



Some monoidal categories are equivalent to {\bf skeletal}, strict monoidal categories, so that every two isomorphic objects are equal.  These are very nice to work with because if we want, we can forgo having to use proof net notation entirely:
\begin{example}
$\FinOrd$ is a skeletal category and strict monoidal. It is monoidally equivalent to $\FSets$ under the product and coproduct.


Given a commutative semiring $R$, $\Mat_R$ is a skeletal category and is strict monoidal. Moreover for a field $k$, $\Mat_k$ is monoidally equivalent to $\FVect_k$ under the bilinear tensor product and the direct sum.

In particular, because $\FVect_\C$ and $\FHilb$ are monoidally equivalent under both the bilinear tensor product and the direct sum, then $\FHilb$ is monoidally equivalent to the skeletal strict monoidal category $\Mat_C$ under both tensor products.
\end{example}
Note that the strictification of a monoidal category need not be skeletal, for example there is no skeletal category for which $\Set$ is monoidally equivalent to.  Indeed, the strictification which we described when applied to $\FSets$ is not $\FinOrd$ on the nose.


There is a more refined notion of monoidal category where one can pass wires through each other:

\begin{definition}
A {\bf symmetric monoidal category} is a monoidal category equipped with an extra natural isomorphism called the braid:

$$
c_{X,Y}:X\otimes Y \to Y\otimes X
$$

satisfying the following coherence equations:

\begin{description}
\item[Interaction with unitors:]
$$
\xymatrix{
I \otimes X \ar[rr]^{c_{I,X}} \ar[rd]_{u^L_X} && X \otimes I \ar[ld]^{u^R_X} \\
& X &
}
$$

\item[Interaction with associator:]
$$
\xymatrix{
  (X\otimes Y)\otimes Z \ar[rr]^{c_{X,Y}\otimes 1_Z} \ar[d]_{\alpha_{X,Y,Z}}
    &
    &  (Y\otimes X)\otimes Z \ar[d]^{\alpha_{Y,X,Z}}
  \\X\otimes(Y\otimes Z) \ar[d]_{c_{X,Y\otimes Z}}
    &
    &  Y\otimes(X\otimes Z) \ar[d]^{1_Y\otimes c_{X,Z}}
  \\ (Y\otimes Z)\otimes X \ar[rr]_{\alpha_{Y,Z,X}}
    &
    & Y\otimes (Z\otimes X)
}
$$

\item[Braid is self-inverse:]
$$
\xymatrix{
   X\otimes Y \ar[r]^{c_{X,Y}} \ar@{=}[dr]
   &  Y\otimes X \ar[d]^{c_{Y,X}}\\
   & X \otimes Y
}
$$
\end{description}

\end{definition}


\begin{example}
$\Sets$, $\FSets$, $\FinOrd$ $\Mat_R$, $\Vect_k$, $\Hilb$, $\FHilb$ are all symmetric monoidal categories with respect to the aforementioned monoidal structures; and the corresponding equivalences between these categories are also symmetric monoidal.
\end{example}

\begin{definition}
A (strong) {\bf symmetric monoidal functor} between symmetric monoidal categories $\X$ and $\Y$ is a monoidal functor where the following coherence equation holds:

$$
\xymatrix{
  F(X)\otimes^\Y F(Y) \ar[rr]^{c_{F(X),F(Y)}^\Y} \ar[d]_{\mu_{X,Y}}
   && F(Y) \otimes^\Y F(X) \ar[d]^{\mu_{Y,X}}
\\F(X\otimes^\X Y) \ar[rr]_{F(c_{X,Y}^\X)}
 && F(Y \otimes^\X X)
}
$$




A {\bf symmetric monoidal transformation} is a monoidal natural transformation between symmetric monoidal functors.  




A {\bf strict symmetric monoidal category} is a symmetric monoidal category, whose underlying monoidal category is strict. That is to say, all the coherence isomorphisms, except for the braid are identities.
A {\bf strict symmetric monoidal functor} is a symmetric monoidal functor which is simultaneously a strict monoidal functor.


Just as in the monoidal case, there are bicategories of strict monoidal and monoidal categories.
\end{definition}



Strict monoidal categories also have a notion of string diagrams, except the braid allows wires to pass over each other:

$$
c_{X,Y}=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (22) at (1, 5) {};
		\node [style=none] (23) at (0, 5) {};
		\node [style=none] (24) at (0, 4) {};
		\node [style=none] (25) at (1, 4) {};
		\node [style=none] (26) at (0, 3.75) {$X$};
		\node [style=none] (27) at (1, 3.75) {$Y$};
		\node [style=none] (28) at (0, 5.25) {$Y$};
		\node [style=none] (29) at (1, 5.25) {$X$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=270, out=90] (24.center) to (22.center);
		\draw [in=270, out=90] (25.center) to (23.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

The naturality means that maps can be pulled through wires:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (22) at (1, 5) {};
		\node [style=none] (23) at (0, 5) {};
		\node [style=none] (24) at (0, 4) {};
		\node [style=none] (25) at (1, 4) {};
		\node [style=map] (26) at (1, 4) {$g$};
		\node [style=map] (27) at (0, 4) {$f$};
		\node [style=none] (28) at (1, 5.75) {};
		\node [style=none] (29) at (0, 5.75) {};
		\node [style=none] (30) at (1, 3.25) {};
		\node [style=none] (31) at (0, 3.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=270, out=90] (24.center) to (22.center);
		\draw [in=270, out=90] (25.center) to (23.center);
		\draw (23.center) to (29.center);
		\draw (22.center) to (28.center);
		\draw (30.center) to (25.center);
		\draw (31.center) to (24.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (32) at (3, 5) {};
		\node [style=none] (33) at (2, 5) {};
		\node [style=none] (34) at (2, 4) {};
		\node [style=none] (35) at (3, 4) {};
		\node [style=map] (36) at (2, 5) {$g$};
		\node [style=map] (37) at (3, 5) {$f$};
		\node [style=none] (38) at (3, 5.75) {};
		\node [style=none] (39) at (2, 5.75) {};
		\node [style=none] (40) at (3, 3.25) {};
		\node [style=none] (41) at (2, 3.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=270, out=90] (34.center) to (32.center);
		\draw [in=270, out=90] (35.center) to (33.center);
		\draw (33.center) to (39.center);
		\draw (32.center) to (38.center);
		\draw (40.center) to (35.center);
		\draw (41.center) to (34.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

The interaction with the unitor and associator becomes completely absorbed into the graphical calculus.
%The interaction with the associator also becomes trivial:
%
%$$
%\begin{tikzpicture}
%	\begin{pgfonlayer}{nodelayer}
%		\node [style=none] (22) at (1, 5) {};
%		\node [style=none] (23) at (0, 5) {};
%		\node [style=none] (33) at (2, 5) {};
%		\node [style=none] (34) at (2, 4) {};
%		\node [style=none] (35) at (0, 4) {};
%		\node [style=none] (36) at (1, 4) {};
%		\node [style=none] (37) at (0, 3) {};
%		\node [style=none] (38) at (1, 3) {};
%		\node [style=none] (39) at (2, 3) {};
%	\end{pgfonlayer}
%	\begin{pgfonlayer}{edgelayer}
%		\draw [in=270, out=90] (34.center) to (22.center);
%		\draw (23.center) to (35.center);
%		\draw [in=270, out=90] (36.center) to (33.center);
%		\draw (39.center) to (34.center);
%		\draw [in=270, out=90] (37.center) to (36.center);
%		\draw [in=270, out=90] (38.center) to (35.center);
%	\end{pgfonlayer}
%\end{tikzpicture}
%=
%\begin{tikzpicture}
%	\begin{pgfonlayer}{nodelayer}
%		\node [style=none] (40) at (4, 5) {};
%		\node [style=none] (41) at (3, 5) {};
%		\node [style=none] (42) at (5, 5) {};
%		\node [style=none] (46) at (3, 3) {};
%		\node [style=none] (47) at (4, 3) {};
%		\node [style=none] (48) at (5, 3) {};
%	\end{pgfonlayer}
%	\begin{pgfonlayer}{edgelayer}
%		\draw [in=-90, out=90] (48.center) to (40.center);
%		\draw [in=-90, out=90] (47.center) to (41.center);
%		\draw [in=-90, out=90] (46.center) to (42.center);
%	\end{pgfonlayer}
%\end{tikzpicture}
%$$
The self inverse of the braid means that the wires untangle:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (22) at (1, 5) {};
		\node [style=none] (23) at (0, 5) {};
		\node [style=none] (24) at (0, 4) {};
		\node [style=none] (25) at (1, 4) {};
		\node [style=none] (30) at (1, 3) {};
		\node [style=none] (31) at (0, 3) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=270, out=90] (24.center) to (22.center);
		\draw [in=270, out=90] (25.center) to (23.center);
		\draw [in=270, out=90] (31.center) to (25.center);
		\draw [in=270, out=90] (30.center) to (24.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (32) at (3, 5) {};
		\node [style=none] (33) at (2, 5) {};
		\node [style=none] (36) at (3, 3) {};
		\node [style=none] (37) at (2, 3) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (37.center) to (33.center);
		\draw (36.center) to (32.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$


\begin{theorem}
Every symmetric monoidal category is symmetric monoidally equivalent to a strict symmetric monoidal category. 
\end{theorem}

Non-strict symmetric monoidal categories have essentially the same notion of proof nets as non-strict monoidal categories, except where the braid is internalized to untensoring, braiding and then tensoring:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (1) at (20.75, 4.75) {};
		\node [style=none] (4) at (20.75, 5) {$Y\otimes X$};
		\node [style=none] (8) at (20.75, 1.25) {};
		\node [style=none] (13) at (20.75, 1) {$X\otimes Y$};
		\node [style=map] (14) at (20.75, 3) {$c_{X,Y}$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (14) to (1.center);
		\draw (14) to (8.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (25) at (20.75, 4) {};
		\node [style=none] (26) at (20.75, 4.75) {};
		\node [style=none] (27) at (20.75, 4) {};
		\node [style=otimes] (28) at (20.75, 4) {};
		\node [style=none] (29) at (20.75, 5) {$Y\otimes X$};
		\node [style=none] (30) at (20.25, 3.5) {};
		\node [style=none] (31) at (21.25, 3.5) {};
		\node [style=none] (32) at (20.75, 2) {};
		\node [style=none] (33) at (20.75, 1.25) {};
		\node [style=none] (34) at (20.75, 2) {};
		\node [style=otimes] (35) at (20.75, 2) {};
		\node [style=none] (36) at (21.25, 2.5) {};
		\node [style=none] (37) at (20.25, 2.5) {};
		\node [style=none] (38) at (20.75, 1) {$X\otimes Y$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (26.center) to (25.center);
		\draw [in=90, out=-165] (27.center) to (30.center);
		\draw [in=-15, out=90] (31.center) to (27.center);
		\draw (33.center) to (32.center);
		\draw [in=-90, out=15] (34.center) to (36.center);
		\draw [in=165, out=-90] (37.center) to (34.center);
		\draw [in=270, out=90] (36.center) to (30.center);
		\draw [in=270, out=90] (37.center) to (31.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

This notion of proof nets for symmetric monoidal categories is not contained in \cite{wilson}; however, it is folklore, in analogy to the case for symmetric linearly distributive categories \cite{ldc}.


\begin{example}
The category $\Mat_k$ is strict symmetric monoidal  symmetric monoidally equivalent to $\FVect_k$ under both aforementioned tensor products.  The same with $\FinOrd$ and $\FSets$.
\end{example}


\begin{definition}
A {\bf compact closed category} is a symmetric monoidal category such that for every object $X$, there is a chosen object $X^*$, called the {\bf dual} of $X$.
. Equipped with maps, for all objects $X$, called the unit and counit:

$$
\eta_X:I\to X^* \otimes X\hspace*{.5cm}\text{and}\hspace*{.5cm} \epsilon_X:X\otimes X^*\to I 
$$



Satisfying the following coherence equations:

\begin{description}
\item[Zig-zag equations:]
$$
\xymatrix{
  (X\otimes X^*)\otimes X \ar[rr]^{\alpha_{X,X^*,X}}  \ar[d]_{\epsilon_X\otimes 1_X}
    & 
    & X\otimes(X^*\otimes X)
  \\I\otimes X \ar[rr]_{c_{I,X}}
    &
    & X\otimes I \ar[u]_{a_X\otimes \eta_X}
}
$$

$$
\xymatrix{
  X^*\otimes ( X\otimes X^*) \ar[rr]^{\alpha_{X^*,X,X^*}}  \ar[d]_{1_{X^*}\otimes \epsilon_X}
    & 
    & (X^* \otimes X)\otimes X^*
  \\X^*\otimes I \ar[rr]_{c_{X^*,I}}
    &
    & I\otimes X^* \ar[u]_{\eta_X\otimes 1_X{X^*}}
}
$$


\item[Compatibility with the tensor product:]\

\hspace*{-1.1cm}
\scalebox{.97}{$
\xymatrix{
I  \ar[rr]^{(u_I^L)^{-1}} \ar[rrrdddddd]!<-2ex,-2ex>_{\eta_{X\otimes Y}}
 &
 & I\otimes I \ar[r]^{\hspace*{-1.3cm}\eta_X\otimes \eta_Y}
 & (X\otimes X^*)\otimes(Y\otimes Y^*)  \ar[d]^{\alpha_{X,X*,Y\otimes Y*}} 
\\
 &
 &
 &  X\otimes (X^*\otimes(Y\otimes Y^*)) \ar[d]^{X\otimes \alpha_{X^*,Y,Y^*}^{-1}}
\\
I&
&
& X\otimes ((X^*\otimes Y)\otimes Y^*) \ar[d]^{1_X\otimes (c_{X^*,Y}\otimes 1_Y^*)}
\\
 I\otimes I \ar[u]^{u^R_I}&
&
& X\otimes ((Y\otimes X^*)\otimes Y^*) \ar[d]^{1_X\otimes \alpha_{Y,X^*,Y^*}} 
& 
\\
(X^*\otimes X) \otimes (Y^*\otimes Y)  \ar[u]^{\epsilon_X\otimes \epsilon_Y} &
&
&X\otimes (Y\otimes (X^*\otimes Y^*)) \ar[d]^{\alpha_{X,Y,X^*\otimes Y^*}^{-1}}
\\
X^*\otimes( X\otimes (Y^*\otimes Y))  \ar[u]^{\alpha_{X^*,X,X^*\otimes 1_Y}^{-1}} &
&
& (X\otimes Y)\otimes (X^*\otimes Y^*) \ar[d]^{1_{X\otimes Y} \otimes c_{X^*,Y^*}}
\\
X^*\otimes( (X\otimes Y^*)\otimes Y)   \ar[u]^{1_{X^*}\otimes \alpha_{X,Y^*,Y}} &
&
&  (X\otimes Y)\otimes (Y^*\otimes X^*)
\\
X^*\otimes( (Y^*\otimes X)\otimes Y) \ar[u]^{1_{X^*}\otimes (c_{Y^*,X}\otimes Y)} &
&
 &\\
X^*\otimes( Y^*\otimes (X\otimes Y))   \ar[u]^{1_{X^*} \otimes \alpha^{-1}_{Y^*,X,Y}} &
&  (X^*\otimes Y^*)\otimes (X\otimes Y)  \ar[ll]^{\ \ \ \ \ \alpha^{-1}_{X^*,Y^*,X\otimes Y}}
&  (Y^*\otimes X^*)\otimes (X\otimes Y) \ar[llluuuuuu]!<0.5ex,0.5ex>_{\epsilon_{X\otimes Y}} \ar[l]^{c_{Y^*, X^*}\otimes 1_{X\otimes Y}}
}
$}



\end{description}

A strict compact closed category is a compact closed category where the underlying symmetric monoidal category is strict.

Strict symmetric monoidal functors and strong symmetric monoidal functors are the appropriate notion of map between strict/non-strict compact closed categories, as they preserve the duals strictly/strongly.
\end{definition}


The proceeding result follows immediately from the coherence theorem for symmetric monoidal categories because compact closed structure is preserved by symmetric monoidal functors:

\begin{theorem}
Every compact closed category is  symmetric monoidally equivalent to a strict compact closed category. 
\end{theorem}



Compact closed categories axiomatize the kinds of processes where inputs can be turned into outputs, and vice-versa.  In other words, they axiomatize a particular notion of feedback.  This is illuminated by looking at the proof nets.
%In proof net notation the unit and counit are drawn as follows:
We will draw the unit and counit for the compact closed structure as follows in the strict case:
%
%
%$$
%\begin{tikzpicture}
%	\begin{pgfonlayer}{nodelayer}
%		\node [style=none] (2) at (18, 4.25) {};
%		\node [style=none] (4) at (18, 4.5) {$X^*\otimes X$};
%		\node [style=map] (5) at (18, 2.5) {$\eta_X$};
%		\node [style=none] (6) at (18, 1) {$I$};
%		\node [style=none] (7) at (18, 1.25) {};
%	\end{pgfonlayer}
%	\begin{pgfonlayer}{edgelayer}
%		\draw (7.center) to (5);
%		\draw (2.center) to (5);
%	\end{pgfonlayer}
%\end{tikzpicture}
%=
%\begin{tikzpicture}
%	\begin{pgfonlayer}{nodelayer}
%		\node [style=none] (8) at (20.75, 2.75) {};
%		\node [style=none] (9) at (20.75, 3.75) {};
%		\node [style=none] (10) at (20.75, 4.25) {};
%		\node [style=otimes] (11) at (20.75, 3.75) {};
%		\node [style=none] (12) at (20.75, 4.5) {$X^*\otimes X$};
%		\node [style=unit] (13) at (20.75, 2) {};
%		\node [style=none] (14) at (20.75, 1) {};
%		\node [style=none] (15) at (20.75, 1.25) {};
%	\end{pgfonlayer}
%	\begin{pgfonlayer}{edgelayer}
%		\draw [in=180, out=-150, looseness=1.50] (9.center) to (8.center);
%		\draw [in=-30, out=0, looseness=1.50] (8.center) to (9.center);
%		\draw (10.center) to (9.center);
%		\draw (15.center) to (13);
%	\end{pgfonlayer}
%\end{tikzpicture}
%\hspace*{.5cm}
%\text{and}
%\hspace*{.5cm}
%\begin{tikzpicture}
%	\begin{pgfonlayer}{nodelayer}
%		\node [style=none] (24) at (23, 1.25) {};
%		\node [style=none] (25) at (23, 1) {$X \otimes X^*$};
%		\node [style=map] (26) at (23, 3) {$\epsilon_X$};
%		\node [style=none] (27) at (23, 4.5) {$I$};
%		\node [style=none] (28) at (23, 4.25) {};
%	\end{pgfonlayer}
%	\begin{pgfonlayer}{edgelayer}
%		\draw (28.center) to (26);
%		\draw (24.center) to (26);
%	\end{pgfonlayer}
%\end{tikzpicture}
%=
%\begin{tikzpicture}
%	\begin{pgfonlayer}{nodelayer}
%		\node [style=none] (16) at (25.5, 2.75) {};
%		\node [style=none] (17) at (25.5, 1.75) {};
%		\node [style=none] (18) at (25.5, 1.25) {};
%		\node [style=otimes] (19) at (25.5, 1.75) {};
%		\node [style=none] (20) at (25.5, 1) {$X\otimes X^*$};
%		\node [style=unit] (21) at (25.5, 3.5) {$$};
%		\node [style=none] (22) at (25.5, 4.5) {$I$};
%		\node [style=none] (23) at (25.5, 4.25) {};
%	\end{pgfonlayer}
%	\begin{pgfonlayer}{edgelayer}
%		\draw [in=-180, out=150, looseness=1.50] (17.center) to (16.center);
%		\draw [in=30, out=0, looseness=1.50] (16.center) to (17.center);
%		\draw (18.center) to (17.center);
%		\draw (23.center) to (21);
%	\end{pgfonlayer}
%\end{tikzpicture}
%$$
%


$$
\eta_X=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (1) at (0.5, -0.25) {};
		\node [style=none] (4) at (1.5, -0.25) {};
		\node [style=none] (5) at (0.5, 0) {$X^*$};
		\node [style=none] (6) at (1.5, 0) {$X$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=270, out=-90, looseness=1.75] (1.center) to (4.center);
	\end{pgfonlayer}
\end{tikzpicture}
\hspace*{.5cm}\text{and}\hspace*{.5cm}
\epsilon_X=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (7) at (3.25, 0.5) {};
		\node [style=none] (8) at (2.25, 0.5) {};
		\node [style=none] (9) at (3.25, 0.25) {$X^*$};
		\node [style=none] (10) at (2.25, 0.25) {$X$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=90, looseness=1.75] (7.center) to (8.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$



The zig-zag equations are drawn as follows;

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (1) at (1.25, 0.5) {};
		\node [style=none] (4) at (2.25, 0.5) {};
		\node [style=none] (7) at (3.25, 0.5) {};
		\node [style=none] (8) at (3.25, -0.5) {};
		\node [style=none] (9) at (1.25, 1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=270, out=-90, looseness=1.75] (1.center) to (4.center);
		\draw [in=90, out=90, looseness=1.75] (4.center) to (7.center);
		\draw (8.center) to (7.center);
		\draw (1.center) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (13) at (6.25, -0.5) {};
		\node [style=none] (14) at (4.25, 1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-90] (14.center) to (13.center);
	\end{pgfonlayer}
\end{tikzpicture}
\hspace*{1cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (15) at (7.25, 0.5) {};
		\node [style=none] (16) at (8.25, 0.5) {};
		\node [style=none] (17) at (9.25, 0.5) {};
		\node [style=none] (18) at (9.25, 1.5) {};
		\node [style=none] (19) at (7.25, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=90, looseness=1.75] (15.center) to (16.center);
		\draw [in=-90, out=-90, looseness=1.75] (16.center) to (17.center);
		\draw (18.center) to (17.center);
		\draw (15.center) to (19.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (20) at (12.25, 1.5) {};
		\node [style=none] (21) at (10.25, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=90] (21.center) to (20.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$


And the second two equations correspond to the requirement that:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=otimes] (0) at (25.5, 5.75) {};
		\node [style=none] (1) at (25.5, 5) {};
		\node [style=none] (4) at (26.25, 5) {};
		\node [style=none] (5) at (25.5, 5.75) {};
		\node [style=none] (6) at (26.25, 5.75) {};
		\node [style=none] (7) at (25.5, 6.5) {};
		\node [style=none] (8) at (26.25, 6.5) {};
		\node [style=otimes] (9) at (26.25, 5.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (5.center) to (7.center);
		\draw (6.center) to (8.center);
		\draw [in=180, out=-45] (5.center) to (4.center);
		\draw [in=-45, out=0, looseness=1.50] (4.center) to (6.center);
		\draw [in=0, out=-135] (6.center) to (1.center);
		\draw [in=-135, out=-180, looseness=1.50] (1.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (27) at (27.5, 5.25) {};
		\node [style=none] (28) at (28.25, 5.25) {};
		\node [style=none] (29) at (27.5, 6.5) {};
		\node [style=none] (30) at (28.25, 6.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [bend right=90, looseness=1.25] (27.center) to (28.center);
		\draw (29.center) to (27.center);
		\draw (28.center) to (30.center);
	\end{pgfonlayer}
\end{tikzpicture}\ ,\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=otimes] (0) at (25.5, 5.75) {};
		\node [style=none] (1) at (25.5, 6.5) {};
		\node [style=none] (4) at (26.25, 6.5) {};
		\node [style=none] (5) at (25.5, 5.75) {};
		\node [style=none] (6) at (26.25, 5.75) {};
		\node [style=none] (7) at (25.5, 5) {};
		\node [style=none] (8) at (26.25, 5) {};
		\node [style=otimes] (9) at (26.25, 5.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (5.center) to (7.center);
		\draw (6.center) to (8.center);
		\draw [in=-180, out=45] (5.center) to (4.center);
		\draw [in=45, out=0, looseness=1.50] (4.center) to (6.center);
		\draw [in=0, out=135] (6.center) to (1.center);
		\draw [in=135, out=180, looseness=1.50] (1.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (41) at (31.5, 6.25) {};
		\node [style=none] (42) at (32.25, 6.25) {};
		\node [style=none] (43) at (31.5, 5) {};
		\node [style=none] (44) at (32.25, 5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [bend left=90, looseness=1.25] (41.center) to (42.center);
		\draw (43.center) to (41.center);
		\draw (42.center) to (44.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

This fixes the dualizing objects on tensor products $(X\otimes Y)^* = Y^* \otimes X^*$.
%The graphical calculus for strict compact closed categories extends string diagrams for symmetric monoidal categories, where  the units and counits are drawn without the tensor/untensor and unit removal/introduction.




One thing that is nice about compact closed categories is that we can treat all maps as either states or effects:
\begin{definition}
In a compact closed category, every map $f:X\to Y$ canonically induces a state $\lfloor f \rfloor:I\to X^* \otimes Y$ and an effect
$\lceil f \rceil: X \otimes Y^* \to I$ given by bending the wires of $f$ as follows:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (3) at (266.75, 5.5) {$\lfloor f \rfloor$};
		\node [style=none] (4) at (266.25, 6.5) {};
		\node [style=none] (5) at (267.25, 6.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=45, out=-90] (5.center) to (3);
		\draw [in=270, out=135] (3) to (4.center);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (436) at (267.25, 8.25) {};
		\node [style=none] (437) at (267.75, 8.25) {};
		\node [style=map] (438) at (267.75, 7.5) {$f$};
		\node [style=none] (439) at (267.25, 7) {};
		\node [style=none] (440) at (267.75, 7) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (436.center) to (439.center);
		\draw [in=270, out=-90, looseness=1.75] (439.center) to (440.center);
		\draw (440.center) to (437.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ , \hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (264.25, 6.25) {$\lceil f \rceil$};
		\node [style=none] (1) at (263.75, 5.25) {};
		\node [style=none] (2) at (264.75, 5.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-45, out=90] (2.center) to (0);
		\draw [in=-270, out=-135] (0) to (1.center);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (444) at (268, 5) {};
		\node [style=none] (445) at (267.5, 5) {};
		\node [style=map] (446) at (267.5, 5.75) {$f$};
		\node [style=none] (447) at (268, 6.25) {};
		\node [style=none] (448) at (267.5, 6.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (444.center) to (447.center);
		\draw [in=90, out=90, looseness=1.75] (447.center) to (448.center);
		\draw (448.center) to (445.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
\end{definition}

This abstract wire-bending induces a functor:

\begin{definition}
If $\X$ is a compact closed category, there is a  symmetric monoidal functor, $(\_)^*:\X^\op\to\X$, called {\bf the transpose}, which sends:

\begin{description}
\item[Objects]\hfil $X \mapsto X^*$
\item[Maps:] \hfil
$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (288) at (56, 0) {$f$};
		\node [style=none] (289) at (56, 1) {};
		\node [style=none] (290) at (56, -1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (290.center) to (288);
		\draw (288) to (289.center);
	\end{pgfonlayer}
\end{tikzpicture}
\mapsto
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (288) at (56, 0) {$f$};
		\node [style=none] (289) at (56, 0.5) {};
		\node [style=none] (290) at (56, -0.5) {};
		\node [style=none] (291) at (56.5, 0.5) {};
		\node [style=none] (292) at (55.5, -0.5) {};
		\node [style=none] (293) at (55.5, 0) {};
		\node [style=none] (294) at (56.5, 0) {};
		\node [style=none] (295) at (55.8, 1) {};
		\node [style=none] (296) at (56.2, -1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (290.center) to (288);
		\draw (288) to (289.center);
		\draw [in=90, out=90, looseness=1.25] (289.center) to (291.center);
		\draw [in=90, out=-90] (291.center) to (294.center);
		\draw [in=270, out=270, looseness=1.25] (290.center) to (292.center);
		\draw [in=270, out=90] (292.center) to (293.center);
		\draw [in=90, out=-90] (295.center) to (293.center);
		\draw [in=-90, out=90] (296.center) to (294.center);
	\end{pgfonlayer}
\end{tikzpicture}
$
\end{description}

\end{definition}


\begin{example}
Out of all the examples we have discussed so far, only $\Mat_R$, $\FVect_k$ and $\FHilb$ are compact closed when regarded as symmetric monoidal categories with respect to the bilinear tensor product, but not the direct sum.

For $\FHilb$ and $\FVect_k$, the compact closed structure is the same.  The dual object is given by the internal hom into $\C$/$k$.  Given an orthonormal basis $\{ b_i \}_{i=0,\ldots, n-1}$ of a finite dimensional vector space $X$, with dual basis $\{b_i^* \}_{i=0,\ldots, n-1}$ of $X^*$, the unit and counit are given by the following linear maps:

$$
\eta_X = 1 \mapsto \sum_{i=0}^{n-1} b_i^* \otimes b_i \hspace*{1cm}\epsilon_X = b_i\otimes b_j^* \mapsto 
\begin{cases}
1 & \text{If $i=j$}\\
0 & \text {Otherwise}
\end{cases}
$$



The situation for $\Mat_R$ is essentially the same.
Because $\Mat_R$ is is skeletal, every object is equal to it's dual, so that $n^*=n$.
The unit and counit are $\epsilon_n=(1,\cdots, 1)$ and  $\eta_n=\epsilon_n^T$.  In this case the transpose functor is exactly the transpose of matrices. 
\end{example}






\subsection{Dagger-monoidal categories}
In this thesis, we will usually work with monoidal categories with extra structure called the dagger which allows one in some sense to``run maps in reverse.'' See \cite{cpm,abramsky} for further reference.


\begin{definition}
A {\bf \dag-category} ({\em read dagger-category}) is a category $\X$ equipped with a functor ${(\_)}^\dag:\X^\op\to\X$ ({\em read the dagger}) that is:

\begin{description}
\item[\ \ Identity on objects:] so that for all objects $X$ of $\X$, $X^\dag = X$.
\item[\ \ Involutive:] so that for all maps $f$ of $\X$, $(f^\dag)^\dag = f$.
\end{description}

A map $f$ in a dagger category is:

\begin{description}
\item[\ \ an isometry] when $f^\dag; f = 1$.
\item[\ \ a coisometry] when $f; f^\dag = 1$.
\item[\ \ unitary] when $f^\dag = f^{-1}$.
\item[\ \ self-adjoint] when $f^\dag=f$.
\item[\ \ a projector] such that $f;f=f$ and $f^\dag=f$ (also known as a $\dag$-idempotent).
\end{description}

\end{definition}

This structure will arise both in our exposition of nondeterministic categorical semantics as well as for quantum computing.


\begin{example}
 $\Mat_\C$ is a \dag-category with respect to both the transpose and the complex conjugate transpose.
\end{example}

\begin{example}

The category $\Hilb$ of complex Hilbert spaces and bounded linear maps is a dagger category with respect to the Hermetian adjoint.  The Hermetian adjoint of a map $A$ is the unique map $A^\dag$ satifying the following equation:
$$
\langle x;A|y\rangle = \langle x | A^\dag; y \rangle
$$


Let $\FHilb$ denote the full subcategory of finite dimensional Hilbert spaces of $\Hilb$.  This is also a $\dag$-category.
\end{example}

\begin{lemma}
There is an equivalence of categories $\FHilb \cong \Mat_\C$ preserving and reflecting the dagger structure.
The Hermetian adjoint corresponds to the complex conjugate transpose along the equivalence $\Mat_\C \cong \FHilb$.
\end{lemma}


This example is actually a bit tricky; while the dagger in $\Mat_\C$ is given by the complex conjugate transpose; the complex conjugate transpose in $\FHilb$ is {\em not } the Hermetian adjoint.  This is because, unlike the case in $\Mat_\C$, the tranpose is not the identity on objects in $\FHilb$.  Moreover, it is not even covariant on objects as  $(A\otimes B)^* = B^*\otimes A^*$ which is merely {\em isomorphic} to  $A^*\otimes B^*$.





There is a natural way to combined monoidal and dagger structure:

\begin{definition}
A {\bf  (strict) \dag-(symmetric) monoidal category} is a (strict) (symmetric) monoidal category equipped with a strict (symmetric) \dag-functor with respect to which all the components of the  coherence isomorphisms of the (symmetric) monoidal structure are unitary.
\end{definition}



\begin{example}
The dagger category and symmetric monoidal structures of $\FHilb$, $\Hilb$ and $\Mat_\C$ are all compatible making them \dag-symmetric monoidal categories.

Moreover, $\FHilb$ and $\Mat_\C$  are equivalent as $\dag$-symmetric monoidal categories.
\end{example}


We capture more of monoidal category theory within the framework of dagger categories:

\begin{definition}
A {(strict) \dag-compact closed category} is a (strict) compact closed category which is (strict) \dag-symmetric monoidal and for all objects $\X$:

$$
\xymatrix{
I \ar[r]^{\epsilon_X^\dag} \ar[dr]_{\eta_X}   &  X\otimes X^* \ar[d]^{c_{X,X^*}}\\
 &  X^* \otimes X 
}
\hspace*{.5cm}
\text{or equivalently}
\hspace*{.5cm}
\xymatrix{
X\otimes X^* \ar[dr]_{\eta_X} \ar[r]^{c_{X,X*}}
 & X^* \otimes X  \ar[d]^{\epsilon_X^\dag}\\
& I
}
$$
\end{definition}

\begin{example}
The compact closed and \dag-symmetric monoidal structures of $\Mat_\C$ and $\FHilb$ are both compatible making them \dag-compact closed.
\end{example}

\subsection{Monoidal presentations}
In this section, we review how monoidal categories can be presented in terms of generators and equations. A more detailed reference can be found in \cite{ih}:





\begin{definition}
\label{def:monoidaltheory}

%A {\bf symmetric monoidal theory} is a triple $T=({\sf Ob},\Sigma ,E \)$. $\sf Ob$ is a set of {\em objects}. $\Sigma\in [{\sf Ob}]\times [{\sf Ob}]^{G}$ is a set of {\bf generators} $g$ with associated arities $(X,Y) \in [{\sf Ob}]\times [{\sf Ob}]$,  denoted $g:X\to Y$, where $[\_]$ is the finite list monad. Let $\Sigma'$ denote the set $\Sigma\sqcup\{c_X: [X,X]\to[X,X] | \forall X \in {\sf Ob} \}$, where the $c_X$ are regarded as the braiding maps.  Moreover, let $\Sigma^*$ denote the 
%$E \subseteq \{(f:X\to Y,g:X\to Y) \in \Sigma^2\}$

A {\bf monoidal theory} is a triple $T=({\sf Ob},\Sigma ,E )$ where: ${\sf Ob}$ is regarded as the set of generating objects; $\Sigma$, the set of generating morphisms with arities in $[{\sf Ob}]\times [{\sf Ob}]$, denoted $f:X\to Y$;  and $E$ the set of generating equations between parallel maps generated by $\Sigma$.

Every monoidal theory uniquely defines a strict monoidal category $\bar T$ given by quotienting the strict monoidal category freely generated by the objects in $\sf Ob$ and maps in $\Sigma$ modulo the equations in $E$.  Call such a monoidal category a {\bf multicoloured pro}, or merely a {\bf pro} when $|{\sf Ob}|=1$.  We will say that $T$ is a presentation of a monoidal category $\X$ when $\bar T$ is monoidally equivalent to $\X$.
\end{definition}



 In practice, we won't explicitly regard a  monoidal theory as a triple; rather, we will present multicoloured pros by drawing a list of generating equations between string diagrams.
For example, the way in which proof nets were constructed in Definition \ref{def:proofnets} is secretly a monoidal theory.
For a more elementary example:

\begin{example}
Consider the monoidal theory for the prop $\m$ generated by a monoid on one object:


$$
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (10) at (8, 2) {};
		\node [style=none] (11) at (8.5, 2.75) {};
		\node [style=none] (12) at (7.5, 2.75) {};
		\node [style=none] (13) at (8, 1.25) {};
		\node [style=none] (14) at (8.5, 3.25) {};
		\node [style=X] (15) at (7.5, 2.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=30] (10) to (11.center);
		\draw (13.center) to (10);
		\draw [in=-90, out=150] (10) to (12.center);
		\draw (11.center) to (14.center);
	\end{pgfonlayer}
\end{tikzpicture}
 \eqzxa{unitl}
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (16) at (6.5, 1.25) {};
		\node [style=none] (17) at (6.5, 3.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (16.center) to (17.center);
	\end{pgfonlayer}
\end{tikzpicture}
 \eqzxa{unitr}
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (4) at (5, 2) {};
		\node [style=none] (5) at (4.5, 2.75) {};
		\node [style=none] (6) at (5.5, 2.75) {};
		\node [style=none] (7) at (5, 1.25) {};
		\node [style=none] (8) at (4.5, 3.25) {};
		\node [style=X] (9) at (5.5, 2.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=150] (4) to (5.center);
		\draw (7.center) to (4);
		\draw [in=-90, out=30] (4) to (6.center);
		\draw (5.center) to (8.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (12, 2) {};
		\node [style=none] (1) at (12.5, 1.25) {};
		\node [style=none] (2) at (11.5, 1.25) {};
		\node [style=none] (3) at (12, 2.75) {};
		\node [style=X] (4) at (12.5, 1.25) {};
		\node [style=none] (5) at (13, 0.5) {};
		\node [style=none] (6) at (12, 0.5) {};
		\node [style=none] (7) at (11.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw (3.center) to (0);
		\draw [in=90, out=-150] (0) to (2.center);
		\draw [in=90, out=-30] (4) to (5.center);
		\draw [in=90, out=-150] (4) to (6.center);
		\draw (7.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
 \eqzxa{assoc}
\begin{tikzpicture}[xscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (12, 2) {};
		\node [style=none] (1) at (12.5, 1.25) {};
		\node [style=none] (2) at (11.5, 1.25) {};
		\node [style=none] (3) at (12, 2.75) {};
		\node [style=X] (4) at (12.5, 1.25) {};
		\node [style=none] (5) at (13, 0.5) {};
		\node [style=none] (6) at (12, 0.5) {};
		\node [style=none] (7) at (11.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw (3.center) to (0);
		\draw [in=90, out=-150] (0) to (2.center);
		\draw [in=90, out=-30] (4) to (5.center);
		\draw [in=90, out=-150] (4) to (6.center);
		\draw (7.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
This is a presentation for the pro $\FinOrdMonot$, of finite ordinals and monotone maps.
\end{example}

Two diagrams in this prop of the same arity whose components are connected are equal, so we will use the following notation to refer to them:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (41) at (15, 0.25) {};
		\node [style=X] (42) at (14.25, -0.75) {};
		\node [style=none] (43) at (15.25, -0.75) {};
		\node [style=none] (44) at (14, -1.5) {};
		\node [style=none] (45) at (15.25, -1.5) {};
		\node [style=none] (46) at (14.5, -1.5) {};
		\node [style=none] (47) at (14.25, -0.5) {};
		\node [style=none] (48) at (14.75, 0) {};
		\node [style=none] (49) at (14.5, -0.2) {$\reflectbox{$\ddots$}$};
		\node [style=none] (50) at (14.95, -1.5) {$\cdots$};
		\node [style=none] (51) at (15, 1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=300, out=90] (43.center) to (41);
		\draw [in=90, out=-120] (42) to (44.center);
		\draw [in=90, out=-60] (42) to (46.center);
		\draw (45.center) to (43.center);
		\draw (42) to (47.center);
		\draw (48.center) to (41);
		\draw (41) to (51.center);
	\end{pgfonlayer}
\end{tikzpicture}
=:
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (1) at (12.5, 0) {};
		\node [style=none] (3) at (11.5, -1.5) {};
		\node [style=none] (4) at (12.5, -0.75) {};
		\node [style=none] (7) at (12, -1.5) {};
		\node [style=X] (8) at (12.5, -0.75) {};
		\node [style=none] (9) at (13, -1.5) {};
		\node [style=none] (40) at (12.5, -1.5) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-150, out=90] (3.center) to (4.center);
		\draw (1.center) to (4.center);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
\begin{definition}

A {\bf symmetric monoidal theory} $T$ consists of the same data as a monoidal theory except the equations are now defined by parallel maps generated by $\Sigma\sqcup C$, where  $C=\{c_X:[X,X]\to [X,X]\ |\ \forall X \in {\sf Ob}\}$ is the set of distinguished braiding maps.


The corresponding strict symmetric monoidal category $\bar T$ is given by quotienting the symmetric monoidal category freely generated by the objects $\sf Ob$ and maps $\Sigma$ by the equations in $E$.  These symmetric monoidal categories are called {\bf multicoloured props}, or merely {\bf props} when $|{\sf Ob}|=1$.
\end{definition}






\begin{example}
Consider the symmetric monoidal theory $\cm$ generated by a monoid $\xcirc$, which is also commutative:
$$
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (18) at (10, 2) {};
		\node [style=none] (19) at (10.5, 2.75) {};
		\node [style=none] (20) at (9.5, 2.75) {};
		\node [style=none] (21) at (10, 1.25) {};
		\node [style=none] (22) at (9.5, 3.75) {};
		\node [style=none] (23) at (10.5, 3.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=30] (18) to (19.center);
		\draw (21.center) to (18);
		\draw [in=-90, out=150] (18) to (20.center);
		\draw [in=270, out=90] (19.center) to (22.center);
		\draw [in=270, out=90] (20.center) to (23.center);
	\end{pgfonlayer}
\end{tikzpicture}
\eqzxa{comm}
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (24) at (12, 2) {};
		\node [style=none] (25) at (12.5, 2.75) {};
		\node [style=none] (26) at (11.5, 2.75) {};
		\node [style=none] (27) at (12, 1.25) {};
		\node [style=none] (28) at (12.5, 3.75) {};
		\node [style=none] (29) at (11.5, 3.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=30] (24) to (25.center);
		\draw (27.center) to (24);
		\draw [in=-90, out=150] (24) to (26.center);
		\draw (25.center) to (28.center);
		\draw (26.center) to (29.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

This is a presentation for the prop of finite ordinals and functions $\FinOrd$ under the disjointn union.
This is a formal way to talk about the graph of a function between finite sets.

\end{example}


This elegant presentation of the symmetric monoidal category of finite sets motivates finding presentations for other well-known mathematical structures.  


The following result has almost surely been known for quite some time, but it is contained in \cite[\S 3.2]{ih}; where a much more fine grained presentation is given:

\begin{example}
Take a commutative semiring $S$.
Consider the prop ${\sf cb}_S$ generated by a commutative monoid $\xcirc$ and comonoid $\zcirc$ interacting to form a {\bf bialgebra}:
$$
  \begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (-3.75, -1) {};
		\node [style=none] (1) at (-4, -1.75) {};
		\node [style=none] (2) at (-3.5, -1.75) {};
		\node [style=Z] (3) at (-3.75, -0.25) {};
		\node [style=none] (4) at (-4, 0.5) {};
		\node [style=none] (5) at (-3.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-60, looseness=1.00] (0) to (2.center);
		\draw [in=-120, out=90, looseness=1.00] (1.center) to (0);
		\draw (0) to (3);
		\draw [in=60, out=-90, looseness=1.00] (5.center) to (3);
		\draw [in=-90, out=120, looseness=1.00] (3) to (4.center);
	\end{pgfonlayer}
  \end{tikzpicture}
  \eqzxa{bi.one}
  \begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (-4, 0.5) {};
		\node [style=Z] (1) at (-4, -0.25) {};
		\node [style=X] (2) at (-4.5, 0.5) {};
		\node [style=Z] (3) at (-4.5, -0.25) {};
		\node [style=none] (4) at (-4, -1) {};
		\node [style=none] (5) at (-4.5, -1) {};
		\node [style=none] (6) at (-4.5, 1.25) {};
		\node [style=none] (7) at (-4, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [bend left, looseness=1.25] (0) to (1);
		\draw [bend right, looseness=1.25] (2) to (3);
		\draw (1) to (2);
		\draw (3) to (0);
		\draw (0) to (7.center);
		\draw (6.center) to (2);
		\draw (3) to (5.center);
		\draw (4.center) to (1);
	\end{pgfonlayer}
\end{tikzpicture},
\hspace*{.5cm}
  \begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (-4, -0) {};
		\node [style=X] (1) at (-4, -0.75) {};
		\node [style=none] (2) at (-4.25, -1.5) {};
		\node [style=none] (3) at (-3.75, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-60, out=90, looseness=1.00] (3.center) to (1);
		\draw (1) to (0);
		\draw [in=90, out=-120, looseness=1.00] (1) to (2.center);
	\end{pgfonlayer}
  \end{tikzpicture}
  \eqzxa{bi.two}
  \begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (-4.25, -0.75) {};
		\node [style=none] (1) at (-4.25, -1.5) {};
		\node [style=none] (2) at (-3.5, -1.5) {};
		\node [style=Z] (3) at (-3.5, -0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2.center) to (3);
		\draw (0) to (1.center);
	\end{pgfonlayer}
  \end{tikzpicture},
  \hspace*{.5cm}
   \begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (-4, -0) {};
		\node [style=Z] (1) at (-4, -0.75) {};
		\node [style=none] (2) at (-4.25, -1.5) {};
		\node [style=none] (3) at (-3.75, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-60, out=90, looseness=1.00] (3.center) to (1);
		\draw (1) to (0);
		\draw [in=90, out=-120, looseness=1.00] (1) to (2.center);
	\end{pgfonlayer}
  \end{tikzpicture}
  \erefop{bi.two}
   \begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (-4.25, -0.75) {};
		\node [style=none] (1) at (-4.25, -1.5) {};
		\node [style=none] (2) at (-3.5, -1.5) {};
		\node [style=X] (3) at (-3.5, -0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2.center) to (3);
		\draw (0) to (1.center);
	\end{pgfonlayer}
  \end{tikzpicture},
\hspace*{.5cm}
  \begin{tikzpicture}[rotate=90]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (-8.25, -0) {};
		\node [style=X] (1) at (-9.25, -0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (0) to (1);
	\end{pgfonlayer}
\end{tikzpicture}
  \eqzxa{extra}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (2, 0) {};
		\node [style=none] (1) at (2, -1) {};
		\node [style=none] (2) at (3, -1) {};
		\node [style=none] (3) at (3, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw[style=dashed] (3.center) to (0.center) to (1.center) to (2.center) to cycle;
	\end{pgfonlayer}
\end{tikzpicture}
$$
And generators for all elements $a,b \in S$ such that the structure of the commutative semiring $S$ is reflected in the convolution of the bialgebra:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0, 0.25) {};
		\node [style=none] (1) at (0, -2.25) {};
		\node [style=X] (2) at (0, -0.25) {};
		\node [style=Z] (3) at (0, -1.75) {};
		\node [style=none] (4) at (-0.5, -1) {};
		\node [style=none] (5) at (0.5, -1) {};
		\node [style=scalar,fill=white] (6) at (-0.5, -1) {$a$};
		\node [style=scalar,fill=white] (7) at (0.5, -1) {$b$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (3);
		\draw (2) to (0.center);
		\draw [in=90, out=-30] (2) to (5.center);
		\draw [in=30, out=-90] (5.center) to (3);
		\draw [in=-90, out=150] (3) to (4.center);
		\draw [in=-150, out=90] (4.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0.5, 0.25) {};
		\node [style=none] (1) at (0.5, -2.25) {};
		\node [style=scalar] (2) at (0.5, -1) {$a+b$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2) to (0.center);
		\draw (1.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}\ ,
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0.5, 0.25) {};
		\node [style=none] (1) at (0.5, -2.25) {};
		\node [style=scalar] (2) at (0.5, -0.5) {$b$};
		\node [style=scalar] (3) at (0.5, -1.5) {$a$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2) to (0.center);
		\draw (1.center) to (3);
		\draw (3) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0.5, 0.25) {};
		\node [style=none] (1) at (0.5, -2.25) {};
		\node [style=scalar] (2) at (0.5, -1) {$ab$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2) to (0.center);
		\draw (1.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}\ ,
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0.5, 0.25) {};
		\node [style=none] (1) at (0.5, -1.25) {};
		\node [style=scalar] (2) at (0.5, -0.5) {$1$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2) to (0.center);
		\draw (1.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0.5, 0.25) {};
		\node [style=none] (1) at (0.5, -1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (0.center);
	\end{pgfonlayer}
\end{tikzpicture}\ ,
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0.5, 0.25) {};
		\node [style=none] (1) at (0.5, -1.25) {};
		\node [style=scalar] (2) at (0.5, -0.5) {$0$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2) to (0.center);
		\draw (1.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0.5, 0.25) {};
		\node [style=none] (1) at (0.5, -1.25) {};
		\node [style=X] (2) at (0.5, -0.25) {};
		\node [style=Z] (3) at (0.5, -0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2) to (0.center);
		\draw (3) to (1.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

Where the commutative monoid and cocommutative comonoid are both natural with respect to the scalars:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (12) at (2, 0) {};
		\node [style=none] (15) at (2.5, 0.75) {};
		\node [style=none] (17) at (2, -0.75) {};
		\node [style=none] (18) at (1.5, 0.75) {};
		\node [style=scalar,fill=white] (19) at (2, -0.75) {$a$};
		\node [style=none] (20) at (2, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (17.center) to (12);
		\draw [in=-90, out=30] (12) to (15.center);
		\draw [in=150, out=-90] (18.center) to (12);
		\draw (20.center) to (17.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (21) at (3.75, -0.75) {};
		\node [style=none] (22) at (4.25, 0) {};
		\node [style=none] (23) at (3.75, -1.5) {};
		\node [style=none] (24) at (3.25, 0) {};
		\node [style=scalar,fill=white] (25) at (3.25, 0) {$a$};
		\node [style=scalar,fill=white] (27) at (4.25, 0) {$a$};
		\node [style=none] (28) at (3.25, 0.75) {};
		\node [style=none] (29) at (4.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (23.center) to (21);
		\draw [in=-90, out=30] (21) to (22.center);
		\draw [in=150, out=-90] (24.center) to (21);
		\draw (28.center) to (25);
		\draw (29.center) to (27);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (2, 0) {};
		\node [style=none] (2) at (2, -0.75) {};
		\node [style=scalar,fill=white] (4) at (2, -0.75) {$a$};
		\node [style=none] (5) at (2, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2.center) to (0);
		\draw (5.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (6) at (3.75, -0.75) {};
		\node [style=none] (8) at (3.75, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (8.center) to (6);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (36) at (7.5, 0) {};
		\node [style=none] (37) at (8, -0.75) {};
		\node [style=none] (38) at (7.5, 0.75) {};
		\node [style=none] (39) at (7, -0.75) {};
		\node [style=scalar,fill=white] (40) at (7, -0.75) {$a$};
		\node [style=scalar,fill=white] (41) at (8, -0.75) {$a$};
		\node [style=none] (42) at (7, -1.5) {};
		\node [style=none] (43) at (8, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (38.center) to (36);
		\draw [in=90, out=-30] (36) to (37.center);
		\draw [in=-150, out=90] (39.center) to (36);
		\draw (42.center) to (40);
		\draw (43.center) to (41);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (30) at (5.75, -0.75) {};
		\node [style=none] (31) at (6.25, -1.5) {};
		\node [style=none] (32) at (5.75, 0) {};
		\node [style=none] (33) at (5.25, -1.5) {};
		\node [style=scalar,fill=white] (34) at (5.75, 0) {$a$};
		\node [style=none] (35) at (5.75, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (32.center) to (30);
		\draw [in=90, out=-30] (30) to (31.center);
		\draw [in=-150, out=90] (33.center) to (30);
		\draw (35.center) to (32.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (15) at (7.5, 0) {};
		\node [style=none] (17) at (7.5, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (17.center) to (15);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (9) at (5.75, -0.75) {};
		\node [style=none] (11) at (5.75, 0) {};
		\node [style=scalar,fill=white] (13) at (5.75, 0) {$a$};
		\node [style=none] (14) at (5.75, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (11.center) to (9);
		\draw (14.center) to (11.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$



This monoidal theory is equivalent to the prop of matrices over $S$, $\Mat_S$, under the direct sum.  Recall that the direct sum of matrices $R$ and $S$ is given by the following block diagonal matrix:

$$
R\oplus S :=
\begin{bmatrix}
R & 0\\
0 & S
\end{bmatrix}
$$



The generators of this presentation are interpreted in $\Mat_S$ as follows:

$$
\left\llbracket\
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (9) at (3, -2.25) {};
		\node [style=Z] (11) at (3, -1.75) {};
		\node [style=none] (12) at (2.5, -1) {};
		\node [style=none] (13) at (3.5, -1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (9.center) to (11);
		\draw [in=30, out=-90] (13.center) to (11);
		\draw [in=-90, out=150] (11) to (12.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
=
\begin{pmatrix}
1 & 1
\end{pmatrix} , \hspace*{.2cm}
\left\llbracket\
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (14) at (7, -1) {};
		\node [style=X] (16) at (7, -1.5) {};
		\node [style=none] (18) at (6.5, -2.25) {};
		\node [style=none] (19) at (7.5, -2.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (16) to (14.center);
		\draw [in=90, out=-30] (16) to (19.center);
		\draw [in=-150, out=90] (18.center) to (16);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
=
\begin{pmatrix}
1 \\ 1
\end{pmatrix} , \hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (9) at (2.5, -2.25) {};
		\node [style=none] (12) at (2.5, -0.75) {};
		\node [style=scalar] (24) at (2.5, -1.5) {$a$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (9.center) to (24);
		\draw (24) to (12.center);
	\end{pgfonlayer}
\end{tikzpicture}
=a
$$

The unit and counit are interpreted as the unique matrices from $0 \to 1$ and $1\to 0$, respectively. note that because $\N$ is the initial commutative semiring, $\Mat_\N$ can be presented in terms of the prop for the free bicommutative bialgebra, where the generators and equations for scalars are derivable.



In particular, when $S$ is a ring, then the bialgebra is promoted to a {\bf Hopf algebra}, so that there exists an {\bf antipode}
$\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1, 0.25) {};
		\node [style=none] (4) at (1, -0.75) {};
		\node [style=s] (6) at (1, -0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (0.center) to (6);
		\draw (6) to (4.center);
	\end{pgfonlayer}
\end{tikzpicture}
$
such that:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1, 0.25) {};
		\node [style=none] (1) at (1, -2.25) {};
		\node [style=X] (2) at (1, -0.25) {};
		\node [style=Z] (3) at (1, -1.75) {};
		\node [style=none] (4) at (1.5, -1) {};
		\node [style=none] (5) at (0.5, -1) {};
		\node [style=s] (6) at (0.5, -1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (3);
		\draw (2) to (0.center);
		\draw [in=90, out=-150] (2) to (5.center);
		\draw [in=150, out=-90] (5.center) to (3);
		\draw [in=-90, out=30] (3) to (4.center);
		\draw [in=-30, out=90] (4.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1, 0.25) {};
		\node [style=none] (1) at (1, -2.25) {};
		\node [style=X] (2) at (1, -0.25) {};
		\node [style=Z] (3) at (1, -1.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (3);
		\draw (2) to (0.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[xscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1, 0.25) {};
		\node [style=none] (1) at (1, -2.25) {};
		\node [style=X] (2) at (1, -0.25) {};
		\node [style=Z] (3) at (1, -1.75) {};
		\node [style=none] (4) at (1.5, -1) {};
		\node [style=none] (5) at (0.5, -1) {};
		\node [style=s] (6) at (0.5, -1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (3);
		\draw (2) to (0.center);
		\draw [in=90, out=-150] (2) to (5.center);
		\draw [in=150, out=-90] (5.center) to (3);
		\draw [in=-90, out=30] (3) to (4.center);
		\draw [in=-30, out=90] (4.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
$$



where the antipode of the Hopf algebra is given by the scalar $-1$:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1, 0.25) {};
		\node [style=none] (1) at (1, -2.25) {};
		\node [style=X] (2) at (1, -0.25) {};
		\node [style=Z] (3) at (1, -1.75) {};
		\node [style=none] (4) at (1.5, -1) {};
		\node [style=none] (5) at (0.5, -1) {};
		\node [style=scalar, fill=white] (6) at (0.5, -1) {$-1$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (3);
		\draw (2) to (0.center);
		\draw [in=90, out=-150] (2) to (5.center);
		\draw [in=150, out=-90] (5.center) to (3);
		\draw [in=-90, out=30] (3) to (4.center);
		\draw [in=-30, out=90] (4.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (20) at (4.85, 0.25) {};
		\node [style=none] (21) at (4.85, -3.25) {};
		\node [style=X] (22) at (4.85, -0.25) {};
		\node [style=Z] (23) at (4.85, -2.75) {};
		\node [style=scalar, fill=white] (25) at (4.425, -1.5) {$-1$};
		\node [style=none] (26) at (4.5, -0.75) {};
		\node [style=none] (27) at (5.2, -0.75) {};
		\node [style=none] (28) at (5.2, -2.25) {};
		\node [style=none] (29) at (4.5, -2.25) {};
		\node [style=none] (30) at (5.2, -1.25) {};
		\node [style=none] (31) at (5.2, -1.75) {};
		\node [style=none] (32) at (4.45, -1.25) {};
		\node [style=none] (33) at (4.45, -1.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (21.center) to (23);
		\draw (22) to (20.center);
		\draw [in=-30, out=90] (27.center) to (22);
		\draw [in=30, out=-90] (28.center) to (23);
		\draw [in=-90, out=150] (23) to (29.center);
		\draw [in=-150, out=90] (26.center) to (22);
		\draw (31.center) to (30.center);
		\draw (33.center) to (32.center);
		\draw [in=-90, out=90, looseness=0.75] (32.center) to (27.center);
		\draw [in=-90, out=90] (30.center) to (26.center);
		\draw [in=90, out=-90, looseness=0.75] (31.center) to (29.center);
		\draw [in=90, out=-90, looseness=0.75] (33.center) to (28.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1, 0.25) {};
		\node [style=none] (1) at (1, -2.25) {};
		\node [style=X] (2) at (1, -0.25) {};
		\node [style=Z] (3) at (1, -1.75) {};
		\node [style=none] (4) at (0.5, -1) {};
		\node [style=none] (5) at (1.5, -1) {};
		\node [style=scalar, fill=white] (7) at (1.5, -1) {$-1$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (3);
		\draw (2) to (0.center);
		\draw [in=90, out=-30] (2) to (5.center);
		\draw [in=30, out=-90] (5.center) to (3);
		\draw [in=-90, out=150] (3) to (4.center);
		\draw [in=-150, out=90] (4.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (8) at (3, 0.25) {};
		\node [style=none] (9) at (3, -2.25) {};
		\node [style=X] (10) at (3, -0.25) {};
		\node [style=Z] (11) at (3, -1.75) {};
		\node [style=none] (12) at (2.5, -1) {};
		\node [style=none] (13) at (3.5, -1) {};
		\node [style=scalar, fill=white] (14) at (3.5, -1) {$-1$};
		\node [style=scalar, fill=white] (15) at (2.5, -1) {$1$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (9.center) to (11);
		\draw (10) to (8.center);
		\draw [in=90, out=-30] (10) to (13.center);
		\draw [in=30, out=-90] (13.center) to (11);
		\draw [in=-90, out=150] (11) to (12.center);
		\draw [in=-150, out=90] (12.center) to (10);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (16) at (5, 0.25) {};
		\node [style=none] (17) at (5, -2.25) {};
		\node [style=scalar, fill=white] (23) at (5, -1) {$1-1$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (17.center) to (23);
		\draw (23) to (16.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (24) at (6.25, 0.25) {};
		\node [style=none] (25) at (6.25, -2.25) {};
		\node [style=scalar, fill=white] (26) at (6.25, -1) {$0$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (25.center) to (26);
		\draw (26) to (24.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (27) at (7.75, 0.25) {};
		\node [style=none] (28) at (7.75, -2.25) {};
		\node [style=X] (29) at (7.75, -0.25) {};
		\node [style=Z] (30) at (7.75, -1.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (28.center) to (30);
		\draw (29) to (27.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

\end{example}

Moreover, if we define monoids and comonoids on composite systems using proof net notation:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (100) at (9.5, 1) {};
		\node [style=none] (101) at (9, 2) {};
		\node [style=none] (102) at (10, 2) {};
		\node [style=none] (103) at (9.5, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=150] (100) to (101.center);
		\draw [in=270, out=30] (100) to (102.center);
		\draw (100) to (103.center);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (79) at (7, 1) {};
		\node [style=none] (84) at (7.5, 0.25) {};
		\node [style=Z] (91) at (8, 1) {};
		\node [style=none] (92) at (7, 2) {};
		\node [style=none] (93) at (8, 2) {};
		\node [style=none] (94) at (7, 2.5) {};
		\node [style=none] (95) at (8, 2.5) {};
		\node [style=none] (96) at (7.5, -0.25) {};
		\node [style=otimes] (97) at (7, 2) {};
		\node [style=otimes] (98) at (8, 2) {};
		\node [style=otimes] (99) at (7.5, 0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=150] (84.center) to (79);
		\draw (91) to (92.center);
		\draw (79) to (93.center);
		\draw [bend left=45, looseness=1.25] (93.center) to (91);
		\draw [bend left=45, looseness=1.25] (79) to (92.center);
		\draw (92.center) to (94.center);
		\draw (93.center) to (95.center);
		\draw [in=30, out=-90] (91) to (84.center);
		\draw (84.center) to (96.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (100) at (9.5, 1) {};
		\node [style=none] (103) at (9.5, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (100) to (103.center);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (79) at (7, 1) {};
		\node [style=none] (84) at (7.5, 0.25) {};
		\node [style=Z] (91) at (8, 1) {};
		\node [style=none] (96) at (7.5, -0.25) {};
		\node [style=otimes] (99) at (7.5, 0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=150] (84.center) to (79);
		\draw [in=30, out=-90] (91) to (84.center);
		\draw (84.center) to (96.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (100) at (9.5, 1) {};
		\node [style=none] (101) at (9, 2) {};
		\node [style=none] (102) at (10, 2) {};
		\node [style=none] (103) at (9.5, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=150] (100) to (101.center);
		\draw [in=270, out=30] (100) to (102.center);
		\draw (100) to (103.center);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (79) at (7, 1) {};
		\node [style=none] (84) at (7.5, 0.25) {};
		\node [style=X] (91) at (8, 1) {};
		\node [style=none] (92) at (7, 2) {};
		\node [style=none] (93) at (8, 2) {};
		\node [style=none] (94) at (7, 2.5) {};
		\node [style=none] (95) at (8, 2.5) {};
		\node [style=none] (96) at (7.5, -0.25) {};
		\node [style=otimes] (97) at (7, 2) {};
		\node [style=otimes] (98) at (8, 2) {};
		\node [style=otimes] (99) at (7.5, 0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=150] (84.center) to (79);
		\draw (91) to (92.center);
		\draw (79) to (93.center);
		\draw [bend left=45, looseness=1.25] (93.center) to (91);
		\draw [bend left=45, looseness=1.25] (79) to (92.center);
		\draw (92.center) to (94.center);
		\draw (93.center) to (95.center);
		\draw [in=30, out=-90] (91) to (84.center);
		\draw (84.center) to (96.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (100) at (9.5, 1) {};
		\node [style=none] (103) at (9.5, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (100) to (103.center);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (79) at (7, 1) {};
		\node [style=none] (84) at (7.5, 0.25) {};
		\node [style=X] (91) at (8, 1) {};
		\node [style=none] (96) at (7.5, -0.25) {};
		\node [style=otimes] (99) at (7.5, 0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=150] (84.center) to (79);
		\draw [in=30, out=-90] (91) to (84.center);
		\draw (84.center) to (96.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

Then arbitrary  matrices $M:n\to m$ are natural with respect to these families of maps:


$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (12) at (2, 0) {};
		\node [style=none] (15) at (2.5, 0.75) {};
		\node [style=none] (17) at (2, -0.75) {};
		\node [style=none] (18) at (1.5, 0.75) {};
		\node [style=map](19) at (2, -0.75) {$M$};
		\node [style=none] (20) at (2, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (17.center) to (12);
		\draw [in=-90, out=30] (12) to (15.center);
		\draw [in=150, out=-90] (18.center) to (12);
		\draw (20.center) to (17.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (21) at (3.75, -0.75) {};
		\node [style=none] (22) at (4.25, 0) {};
		\node [style=none] (23) at (3.75, -1.5) {};
		\node [style=none] (24) at (3.25, 0) {};
		\node [style=map](25) at (3.25, 0) {$M$};
		\node [style=map](27) at (4.25, 0) {$M$};
		\node [style=none] (28) at (3.25, 0.75) {};
		\node [style=none] (29) at (4.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (23.center) to (21);
		\draw [in=-90, out=30] (21) to (22.center);
		\draw [in=150, out=-90] (24.center) to (21);
		\draw (28.center) to (25);
		\draw (29.center) to (27);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (2, 0) {};
		\node [style=none] (2) at (2, -0.75) {};
		\node [style=map](4) at (2, -0.75) {$M$};
		\node [style=none] (5) at (2, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2.center) to (0);
		\draw (5.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (6) at (3.75, -0.75) {};
		\node [style=none] (8) at (3.75, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (8.center) to (6);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (36) at (7.5, 0) {};
		\node [style=none] (37) at (8, -0.75) {};
		\node [style=none] (38) at (7.5, 0.75) {};
		\node [style=none] (39) at (7, -0.75) {};
		\node [style=map](40) at (7, -0.75) {$M$};
		\node [style=map](41) at (8, -0.75) {$M$};
		\node [style=none] (42) at (7, -1.5) {};
		\node [style=none] (43) at (8, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (38.center) to (36);
		\draw [in=90, out=-30] (36) to (37.center);
		\draw [in=-150, out=90] (39.center) to (36);
		\draw (42.center) to (40);
		\draw (43.center) to (41);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (30) at (5.75, -0.75) {};
		\node [style=none] (31) at (6.25, -1.5) {};
		\node [style=none] (32) at (5.75, 0) {};
		\node [style=none] (33) at (5.25, -1.5) {};
		\node [style=map](34) at (5.75, 0) {$M$};
		\node [style=none] (35) at (5.75, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (32.center) to (30);
		\draw [in=90, out=-30] (30) to (31.center);
		\draw [in=-150, out=90] (33.center) to (30);
		\draw (35.center) to (32.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (15) at (7.5, 0) {};
		\node [style=none] (17) at (7.5, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (17.center) to (15);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (9) at (5.75, -0.75) {};
		\node [style=none] (11) at (5.75, 0) {};
		\node [style=map](13) at (5.75, 0) {$M$};
		\node [style=none] (14) at (5.75, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (11.center) to (9);
		\draw (14.center) to (11.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$


Therefore, given two parallel matrices  $M$ and $N$, their sum is given by convolution with the bialgebra:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (79) at (7, 1) {};
		\node [style=X] (80) at (7, 3) {};
		\node [style=map] (81) at (6.5, 2) {$M$};
		\node [style=map] (82) at (7.5, 2) {$N$};
		\node [style=none] (83) at (7, 3.75) {};
		\node [style=none] (84) at (7, 0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-30, out=90] (82) to (80);
		\draw (80) to (83.center);
		\draw [in=90, out=-150] (80) to (81);
		\draw [in=150, out=-90] (81) to (79);
		\draw [in=-90, out=30] (79) to (82);
		\draw (84.center) to (79);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (87) at (9, 2) {$M+N$};
		\node [style=none] (89) at (9, 3.75) {};
		\node [style=none] (90) at (9, 0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (90.center) to (87);
		\draw (87) to (89.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$





In \cite[\S 3.2]{ih}, they show how can pull all of the white generators to the bottom and black generators to the top so that the elements of the commutative semiring live in the middle.  Consider the following example:


$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (12) at (11.5, 0.5) {};
		\node [style=Z] (13) at (12.25, -2.25) {};
		\node [style=X] (14) at (11.5, -1) {};
		\node [style=scalar,fill=white] (15) at (11.5, -0.25) {$a$};
		\node [style=none] (16) at (11, -3) {};
		\node [style=none] (17) at (12.25, -3) {};
		\node [style=none] (18) at (11, 2) {};
		\node [style=X] (19) at (12.25, 1.25) {};
		\node [style=none] (20) at (12.25, 2) {};
		\node [style=scalar,fill=white] (21) at (12.5, -0.25) {$b$};
		\node [style=Z] (22) at (13, -1.25) {};
		\node [style=Z] (23) at (13.5, -0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (12) to (15);
		\draw (15) to (14);
		\draw [in=-120, out=90] (16.center) to (14);
		\draw (14) to (13);
		\draw (13) to (17.center);
		\draw [in=-90, out=120] (12) to (18.center);
		\draw (12) to (19);
		\draw (19) to (20.center);
		\draw [in=90, out=-60] (19) to (21);
		\draw [in=135, out=-90] (21) to (22);
		\draw [in=45, out=-90] (22) to (13);
		\draw [in=-90, out=30] (22) to (23);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (24) at (15, -0.25) {};
		\node [style=Z] (25) at (16.25, -1.5) {};
		\node [style=X] (26) at (15, -1) {};
		\node [style=none] (28) at (14.5, -2.25) {};
		\node [style=none] (29) at (16.25, -2.25) {};
		\node [style=none] (30) at (14.5, 0.5) {};
		\node [style=X] (31) at (16.25, 2) {};
		\node [style=none] (32) at (16.25, 2.75) {};
		\node [style=scalar,fill=white] (34) at (14.5, 0.5) {$a$};
		\node [style=scalar,fill=white] (35) at (16.25, 2.75) {$b$};
		\node [style=scalar,fill=white] (36) at (15.5, 0.5) {$a$};
		\node [style=scalar,fill=white] (37) at (15.5, 1.25) {$b^{-1}$};
		\node [style=none] (38) at (14.5, 3.5) {};
		\node [style=none] (39) at (16.25, 3.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-120, out=90] (28.center) to (26);
		\draw (26) to (25);
		\draw (25) to (29.center);
		\draw [in=-90, out=135] (24) to (30.center);
		\draw (31) to (32.center);
		\draw [in=-90, out=45] (24) to (36);
		\draw (38.center) to (34);
		\draw (36) to (37);
		\draw [in=-150, out=90] (37) to (31);
		\draw [in=60, out=-60] (31) to (25);
		\draw (26) to (24);
		\draw (39.center) to (35);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (41) at (19.5, -2) {};
		\node [style=none] (43) at (18, -3) {};
		\node [style=none] (44) at (19.5, -2.75) {};
		\node [style=none] (45) at (18, 0.5) {};
		\node [style=X] (46) at (19.75, 2) {};
		\node [style=none] (47) at (19.75, 2.75) {};
		\node [style=scalar,fill=white] (48) at (18, 0.5) {$a$};
		\node [style=scalar,fill=white] (49) at (19.75, 2.75) {$b$};
		\node [style=scalar,fill=white] (50) at (19, 0.5) {$a$};
		\node [style=scalar,fill=white] (51) at (19, 1.25) {$b^{-1}$};
		\node [style=none] (52) at (18, 3.5) {};
		\node [style=none] (53) at (19.75, 3.5) {};
		\node [style=Z] (54) at (18, -1.5) {};
		\node [style=X] (55) at (18, -0.25) {};
		\node [style=Z] (56) at (19, -1.5) {};
		\node [style=X] (57) at (19, -0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (41) to (44.center);
		\draw (46) to (47.center);
		\draw (52.center) to (48);
		\draw (50) to (51);
		\draw [in=-150, out=90] (51) to (46);
		\draw [in=45, out=-60, looseness=0.75] (46) to (41);
		\draw (53.center) to (49);
		\draw (56) to (55);
		\draw [bend right] (55) to (54);
		\draw (57) to (54);
		\draw (55) to (48);
		\draw (50) to (57);
		\draw (54) to (43.center);
		\draw [in=150, out=-90] (56) to (41);
		\draw [bend left] (57) to (56);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (58) at (22.75, -2.5) {};
		\node [style=none] (59) at (21.25, -3) {};
		\node [style=none] (60) at (22.75, -3) {};
		\node [style=none] (61) at (21.15, 3.5) {};
		\node [style=X] (62) at (23.125, 1) {};
		\node [style=scalar,fill=white] (65) at (23.125, 2.5) {$b$};
		\node [style=none] (69) at (23.125, 3.5) {};
		\node [style=Z] (70) at (21.25, -1.75) {};
		\node [style=X] (71) at (21.15, 0.25) {};
		\node [style=Z] (72) at (22.25, -1.75) {};
		\node [style=X] (73) at (22.6, 0.25) {};
		\node [style=scalar,fill=white] (75) at (23.125, 1.75) {$b^{-1}$};
		\node [style=scalar,fill=white] (76) at (23.75, -0.75) {$b$};
		\node [style=scalar,fill=white] (77) at (22.25, -0.75) {$a$};
		\node [style=scalar,fill=white] (78) at (23, -0.75) {$a$};
		\node [style=scalar,fill=white] (79) at (20.75, -0.75) {$a$};
		\node [style=scalar,fill=white] (80) at (21.5, -0.75) {$a$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (58) to (60.center);
		\draw (69.center) to (65);
		\draw (70) to (59.center);
		\draw [in=150, out=-90] (72) to (58);
		\draw [in=-90, out=30] (70) to (77);
		\draw [in=-135, out=90] (77) to (73);
		\draw [in=90, out=-45] (73) to (78);
		\draw [in=30, out=-90] (78) to (72);
		\draw [in=-165, out=90] (73) to (62);
		\draw (62) to (75);
		\draw (75) to (65);
		\draw [in=90, out=-30, looseness=0.75] (62) to (76);
		\draw [in=30, out=-90, looseness=0.75] (76) to (58);
		\draw [in=-90, out=150] (72) to (80);
		\draw [in=-45, out=90] (80) to (71);
		\draw [in=90, out=-150] (71) to (79);
		\draw [in=135, out=-90] (79) to (70);
		\draw (71) to (61.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (81) at (26.75, -2.5) {};
		\node [style=none] (82) at (25.25, -3) {};
		\node [style=none] (83) at (26.75, -3) {};
		\node [style=none] (84) at (25.15, 1.75) {};
		\node [style=X] (85) at (27.125, 1) {};
		\node [style=none] (87) at (27.125, 1.75) {};
		\node [style=Z] (88) at (25.25, -1.75) {};
		\node [style=X] (89) at (25.15, 0.25) {};
		\node [style=Z] (90) at (26.25, -1.75) {};
		\node [style=X] (91) at (26.6, 0.25) {};
		\node [style=scalar,fill=white] (93) at (27.75, -0.75) {$b$};
		\node [style=scalar,fill=white] (94) at (26.25, -0.75) {$a$};
		\node [style=scalar,fill=white] (95) at (27, -0.75) {$a$};
		\node [style=scalar,fill=white] (96) at (24.75, -0.75) {$a$};
		\node [style=scalar,fill=white] (97) at (25.5, -0.75) {$a$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (81) to (83.center);
		\draw (88) to (82.center);
		\draw [in=150, out=-90] (90) to (81);
		\draw [in=-90, out=30] (88) to (94);
		\draw [in=-135, out=90] (94) to (91);
		\draw [in=90, out=-45] (91) to (95);
		\draw [in=30, out=-90] (95) to (90);
		\draw [in=-165, out=90] (91) to (85);
		\draw [in=90, out=-30, looseness=0.75] (85) to (93);
		\draw [in=30, out=-90, looseness=0.75] (93) to (81);
		\draw [in=-90, out=150] (90) to (97);
		\draw [in=-45, out=90] (97) to (89);
		\draw [in=90, out=-150] (89) to (96);
		\draw [in=135, out=-90] (96) to (88);
		\draw (89) to (84.center);
		\draw (85) to (87.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

This makes it clear how to interpret this as a matrix. Follow the wires from the bottom and chase their paths to the top, copying them when they meet white nodes, adding them when they meet black ones, and multiplying them when they meet scalars:

$$
\left\llbracket \
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (98) at (35.75, -3.25) {};
		\node [style=none] (99) at (31, -3.75) {};
		\node [style=none] (100) at (35.75, -3.75) {};
		\node [style=none] (101) at (31.15, 2) {};
		\node [style=X] (102) at (35.625, 1.25) {};
		\node [style=none] (103) at (35.625, 2) {};
		\node [style=Z] (104) at (31, -2.75) {};
		\node [style=X] (105) at (31.15, 0.5) {};
		\node [style=Z] (106) at (34.75, -2.5) {};
		\node [style=X] (107) at (34.85, 0.5) {};
		\node [style=scalar] (108) at (36.75, -0.5) {$b$};
		\node [style=scalar] (109) at (34.25, -0.5) {$a$};
		\node [style=scalar] (110) at (35.5, -0.5) {$a$};
		\node [style=scalar] (111) at (30.5, -0.5) {$a$};
		\node [style=scalar] (112) at (31.75, -0.5) {$a$};
		\node [style=none,color=blue] (113) at (31, -4) {$x_1$};
		\node [style=none,color=blue] (114) at (35.75, -4) {$x_2$};
		\node [style=none,color=blue] (115) at (37.075, -1.025) {$x_2$};
		\node [style=none,color=blue] (116) at (35.75, -1.025) {$x_2$};
		\node [style=none,color=blue] (117) at (34.5, -1.025) {$x_1$};
		\node [style=none,color=blue] (118) at (30.1, -0.975) {$x_1$};
		\node [style=none,color=blue] (119) at (32.15, -0.95) {$x_2$};
		\node [style=none,color=blue] (120) at (37.275, 0) {$x_2\cdot b$};
		\node [style=none,color=blue] (121) at (35.925, 0) {$x_2\cdot a$};
		\node [style=none,color=blue] (122) at (33.8, 0.05) {$x_1\cdot a$};
		\node [style=none,color=blue] (123) at (32.2, 0.05) {$x_2\cdot a$};
		\node [style=none,color=blue] (124) at (30, 0.05) {$x_1\cdot a$};
		\node [style=none,color=blue] (126) at (33.725, 1.05) {$x_1\cdot a+x_2\cdot a$};
		\node [style=none,color=blue] (127) at (35.875, 2.8) {$x_1\cdot a+x_2\cdot a+x_2\cdot b$};
		\node [style=none,color=blue] (128) at (31.25, 2.375) {$x_1\cdot a+x_2\cdot a$};
		\node [style=none,color=blue] (129) at (36.025, 2.375) {$=x_1\cdot a+x_2\cdot (a+b)$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (98) to (100.center);
		\draw (104) to (99.center);
		\draw [in=165, out=-90, looseness=0.75] (106) to (98);
		\draw [in=-90, out=15] (104) to (109);
		\draw [in=-135, out=90] (109) to (107);
		\draw [in=90, out=-45] (107) to (110);
		\draw [in=30, out=-90] (110) to (106);
		\draw [in=-165, out=90] (107) to (102);
		\draw [in=90, out=-30, looseness=0.75] (102) to (108);
		\draw [in=30, out=-90, looseness=0.75] (108) to (98);
		\draw [in=-90, out=165] (106) to (112);
		\draw [in=-30, out=90] (112) to (105);
		\draw [in=90, out=-165] (105) to (111);
		\draw [in=135, out=-90] (111) to (104);
		\draw (105) to (101.center);
		\draw (102) to (103.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
=
\begin{bmatrix}
a & a\\
a & a+b
\end{bmatrix}
$$


Where

$$
\begin{bmatrix}
a & a\\
a & a+b
\end{bmatrix}
\begin{bmatrix}
x_1\\
x_2
\end{bmatrix}
=
\begin{bmatrix}
x_1 \cdot a+x_2\cdot a\\
x_1\cdot a+x_2\cdot (a+b)
\end{bmatrix}
$$

Matrices can be generalized to have no fixed origin:

\begin{definition}
Given a commutative semiring $R$, the prop of affine matrices over $R$, $\Aff\Mat_R$ has:
\begin{description}
\item[Objects:] Natural numbers.

\item[Maps:] A map $(M,a):n\to m$ is a pair of a matrix $M:n\to m$ and a vector $1\to m$.

\item[Identity:] The identity on an object $n$ is the pair
$$(I_n,{\bf 0}:1\to n)$$
 where $I_n$ is the identity matrix and $\bf 0$ is the zero vector.


\item[Composition]

$$
\dfrac{
n \xrightarrow{(M,a)} m\ , \hspace*{.5cm} m \xrightarrow {(N,b)} k
}{
(M,a);(N,b):=(NM, Na+b)
}
$$

\item[Monoidal structure:]  The tensor product is given pointwise:
 $$(M,a)\otimes (N,b):=(M\oplus n, a\oplus b)$$ 
The tensor unit is the identity on $0$.
\end{description}
\end{definition}


So that in particular  $\Mat_R$ embeds into $\Aff\Mat_R$ via 
$$
\left(n \xrightarrow{M} m\right)
\mapsto 
\left(n \xrightarrow{(M,{\bf 0})} m\right)
$$

I can not find a reference for the following result, but it is is an immediate consequence of the analysis of affine relations in \cite{affine}:

\begin{example}
Given a commutative semiring $R$, the symmetric monoidal theory generated by adding the following generators and relations to $\cb_R$:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0.5, 0.5) {};
		\node [style=X] (2) at (0.5, -0.25) {$1$};
		\node [style=Z] (3) at (0.5, 0.5) {};
		\node [style=none] (4) at (0, 1.25) {};
		\node [style=none] (5) at (1, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2) to (0.center);
		\draw [in=270, out=150] (3) to (4.center);
		\draw [in=270, out=30] (3) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
\erefop{bi.two}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (7) at (2, -0.25) {$1$};
		\node [style=none] (9) at (2, 1.25) {};
		\node [style=none] (10) at (3, 1.25) {};
		\node [style=X] (11) at (3, -0.25) {$1$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (7) to (9.center);
		\draw (11) to (10.center);
	\end{pgfonlayer}
\end{tikzpicture},
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0.5, 0.5) {};
		\node [style=X] (2) at (0.5, -0.25) {$1$};
		\node [style=Z] (3) at (0.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2) to (0.center);
	\end{pgfonlayer}
\end{tikzpicture}
\eref{extra}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (2, 0) {};
		\node [style=none] (1) at (2, -1) {};
		\node [style=none] (2) at (3, -1) {};
		\node [style=none] (3) at (3, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw[style=dashed] (3.center) to (0.center) to (1.center) to (2.center) to cycle;
	\end{pgfonlayer}
\end{tikzpicture}
$$


This is a presentation for the prop of affine matrices over $S$.  This new generator is interpreted as the affine shift.


\end{example}
%The way we have described adding a new generator to $\cb_R$ in terms of the interaction with the monoid $\zcirc$ is secrely a pushout over $\cm^\op$.  We have specified the interaction of the new generator with the commutative monoid structure, embedded it in $\cb_R$ and then taken the free prop given by these generators and equations.



Given an affine matrix $(M,a)$, we can represent this as the following string diagram:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (0, 0) {$M$};
		\node [style=map] (1) at (1, 0) {$a$};
		\node [style=X] (2) at (0.5, 1) {};
		\node [style=X] (3) at (1, -0.75) {$1$};
		\node [style=none] (4) at (0, -1) {};
		\node [style=none] (5) at (0.5, 1.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (3) to (1);
		\draw [in=-30, out=90] (1) to (2);
		\draw (2) to (5.center);
		\draw [in=90, out=-150] (2) to (0);
		\draw (0) to (4.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$


So that the composite of two affine matrices can be computed diagramatically:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (0.5, 0) {$M$};
		\node [style=map] (1) at (1.5, 0) {$a$};
		\node [style=X] (2) at (1, 1) {};
		\node [style=X] (3) at (1.5, -0.75) {$1$};
		\node [style=none] (4) at (0.5, -1) {};
		\node [style=map] (6) at (1, 2) {$N$};
		\node [style=map] (7) at (2, 2) {$b$};
		\node [style=X] (8) at (1.5, 3) {};
		\node [style=X] (9) at (2, 1.25) {$1$};
		\node [style=none] (10) at (1, 1) {};
		\node [style=none] (11) at (1.5, 3.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (3) to (1);
		\draw [in=-30, out=90] (1) to (2);
		\draw [in=90, out=-150] (2) to (0);
		\draw (0) to (4.center);
		\draw (9) to (7);
		\draw [in=-30, out=90] (7) to (8);
		\draw (8) to (11.center);
		\draw [in=90, out=-150] (8) to (6);
		\draw (6) to (10.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (12) at (3.5, 0) {$N$};
		\node [style=map] (13) at (4.5, 0) {$N$};
		\node [style=X] (14) at (4, 1) {};
		\node [style=map] (18) at (5, 2) {$b$};
		\node [style=X] (19) at (4.5, 3) {};
		\node [style=X] (20) at (5, 1.25) {$1$};
		\node [style=none] (21) at (4, 2) {};
		\node [style=none] (22) at (4.5, 3.75) {};
		\node [style=X] (23) at (4.5, -1.5) {$1$};
		\node [style=none] (24) at (3.5, -1.75) {};
		\node [style=map] (25) at (3.5, -0.75) {$M$};
		\node [style=map] (26) at (4.5, -0.75) {$a$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-30, out=90] (13) to (14);
		\draw [in=90, out=-150] (14) to (12);
		\draw (20) to (18);
		\draw [in=-30, out=90] (18) to (19);
		\draw (19) to (22.center);
		\draw [in=-150, out=90] (21.center) to (19);
		\draw (21.center) to (14);
		\draw (24.center) to (25);
		\draw (25) to (12);
		\draw (26) to (13);
		\draw (23) to (26);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (27) at (6, 1) {$N$};
		\node [style=map] (28) at (7, 1) {$N$};
		\node [style=X] (29) at (6.5, 2) {};
		\node [style=X] (31) at (7.25, 3) {};
		\node [style=none] (33) at (6.5, 2) {};
		\node [style=none] (34) at (7.25, 3.75) {};
		\node [style=none] (36) at (6, -1.5) {};
		\node [style=map] (37) at (6, 0.25) {$M$};
		\node [style=map] (38) at (7, 0.25) {$a$};
		\node [style=X] (39) at (7.5, -1.25) {$1$};
		\node [style=none] (40) at (8, 2) {};
		\node [style=map] (41) at (8, 0.25) {$b$};
		\node [style=Z] (42) at (7.5, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-30, out=90] (28) to (29);
		\draw [in=90, out=-150] (29) to (27);
		\draw (31) to (34.center);
		\draw [in=-150, out=90] (33.center) to (31);
		\draw (36.center) to (37);
		\draw (37) to (27);
		\draw (38) to (28);
		\draw [in=90, out=-30] (31) to (40.center);
		\draw (41) to (40.center);
		\draw (39) to (42);
		\draw [in=-90, out=30] (42) to (41);
		\draw [in=-90, out=150] (42) to (38);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (43) at (9, 1.5) {$N$};
		\node [style=map] (44) at (9.75, 1.5) {$N$};
		\node [style=none] (48) at (9.75, 3.75) {};
		\node [style=none] (49) at (9, -1) {};
		\node [style=map] (50) at (9, 0.75) {$M$};
		\node [style=map] (51) at (9.75, 0.75) {$a$};
		\node [style=X] (52) at (10.25, -0.75) {$1$};
		\node [style=map] (54) at (10.75, 0.75) {$b$};
		\node [style=Z] (55) at (10.25, 0) {};
		\node [style=X] (56) at (10.25, 2.25) {};
		\node [style=X] (57) at (9.75, 3) {};
		\node [style=none] (58) at (10.75, 1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (49.center) to (50);
		\draw (50) to (43);
		\draw (51) to (44);
		\draw (52) to (55);
		\draw [in=-90, out=30] (55) to (54);
		\draw [in=-90, out=150] (55) to (51);
		\draw [in=-150, out=90] (43) to (57);
		\draw (57) to (48.center);
		\draw [in=90, out=-30] (57) to (56);
		\draw (54) to (58.center);
		\draw [in=-30, out=90] (58.center) to (56);
		\draw [in=90, out=-150] (56) to (44);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (79) at (14, 1.75) {$NM$};
		\node [style=none] (80) at (14.7, 3.75) {};
		\node [style=none] (81) at (14, 0.75) {};
		\node [style=X] (82) at (15.4, 1) {$1$};
		\node [style=X] (83) at (14.7, 3) {};
		\node [style=map] (84) at (15.4, 1.75) {$Na+b$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-150, out=90] (79) to (83);
		\draw (83) to (80.center);
		\draw (82) to (84);
		\draw [in=-30, out=90] (84) to (83);
		\draw (81.center) to (79);
	\end{pgfonlayer}
\end{tikzpicture}
$$

And we see that the other axiom is needed for the identity law:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (8) at (1.5, 3) {};
		\node [style=X] (9) at (2, 0.75) {$1$};
		\node [style=none] (10) at (1, 2.25) {};
		\node [style=none] (11) at (1.5, 3.75) {};
		\node [style=Z] (69) at (2, 1.5) {};
		\node [style=X] (70) at (2, 2.25) {};
		\node [style=none] (71) at (1, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (8) to (11.center);
		\draw (9) to (69);
		\draw [in=-30, out=90] (70) to (8);
		\draw [in=90, out=-150] (8) to (10.center);
		\draw (71.center) to (10.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (74) at (3.25, 3.75) {};
		\node [style=none] (78) at (3.25, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (78.center) to (74.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$



The following structure will show up quite a lot throughout this thesis:
\begin{example}
Consider the equations between a monoid $\xcirc$ and comonoid $\xcirc$:

$$
  \begin{tikzpicture}[rotate=90]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (-7, -0) {};
		\node [style=X] (1) at (-6.25, 0.5) {};
		\node [style=none] (2) at (-7, 0.75) {};
		\node [style=none] (3) at (-7.75, 0.75) {};
		\node [style=none] (4) at (-7.75, -0) {};
		\node [style=none] (5) at (-6.25, -0.25) {};
		\node [style=none] (6) at (-5.5, -0.25) {};
		\node [style=none] (7) at (-5.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (6.center) to (5.center);
		\draw [in=-30, out=180, looseness=1.00] (5.center) to (0);
		\draw (1) to (0);
		\draw [in=0, out=150, looseness=1.00] (1) to (2.center);
		\draw (2.center) to (3.center);
		\draw (0) to (4.center);
		\draw (1) to (7.center);
	\end{pgfonlayer}
  \end{tikzpicture}
 \eqzxa{frobl}
  \begin{tikzpicture}[rotate=90,xscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (-7, -0) {};
		\node [style=X] (1) at (-6.25, 0.5) {};
		\node [style=none] (2) at (-7, 0.75) {};
		\node [style=none] (3) at (-7.75, 0.75) {};
		\node [style=none] (4) at (-7.75, -0) {};
		\node [style=none] (5) at (-6.25, -0.25) {};
		\node [style=none] (6) at (-5.5, -0.25) {};
		\node [style=none] (7) at (-5.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (6.center) to (5.center);
		\draw [in=-30, out=180, looseness=1.00] (5.center) to (0);
		\draw (1) to (0);
		\draw [in=0, out=150, looseness=1.00] (1) to (2.center);
		\draw (2.center) to (3.center);
		\draw (0) to (4.center);
		\draw (1) to (7.center);
	\end{pgfonlayer}
  \end{tikzpicture}
  \eqzxa{frobr}
  \begin{tikzpicture}[rotate=90]
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (-4.75, -0.25) {};
		\node [style=X] (1) at (-5.5, -0) {};
		\node [style=none] (2) at (-7, -0.25) {};
		\node [style=X] (3) at (-6.25, 0) {};
		\node [style=none] (4) at (-4.75, 0.25) {};
		\node [style=none] (5) at (-7, 0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-30, out=180, looseness=1.25] (0.center) to (1);
		\draw (3) to (1);
		\draw [in=180, out=30, looseness=1.25] (1) to (4.center);
		\draw [in=0, out=-150, looseness=1.25] (3) to (2.center);
		\draw [in=0, out=150, looseness=1.25] (3) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.5cm}
  \begin{tikzpicture}[rotate=90]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (-6.25, 0.25) {};
		\node [style=none] (1) at (-7, 0.25) {};
		\node [style=none] (2) at (-4.75, 0.25) {};
		\node [style=X] (3) at (-5.5, 0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (0) to (1.center);
		\draw (3) to (2.center);
		\draw [bend right, looseness=1.25] (3) to (0);
		\draw [bend right, looseness=1.25] (0) to (3);
	\end{pgfonlayer}
  \end{tikzpicture}
  \eqzxa{special}
  \begin{tikzpicture}[rotate=90]
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (-7, 0.25) {};
		\node [style=none] (1) at (-6, 0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (0.center);
	\end{pgfonlayer}
  \end{tikzpicture}
$$

Call a (commutative) monoid/comonoid pair  satisfying Equations \ref{frobl} and \ref{frobr} a (commutative) {\bf Frobenius algebra}; and  a {\bf special} (commutative) Frobenius algebra, when they additionally satisfy Equation \ref{special}.

Denote the pro generated by a Frobenius algebra by $\fa$, and a special Frobenius algebra by $\sfa$.
Denote the prop generated by a commutative Frobenius algebra by $\cfa$, and a special commutative Frobenius algebra by $\scfa$.


A (special) (commutative) \dag-Frobenius algebra in a \dag-(symmetric) monoidal category is a  (special) (commutative) algebra where the monoid and comonoid are daggers of each other.
\end{example}


There is another  more elegant way to present Frobenius algebras and bialgebras (via distributive law).  We will introduce this notion slightly later, because it requires a considerable amount of mathematical machinery to expose.

%Notice that the coproduct is a special case of the pushout.





\subsection{Spans and relations in computation}

Categories are defined in a manner which distinguishes the inputs and outputs of morphisms.  \dag-categories are one approach to moving beyond this bias; however, they are evil in the sense that the \dag-structure is not always preserved/reflected by categorical equivalence: the theory of \dag-categories does not play well with the theory of ordinary categories.  

Spans and relations provide a categorically well-behaved, flexible setting with which to interpret processes without elevating inputs over outputs.
If functions produce unique outputs from inputs, spans and relations nondeterministicaly associate several inputs with several outputs.  To introduce these mathematical constructions.
All of the category theory in this subsection which is not explicitly cited is standard and can be found, for example, in most introductions to category theory; for example \cite{maclane}.
We first need to recall some basic facts about limits.



\begin{definition}
The {\bf product} of two objects $X$ and $Y$ (if it exists) in some category, is an object $X\times Y$ equipped with maps $\pi_0:X\times Y\to X $ and $\pi_1:X\times Y \to Y$ called the {\bf projections},  such that for any object $A$ and diagram  $X \xleftarrow{f} A \xrightarrow{g} Y$ there exists a unique map $\langle  f, g \rangle :A \to X\times Y$ called {\bf the pairing map} making the following diagram commute:


$$
\xymatrix{
    &
    & A \ar[lld]_f \ar[rrd]^g \ar@{-->}[d]^{\langle f,g\rangle}
    &
    &
  \\X 
    &
    & X\times Y \ar[ll]^{\pi_0} \ar[rr]_{\pi_1}
    &
    & Y
}
$$ 

Given two maps $f:W\to X$ and $G:Y\to Z$, their product is defined to be the universal map $f\times g:W\times Y \to X\times Z$: 

$$
\xymatrix{
    W \ar[d]_f
    &
    & W\times Y \ar@{-->}[d]^{f\times g} \ar[ll]_{\pi_0} \ar[rr]^{\pi_1}
    &
    & Y \ar[d]^g
  \\X
    &
    & Y\times Z  \ar[ll]_{\pi^0} \ar[rr]_{\pi_1}
    &
    &Z
}
$$


A terminal object in a category (if it exists) is an object $\one$ equipped with a unique map $!:X\to \one$ for every object $X$ called the {\bf discard map}.



A category is  {\bf Cartesian} when it has all finite products and a terminal object. In a Cartesian category, the discard maps and {\bf diagonals} $\Delta:=\langle 1, 1 \rangle$ yield a natural family of commutative monoids.


The products/projections/pairing maps/terminal objects/diagonal maps in $\X$ are respectively called {\bf coproducts}/{\bf injections}/{\bf copairing maps}/{\bf initial objects}/{\bf codiagonal maps} in $\X^\op$.

Moreover, $\X$ is Cartesian iff $\X^\op$ is coCartesian.
\end{definition}



\begin{example}
$\Sets$ and  $\FSets$ are Cartesian with respect to the Cartesian product $X\times Y = \{(x,y) \ | \ \forall x\in X, y \in Y\}$.  They are cocartesian with respect to the disjoint union $X+Y = \{ (x,1) \ | \ \forall x \in X \} \cup  \{ (y,2) \ | \ \forall y \in Y \}$.


Similarly, $\FVect_k$ and $\Mat_S$ is complete and cocomplete both with respect to the direct sum.
\end{example}

A Cartesian category is precisely a monoidal category which allows one to copy and delete things in a manner which is deterministic and total:

\begin{lemma}
A category is Cartesian iff it is a symmetric monoidal category equipped with a cocommutative comonoids compatible with the monoidal structure:


$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0, 2.5) {};
		\node [style=none] (1) at (1, 2.5) {};
		\node [style=Z] (2) at (0.5, 1.5) {};
		\node [style=none] (3) at (0.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (3.center) to (2);
		\draw [style=simple, in=-90, out=117] (2) to (0.center);
		\draw [style=simple, in=63, out=-90] (1.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0, 2.5) {};
		\node [style=Z] (1) at (1, 2.5) {};
		\node [style=none] (2) at (0.5, 1.5) {};
		\node [style=none] (3) at (0.5, 0.5) {};
		\node [style=none] (4) at (0, 3.5) {};
		\node [style=none] (5) at (1, 3.5) {};
		\node [style=none] (6) at (0, 4.5) {};
		\node [style=none] (7) at (1, 4.5) {};
		\node [style=otimes] (8) at (0.5, 1.5) {};
		\node [style=otimes] (9) at (1, 3.5) {};
		\node [style=otimes] (10) at (0, 3.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (3.center) to (2.center);
		\draw [style=simple, in=-90, out=135] (2.center) to (0);
		\draw [style=simple] (0) to (5.center);
		\draw [style=simple, in=120, out=-120, looseness=1.25] (4.center) to (0);
		\draw [style=simple, in=-60, out=60, looseness=1.25] (1) to (5.center);
		\draw [style=simple] (1) to (4.center);
		\draw [style=simple, in=45, out=-90] (1) to (2.center);
		\draw [style=simple] (4.center) to (6.center);
		\draw [style=simple] (5.center) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (2) at (1, 1.5) {};
		\node [style=none] (3) at (1, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (3.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (4) at (2.5, 2.5) {};
		\node [style=Z] (5) at (3.5, 2.5) {};
		\node [style=none] (6) at (3, 1.5) {};
		\node [style=none] (7) at (3, 0.5) {};
		\node [style=otimes] (12) at (3, 1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (7.center) to (6.center);
		\draw [style=simple, in=-90, out=135] (6.center) to (4);
		\draw [style=simple, in=45, out=-90] (5) to (6.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
$$
\begin{tikzpicture}[xscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (5.75, -0.75) {};
		\node [style=none] (1) at (6.25, 0) {};
		\node [style=none] (2) at (5.75, -1.5) {};
		\node [style=none] (3) at (5.25, 0) {};
		\node [style=none] (5) at (5.25, 0.75) {};
		\node [style=Z] (6) at (6.25, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2.center) to (0);
		\draw [in=-90, out=30] (0) to (1.center);
		\draw [in=150, out=-90] (3.center) to (0);
		\draw [in=270, out=90] (3.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (9) at (7.25, -1.5) {};
		\node [style=none] (11) at (7.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (11.center) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (5.75, -0.75) {};
		\node [style=none] (1) at (6.25, 0) {};
		\node [style=none] (2) at (5.75, -1.5) {};
		\node [style=none] (3) at (5.25, 0) {};
		\node [style=none] (5) at (5.25, 0.75) {};
		\node [style=Z] (6) at (6.25, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2.center) to (0);
		\draw [in=-90, out=30] (0) to (1.center);
		\draw [in=150, out=-90] (3.center) to (0);
		\draw [in=270, out=90] (3.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (12, 2) {};
		\node [style=none] (1) at (12.5, 1.25) {};
		\node [style=none] (2) at (11.5, 1.25) {};
		\node [style=none] (3) at (12, 2.75) {};
		\node [style=Z] (4) at (12.5, 1.25) {};
		\node [style=none] (5) at (13, 0.5) {};
		\node [style=none] (6) at (12, 0.5) {};
		\node [style=none] (7) at (11.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw (3.center) to (0);
		\draw [in=90, out=-150] (0) to (2.center);
		\draw [in=90, out=-30] (4) to (5.center);
		\draw [in=90, out=-150] (4) to (6.center);
		\draw (7.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[scale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (12, 2) {};
		\node [style=none] (1) at (12.5, 1.25) {};
		\node [style=none] (2) at (11.5, 1.25) {};
		\node [style=none] (3) at (12, 2.75) {};
		\node [style=Z] (4) at (12.5, 1.25) {};
		\node [style=none] (5) at (13, 0.5) {};
		\node [style=none] (6) at (12, 0.5) {};
		\node [style=none] (7) at (11.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw (3.center) to (0);
		\draw [in=90, out=-150] (0) to (2.center);
		\draw [in=90, out=-30] (4) to (5.center);
		\draw [in=90, out=-150] (4) to (6.center);
		\draw (7.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (21) at (3.75, -0.75) {};
		\node [style=none] (22) at (4.25, 0) {};
		\node [style=none] (23) at (3.75, -1.5) {};
		\node [style=none] (24) at (3.25, 0) {};
		\node [style=none] (28) at (3.25, 0.75) {};
		\node [style=none] (29) at (4.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (23.center) to (21);
		\draw [in=-90, out=30] (21) to (22.center);
		\draw [in=150, out=-90] (24.center) to (21);
		\draw [in=270, out=90] (22.center) to (28.center);
		\draw [in=270, out=90] (24.center) to (29.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (30) at (5.75, -0.75) {};
		\node [style=none] (31) at (6.25, 0) {};
		\node [style=none] (32) at (5.75, -1.5) {};
		\node [style=none] (33) at (5.25, 0) {};
		\node [style=none] (34) at (6.25, 0.75) {};
		\node [style=none] (35) at (5.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (32.center) to (30);
		\draw [in=-90, out=30] (30) to (31.center);
		\draw [in=150, out=-90] (33.center) to (30);
		\draw [in=270, out=90] (31.center) to (34.center);
		\draw [in=270, out=90] (33.center) to (35.center);
	\end{pgfonlayer}
\end{tikzpicture}$$
Where the comultiplication and counit are also natural, so that for any map $f$:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (12) at (2, 0) {};
		\node [style=none] (15) at (2.5, 0.75) {};
		\node [style=none] (17) at (2, -0.75) {};
		\node [style=none] (18) at (1.5, 0.75) {};
		\node [style=map] (19) at (2, -0.75) {$f$};
		\node [style=none] (20) at (2, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (17.center) to (12);
		\draw [in=-90, out=30] (12) to (15.center);
		\draw [in=150, out=-90] (18.center) to (12);
		\draw (20.center) to (17.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (21) at (3.75, -0.75) {};
		\node [style=none] (22) at (4.25, 0) {};
		\node [style=none] (23) at (3.75, -1.5) {};
		\node [style=none] (24) at (3.25, 0) {};
		\node [style=map] (25) at (3.25, 0) {$f$};
		\node [style=map] (27) at (4.25, 0) {$f$};
		\node [style=none] (28) at (3.25, 0.75) {};
		\node [style=none] (29) at (4.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (23.center) to (21);
		\draw [in=-90, out=30] (21) to (22.center);
		\draw [in=150, out=-90] (24.center) to (21);
		\draw (28.center) to (25);
		\draw (29.center) to (27);
	\end{pgfonlayer}
\end{tikzpicture} \ ,
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (2, 0) {};
		\node [style=none] (2) at (2, -0.75) {};
		\node [style=map] (4) at (2, -0.75) {$f$};
		\node [style=none] (5) at (2, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2.center) to (0);
		\draw (5.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (6) at (3.75, -0.75) {};
		\node [style=none] (8) at (3.75, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (8.center) to (6);
	\end{pgfonlayer}
\end{tikzpicture}
$$
\end{lemma}

Therefore, when we gave presentations for $\FinOrd$ and $\Mat_S$; the natural white commutative comonoid is precisely the one coming from the Cartesian structure.



As we alluded to in the introduction of this subsection, the Cartesian notion of copying biases inputs over outputs, and the coCartesian notion of comparison biases outputs over inputs.  We are interested in a more permissive, symmetric notion of copying, which is compatible with \dag-structure. The following construction allows us to develop such a structure; generalizing the product modulo shared structure:


\begin{definition}
The {\bf pullback} of a diagram  $X \xrightarrow{f} A \xleftarrow{g} Y$ (if it exists) is an object $X\ {}_f \times_{g} Y$ called and maps $\pi_0:X\ {}_f \times_{g} Y\to X$ and  $\pi_1:X\ {}_f \times_{g} Y\to Y$ called {\bf the  projections}, such that for any diagram $X \xleftarrow{p_0} P \xrightarrow{p_1} Y$ making the the following diagram commute:

$$
\xymatrix{
    &
    & B   \ar[dll]_{p_0} \ar[drr]^{p^1}
    &
    &
  \\X \ar[drr]_f 
    &
    & 
    &
    & Y  \ar[dll]^{g}
  \\
    &
    & A
    &
    & 
}
$$

There exists a unique map $u: P\to X\ {}_f\times_g Y $ called the making the following diagram commute:

$$
\xymatrix{
    &
    & P \ar@/_/[ddll]_{p_0}  \ar@/^/[ddrr]^{p_1} \ar@{-->}[d]^{u}
    &
    &
  \\
    &
    & X\ {}_f \times_{g} Y  \ar[dll]_{\pi_0} \ar[drr]^{\pi_1}
    &
    &
  \\X \ar[drr]_f 
    &
    & 
    &
    & Y \ar[dll]^g 
  \\
    &
    & A
    &
    & 
}
$$

A category is {\bf finitely complete} if it has a terminal object and all pullbacks exist. Notice that product $X\times Y$ is the pullback of the diagram $X \rightarrow 1 \leftarrow Y$.


The dual notion of a pullback is a {\bf pushout}; the pushout of a diagram $X\xrightarrow{f} A \xleftarrow{g} Y$ is denoted by $X{}_f +_{g} Y$.
\end{definition}

\begin{example} 
In $\Sets$ the pullback of a cospan $X \xrightarrow{f} A \xleftarrow{g} Y$ is (up to unique isomorphism) the set $\{(x,y) \in X\times Y : f(x) = g(y)\}$.


The pushout of a  span $X \xleftarrow{f} A \xrightarrow{g} Y$ is likewise:
the quotient of the set $X+Y$ by $f(a)\sim g(a)$ for all $a \in A$.

The concrete pullback/pushout of matrices is essentially the same with the direct sum instead of the Cartesian product/disjoint union.
\end{example}

Spans form a bicategory under pullback:
\begin{definition}
Given a finitely complete category $\X$, the bicategory of spans $\Span(\X)$ has:

\begin{description}
\item[\ \ 0-cells:] Objects of $\X$.
\item[\ \ 1-cells:] 1-cells $(A,f,g):X\to Y$ are spans in $\X$ from $A$:

$$
\xymatrix{
    & A \ar[dl]_{f} \ar[dr]^{g}
    &
  \\X 
    &
    & Y
}
$$

Composition is given by the span induced by pullback:
$$
\xymatrix{
    & A\ar[dl]_{f} \ar[dr]^{g}
    &
  \\X 
    &
    & Y
}\ ;\
\xymatrix{
    & B\ar[dl]_{h} \ar[dr]^{k}
    &
  \\Y 
    &
    & Z
}
:=
\xymatrix{
    &
    & A {}_g\times_k B \ar[dl]_{\pi_0} \ar[dr]^{\pi_1}
    &
    &
  \\
    & A \ar[dl]_{f} \ar[dr]^{g}
    &
    & B \ar[dl]_{h} \ar[dr]^{k}
    &
  \\X
    &
    & Y
    &
    & Z
}
$$

The identity on $X$ is given by the span:

$$
\xymatrix{
    & X \ar@{=}[dl] \ar@{=}[dr] 
    &
  \\X 
    &
    & X
}
$$
%ooPoo
%oAoBo
%XoYoZ

\item[\ \ 2-cells:] A 2-cell $\phi:(A,f,g)\Rightarrow (B,h,k)$ between parallel spans is a map $f:A\to B$ in $\X$ such that the following diagram commutes:

$$
\xymatrix{
    & A \ar[dl]_{f} \ar[dr]^{g} \ar[dd]^{\phi}
    &
  \\X 
    &
    & Y
  \\
    & B \ar[ul]^{h} \ar[ur]_{k}
    &
}
$$

The composition and identity of  2-cells is given by the compostition and identity in $\X$.
\end{description}

Note that composition of 1-cells is not strict, so that the associativity and unitality of composition hold up to coherent isomorphism.  The coherence isomorphisms are the natural 2-cells induced by the universal property of the pullback.


The 1-category of spans of $\X$, $\Span^\sim(\X)$, has maps being equivalence classes of isomorphic spans; so that:


\begin{centering}
$(X\xleftarrow{f} A \xrightarrow{g} Y)
 \sim
(X\xleftarrow{h} B \xrightarrow{k} Y)$\\
$\text{\rotatebox{90}{$\iff$}}$\\
$\exists$  an isomorphism $\phi:A\to B$: \\
\hfil$\xymatrix{
    & A \ar[dl]_{f} \ar[dr]^{g} \ar[dd]^{\phi}_{\cong}
    &
  \\X 
    &
    & Y
  \\
    & B \ar[ul]^{h} \ar[ur]_{k}
    &
}$
\end{centering}

\end{definition}


Categories of spans give mathematical semantics for nondeterminstic processes where inputs are associated to possible outputs with multiplicity. 
A 2-cell between two processes thus describes a method to transform one process into another in a way that preserves the relationships between inputs and outputs.  For example, consider the following well-known result:



\begin{example}
$\Span^\sim(\FSets)$ is symmetric monoidally equivalent to $\Mat_\N$ under both tensor products.
\end{example}

This example is quite useful for developing ones intuition.  Take a span of finite sets $X\xleftarrow{f} M \xrightarrow{g} Y$, where $X$ and $Y$ have a chosen order. This determines an $|X|\times |Y|$ matrix, where the entry at $(x,y)\in X\times Y$ is given by the cardinality of the preimage $\langle f,g\rangle^{-1}(X\times Y)$.  That is to say, the number of times $x$ and $y$ are related.



We seek moreover, to quotient by multiplicity, to obtain a semantics for merely nondeterministic processes: where things can be related at most once.  To do so, we need more assumptions about the category with which we seek to work internal to.


\begin{definition}
The {\bf equalizer}, of two parallel maps $f,g:X\to Y$, if it exists, is an object $E_{f,g}$ equipped with a map $m:E_{f,g}\to X$ such that for all objects $F$ and maps $h:F\to E_{f,g}$, there exists a unique map $u:F\to A$ such that the following diagram commutes:

$$
\xymatrix{
    F \ar@{-->}[dr]^{u} \ar[d]_h
  \\ E_{f,g} \ar[r]_e
    & X \ar@<-.5ex>[r]_g \ar@<.5ex>[r]^f
    & Y
}
$$

The maps $e$ arising from equalizers are monomorphisms.  Monomorphisms arising this way are called {\bf regular monomorphisms}.


The dual notion to an equalizer is a {\bf coequalizer}, and the epimorphisms arizing in this way are called {\bf regular epimorphisms}.
\end{definition}




\begin{example}
Sets and matrices both have equalizers and coequalizers:

In sets, the equalizer of two functions $g,f:X\to Y$ is (up to unique isomorphism) the set 
$$\{x \in X:f(x)=g(x)\} \subseteq X$$

The coequalizer is the quotient $Y/\sim$   of the set $Y$ by the equivalence relation 
$$f(x)\sim g(y)$$

The situation is essentially the same for matrices.
\end{example}


We  use coequalizers to ask for conditions in which categories have good notions of images and kernels:


\begin{definition}
Take a finitely complete category.  Construct the pullback of a map $f:X\to Y$ along itself:
 $$\xymatrix{X\ {}_f \times_f X  \ar@<-.5ex>[rr]_{\ \ \pi_1;f}  \ar@<.5ex>[rr]^{\ \ \pi_0;f}&& Y}$$
Call this diagram a {\bf kernel pair} at $f$, and call the object  the {\bf kernel} of $f$, denoted by $\ker(f):=X\ {}_f \times_f X$.

If the kernel pair at $f$ admits an coequalizer, call this object the {\bf image} of $f$, denoted by $\im(f)$.

A {\bf regular category} is a finitely complete category such that:
\begin{itemize}
\item Every kernel pair admits a coequalizer.

\item Pullbacks of arbitrary maps along regular epimorphisms are regular epimorphisms.
\end{itemize}

\end{definition}



\begin{example}
$\Sets$, $\FSets$, $\FVect_k$ and  $\Mat_k$ for $k$ a field (or more generally a principal ideal domain) are all regular categories.

In these examples, kernels and images are the usual notions of kernels and images.
\end{example}


\begin{lemma}
In a regular category, every map $f:X\to Y$ can be factorized into a regular epimorphism $e_f$ followed by a monomorphism $m_f$ up to unique isomorphism:
$$
\xymatrix{
X \ar@{->>}[rr]^{\hspace*{-.7cm}e_f} \ar[drr]_{f} &&{X/\ker{f}=:\co\im(f)} \ar@{>->}[d]^{m_f}\\
                                        &&Y
}
$$
\end{lemma}


\begin{definition}
Given a regular category $\X$,  the strict bicategory of {\bf relations} internal to $\X$, $\Rel(\X)$ has:

\begin{description}
\item[0-cells:] Objects of $\X$.
\item[1-cells:] 1-cells $(A,f,g):X\to Y$ are jointly monic spans in $\X$ from $A$:


$$
\xymatrix{
    & A \ar[dl]_{f} \ar[dr]^{g}
    &
  \\X 
    &
    & Y
}
$$
This span being {\bf jointly monic} means that for any object $B$ and morphisms $h,k:B\to A$ if $h;f=k;f$ and $h;g=k;g$, then $h=k$.

To compose jointly monic spans $(A,f,g):X\to Y$ and $(B,h,k):Y\to Z$,  first compute the pullback:
$$
\xymatrix{
    &
    & A\ {}_g\times_k B \ar[dl]_{\pi_0} \ar[dr]^{\pi_1}
    &
    &
  \\
    & A \ar[dl]_{f} \ar[dr]^{g}
    &
    & B \ar[dl]_{h} \ar[dr]^{k}
    &
  \\X
    &
    & Y
    &
    & Z
}
$$

Composing with the pairing map we get a map $\langle \pi_0;f,\pi_1;k\rangle :A {}_g\times_k B \to X\times Z$.
Because $\X$ is a regular category, there is a factorization of $\langle \pi_0;f,\pi_1;k\rangle$ into an regular epimorphism followed by monomorphism:

$$
\xymatrix{
  A\ {}_g\times_k B \ar[drrr]^{\langle \pi_0;f,\pi_1;k\rangle}  \ar@{->>}[d]_{e:=e_{\langle \pi_0;f,\pi_1;k\rangle} }
  \\  E:=\co\im({\langle \pi_0;f,\pi_1;k\rangle} ) \ar@{>->}[rrr]_{\ \ \ \ \ \ \ \ \ \ \ m:=m_{\langle \pi_0;f,\pi_1;k\rangle} }
    &&&  X\times Z
}
$$

Which induces a jointly monic span, which we take to be the composite:

$$
\xymatrix{
    & A \ar[dl]_{f} \ar[dr]^{g}
    &
  \\X 
    &
    & Y
};
\xymatrix{
    & B \ar[dl]_{f} \ar[dr]^{g}
    &
  \\Y 
    &
    & Z
}
:=
\xymatrix{
    &E  \ar[dl]_{m;\pi_0} \ar[dr]^{m;\pi_1}
    &
  \\X 
    &
    & Y
}
$$

The identity for composition is the same as for spans.

\item[2-cells:] The 2-cells and their composition and identity is the same as for spans.

\end{description}

\end{definition}


The fact that internal relations is a strict bicategory means that we can regard is a an ordinary category; as, unlike it the case of spans, composition is strictly associative.


Relations have the special property, unlike spans, that they are poset-enriched; that is to say, either there exists a single 2-cell between 1-cells or there doesn't. This makes things much simpler than the spans picture, because one never has to deal with coherence equations.  This also justifies the interpretation of nondeterministic processes in this setting: possibility amounts to the mere existence of a 2-cell.  Any two ways to arrive at the same result must be the same.





Consider the following concrete examples which we will use in this thesis:
\begin{example}
$\Rel:=\Rel(\Set)$ has:

\begin{description}
\item[0-cells:] Natural numbers.

\item[1-cells:] A relation from $n\to m$ is a a subset $X \times Y$.

The composition of relations $R \subseteq X \times Y$  and $S \subseteq Y \times Z$ is given by:
$$
R;S := \{  (x,z) \in X\times Z: \exists y \in Y, (x,y) \in R \wedge (y,z) \in S \} \subseteq X\times Z
$$ 

\item[2-cells:] 
A 2-cell $R\Rightarrow S$ is a subset $R\subseteq S$.
\end{description}
\end{example}


If we restrict ourselves to finite sets we have the following well known equivalence:



\begin{lemma}
$\Rel(\FSets)$ is symmetric monoidally equivalent to $\Mat(\B)$ under both tensor products. 
\end{lemma}


This quotient of multiplicity from spans to relations in the case of finite sets, corresponds to applying the commutative semiring homorphism $\N\to \B$, where $\B$ is the Boolean semiring, making $2=1$.

Therefore when working in in the prop whose tensor product is given by the disjoint union/coproduct; this quotient can be stated as the following equation between string diagrams, meaning that we don't care which path we take, we care merely of the existence of a path:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (135) at (40, -0.25) {};
		\node [style=none] (136) at (40, -2.75) {};
		\node [style=X] (137) at (40, -1) {};
		\node [style=Z] (138) at (40, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [bend right=45, looseness=1.25] (137) to (138);
		\draw [bend right=45, looseness=1.25] (138) to (137);
		\draw (135.center) to (137);
		\draw (136.center) to (138);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (135) at (40, -0.25) {};
		\node [style=none] (136) at (40, -2.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (135.center) to (136.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$


%Notice how spans of finite sets are matrices over the natural numbers; whereas relations are matrices over the Boolean semiring.  This gives some concrete evidence for how the quotient going from spans to relations forgets about multiplicity.
%%
%%
%In the dual picture, corelations can be interpreted as the algebra for  partitions, and cospans as partitions with counting.  These interpretations are elucidated by looking at the monoidal presentations when these constructions are applied to finite sets.
%
%\begin{lemma} %GIVE DAGGERS
%Buni et als paper, separate into different lemmas
%
%
%Rel/Span under coproduct is monoidal.  Give presentation for finite sets, hint at the later connection to distributive laws
%  spans finite sets under the coproduct is strong monoidally isomorphic to natural number matrices under the direct sum
%  relations of finite sets under the coproduct is strong monoidally isomorphic to boolean matrices under the direct sum
%
%Rel/Span under product is monoidal.  Note that it is not a prop, so presenations are harder.  Hint at how we will take a shot at this in the ZXA section
%  spans finite sets under the product is strong monoidally isomorphic to natural number matrices under the bilinear tensor product
%  relations of finite sets under the product is strong monoidally isomorphic to boolean matrices under the bilinear tensor product
%
%
%CoRel/Cospan under coproduct is monoidal.  Give presentation for finite sets, hint at the later connection to distributive laws
%
%
%
%CoRel/Cospan under product is not monoidal.  It is only premonoidal.  Say this is an open problem.  Cite recent papers on premonoidal categories
%\end{lemma}


The following category of relations is very important for this thesis:


\begin{definition}
Given a field $k$, the $\dag$-compact closed prop of {\bf linear relations} over $k$, $\LinRel_{k}$ is defined to be $\Rel(\Mat_k)$ with respect to the direct sum.

Explicitly, $\LinRel_{k}$ has:

\begin{description}
\item[Objects:] Natural numbers.

\item[Maps:] A linear relation $n\to m$ is a linear subspace of $k^n \oplus k^m$.

\item[Composition:] Relational composition, so that for $R \subseteq k^n \oplus k^m$  and $S \subseteq k^m \oplus k^\ell$:
$$
R;S := \{  (x,z) \in k^{n} \oplus k^{\ell} : \exists y \in k^{m}, (x,y) \in R \wedge (y,z) \in S \} \subseteq k^n \oplus k^\ell
$$ 

\item[Tensor product:] Direct sum, so that for $R \subseteq k^n \oplus k^m$ and $S \subseteq k^\ell \oplus k^q$:

$$R\oplus S : =
\left\{
\left(
\begin{pmatrix}
a_1\\a_2
\end{pmatrix},
\begin{pmatrix}
b_1\\b_2
\end{pmatrix}
:
\forall (a_1,b_1) \in R, (a_2,b_2) \in S
\right)
\right\} \subseteq k^{n+\ell}\oplus k^{m+q}
$$

\end{description}
\end{definition}

This prop has a presentation in terms of interacting Hopf algebras:

\begin{definition}
Given a field $k$, let $\ih_k$ be the quotient of the props $\cb_k+\cb_k^\op$, modulo the equations, for all $0\neq a \in k$ (where the generators of $\cb_k^\op$ are drawn as the vertically flipped generators of $\cb_k$):

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0.75, 0.5) {};
		\node [style=Z] (1) at (0, 1) {};
		\node [style=none] (2) at (0, 1.5) {};
		\node [style=none] (6) at (1, 1.5) {};
		\node [style=none] (7) at (-0.25, 0) {};
		\node [style=none] (8) at (0.75, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1) to (2.center);
		\draw [in=90, out=-120] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=60] (0) to (6.center);
		\draw (8.center) to (0);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (11) at (2.25, 1.5) {};
		\node [style=none] (12) at (3.25, 1.5) {};
		\node [style=none] (13) at (2.25, 0) {};
		\node [style=none] (14) at (3.25, 0) {};
		\node [style=Z] (15) at (2.75, 1) {};
		\node [style=Z] (16) at (2.75, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (15) to (11.center);
		\draw (15) to (12.center);
		\draw (15) to (16);
		\draw (16) to (13.center);
		\draw (14.center) to (16);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (17) at (4.5, 0.5) {};
		\node [style=Z] (18) at (5.25, 1) {};
		\node [style=none] (19) at (5.25, 1.5) {};
		\node [style=none] (20) at (4.25, 1.5) {};
		\node [style=none] (21) at (5.5, 0) {};
		\node [style=none] (22) at (4.5, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (18) to (19.center);
		\draw [in=90, out=-60] (18) to (21.center);
		\draw (17) to (18);
		\draw [in=-90, out=120] (17) to (20.center);
		\draw (22.center) to (17);
	\end{pgfonlayer}
\end{tikzpicture},
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0, 0) {};
		\node [style=Z] (1) at (0, 1) {};
		\node [style=none] (2) at (0, 1.5) {};
		\node [style=none] (3) at (0, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (0) to (3.center);
		\draw [bend left=45, looseness=1.25] (0) to (1);
		\draw [bend left=45, looseness=1.25] (1) to (0);
		\draw (1) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (6) at (1, 1.5) {};
		\node [style=none] (7) at (1, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (7.center) to (6.center);
	\end{pgfonlayer}
\end{tikzpicture},
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (0.75, 0.5) {};
		\node [style=X] (1) at (0, 1) {};
		\node [style=none] (2) at (0, 1.5) {};
		\node [style=none] (6) at (1, 1.5) {};
		\node [style=none] (7) at (-0.25, 0) {};
		\node [style=none] (8) at (0.75, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1) to (2.center);
		\draw [in=90, out=-120] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=60] (0) to (6.center);
		\draw (8.center) to (0);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (11) at (2.25, 1.5) {};
		\node [style=none] (12) at (3.25, 1.5) {};
		\node [style=none] (13) at (2.25, 0) {};
		\node [style=none] (14) at (3.25, 0) {};
		\node [style=X] (15) at (2.75, 1) {};
		\node [style=X] (16) at (2.75, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (15) to (11.center);
		\draw (15) to (12.center);
		\draw (15) to (16);
		\draw (16) to (13.center);
		\draw (14.center) to (16);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (17) at (4.5, 0.5) {};
		\node [style=X] (18) at (5.25, 1) {};
		\node [style=none] (19) at (5.25, 1.5) {};
		\node [style=none] (20) at (4.25, 1.5) {};
		\node [style=none] (21) at (5.5, 0) {};
		\node [style=none] (22) at (4.5, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (18) to (19.center);
		\draw [in=90, out=-60] (18) to (21.center);
		\draw (17) to (18);
		\draw [in=-90, out=120] (17) to (20.center);
		\draw (22.center) to (17);
	\end{pgfonlayer}
\end{tikzpicture},
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (0, 0) {};
		\node [style=X] (1) at (0, 1) {};
		\node [style=none] (2) at (0, 1.5) {};
		\node [style=none] (3) at (0, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (0) to (3.center);
		\draw [bend left=45, looseness=1.25] (0) to (1);
		\draw [bend left=45, looseness=1.25] (1) to (0);
		\draw (1) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (6) at (1, 1.5) {};
		\node [style=none] (7) at (1, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (7.center) to (6.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (11) at (3.75, -1) {};
		\node [style=Z] (12) at (3.75, -0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (11) to (12);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (11) at (3.75, -1) {};
		\node [style=X] (12) at (3.75, -0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (11) to (12);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (2, 0) {};
		\node [style=none] (1) at (2, -1) {};
		\node [style=none] (2) at (3, -1) {};
		\node [style=none] (3) at (3, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw[style=dashed] (3.center) to (0.center) to (1.center) to (2.center) to cycle;
	\end{pgfonlayer}
\end{tikzpicture},
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (3) at (17, 1.5) {};
		\node [style=none] (4) at (17, -0.75) {};
		\node [style=scalarop] (5) at (17, 0.75) {$a$};
		\node [style=scalar] (6) at (17, 0) {$a$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (4.center) to (6);
		\draw (6) to (5);
		\draw (5) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (3) at (17, 1.5) {};
		\node [style=none] (4) at (17, -0.75) {};
		\node [style=scalar] (5) at (17, 0.75) {$a$};
		\node [style=scalarop] (6) at (17, 0) {$a$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (4.center) to (6);
		\draw (6) to (5);
		\draw (5) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (3) at (17, 1.5) {};
		\node [style=none] (4) at (17, -0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (4.center) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
\end{definition}





\begin{lemma}[{\cite[\S 6]{ihpub}}]
$\ih_k$ is a presentation for $\LinRel_{k}$.
\end{lemma}



Recall that we have a presentation of affine matrices, and one might seek to find a presentation for relations internal to affine matrices.
However, the category $\Aff\Mat_k$ is not a regular category, in fact it isn't even finitely complete. 

The empty set can not be regarded as a vector space because it has no origin; however, because affine transformations are not required to preserve the origin, it is perfectly fine to ask for an affine transformation from an empty space.


By shifting to the category $\Aff\Mat_k+1$ where one freely adds the empty set as the initial object,  we obtain an algebraic theory, and thus a regular category.  Therefore, we can take the category of internal relations:






\begin{definition}
The prop of {\bf affine relations} over $k$, $\Aff\Rel_{k}$ is the full subcategory of  $\Rel(\Aff\Mat_k+1)$ of nonempty affine subspaces.
\end{definition}

Concretely, this is constructed in the same way as $\LinRel_k$ except map $n\to m$ are instead (possibly empty) affine subspaces $S \subseteq k^n\oplus k^m$. That is to say, $S$ is a subset of $k^n\oplus k^m$ such that for any $a \in S$, the set $\{v+a\ |\ \forall v \in S\}$ is a linear subspace of  $k^n\oplus k^m$.  Note that the empty set vacuously satisfies this condition.


We chose to forget the empty set as an object and retain it merely as a subobject so that we can present it as a (single sorted prop):

\begin{lemma}[{\cite[\S A]{affine}}]
$\Aff\Rel_{k}$ is presented adding the following generators and equations to the presentation of $\LinRel_k$:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (0, -0.25) {$1$};
		\node [style=Z] (1) at (0, 0.5) {};
		\node [style=none] (2) at (-0.5, 1.25) {};
		\node [style=none] (3) at (0.5, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (0) to (1);
		\draw [in=-90, out=150] (1) to (2.center);
		\draw [in=-90, out=30] (1) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (4) at (1.5, -0.25) {$1$};
		\node [style=none] (6) at (1.5, 1.25) {};
		\node [style=none] (7) at (2.5, 1.25) {};
		\node [style=X] (8) at (2.5, -0.25) {$1$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (4) to (6.center);
		\draw (7.center) to (8);
	\end{pgfonlayer}
\end{tikzpicture},
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (9) at (4, -0.25) {$1$};
		\node [style=Z] (10) at (4, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (9) to (10);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (2, 0) {};
		\node [style=none] (1) at (2, -1) {};
		\node [style=none] (2) at (3, -1) {};
		\node [style=none] (3) at (3, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw[style=dashed] (3.center) to (0.center) to (1.center) to (2.center) to cycle;
	\end{pgfonlayer}
\end{tikzpicture}
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (17) at (7.75, -0.25) {$1$};
		\node [style=X] (18) at (7.75, 0.5) {};
		\node [style=none] (19) at (8.5, 1) {};
		\node [style=none] (20) at (8.5, -0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (17) to (18);
		\draw (20.center) to (19.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (21) at (9.25, -0.25) {$1$};
		\node [style=X] (22) at (9.25, 0.5) {};
		\node [style=none] (23) at (10, 1) {};
		\node [style=none] (24) at (10, -0.75) {};
		\node [style=X] (25) at (10, -0.25) {};
		\node [style=X] (26) at (10, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (21) to (22);
		\draw (24.center) to (25);
		\draw (26) to (23.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

\end{lemma}
Therefore, we see that the first two equations come from the presentation of affine matrices, and the last equation enforces the initiality of the affine space as a subobject.


The original presentation of $\Aff\Rel_k$ was proven to be equivalent to the concrete category of affine relations; rather than the nonempty full subcategory of internal relations of possibly empty, finite dimensional  affine spaces.  However, as we have discused, both perpsectives are equivalent.


The essence of the Cartesian monoidal structure of categories of relations can be generalised to the following algebraic notion due to \cite{carboni}:


\begin{definition}
A {\bf Cartesian bicategory of relations} is a symmetric monoidal category $\X$ enriched in posets,  equipped with a supply of cocommutative comonoids compatible with the monoidal structure:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0, 2.5) {};
		\node [style=none] (1) at (1, 2.5) {};
		\node [style=Z] (2) at (0.5, 1.5) {};
		\node [style=none] (3) at (0.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (3.center) to (2);
		\draw [style=simple, in=-90, out=117] (2) to (0.center);
		\draw [style=simple, in=63, out=-90] (1.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0, 2.5) {};
		\node [style=Z] (1) at (1, 2.5) {};
		\node [style=none] (2) at (0.5, 1.5) {};
		\node [style=none] (3) at (0.5, 0.5) {};
		\node [style=none] (4) at (0, 3.5) {};
		\node [style=none] (5) at (1, 3.5) {};
		\node [style=none] (6) at (0, 4.5) {};
		\node [style=none] (7) at (1, 4.5) {};
		\node [style=otimes] (8) at (0.5, 1.5) {};
		\node [style=otimes] (9) at (1, 3.5) {};
		\node [style=otimes] (10) at (0, 3.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (3.center) to (2.center);
		\draw [style=simple, in=-90, out=135] (2.center) to (0);
		\draw [style=simple] (0) to (5.center);
		\draw [style=simple, in=120, out=-120, looseness=1.25] (4.center) to (0);
		\draw [style=simple, in=-60, out=60, looseness=1.25] (1) to (5.center);
		\draw [style=simple] (1) to (4.center);
		\draw [style=simple, in=45, out=-90] (1) to (2.center);
		\draw [style=simple] (4.center) to (6.center);
		\draw [style=simple] (5.center) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (2) at (1, 1.5) {};
		\node [style=none] (3) at (1, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (3.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (4) at (2.5, 2.5) {};
		\node [style=Z] (5) at (3.5, 2.5) {};
		\node [style=none] (6) at (3, 1.5) {};
		\node [style=none] (7) at (3, 0.5) {};
		\node [style=otimes] (12) at (3, 1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (7.center) to (6.center);
		\draw [style=simple, in=-90, out=135] (6.center) to (4);
		\draw [style=simple, in=45, out=-90] (5) to (6.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
$$
\begin{tikzpicture}[xscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (5.75, -0.75) {};
		\node [style=none] (1) at (6.25, 0) {};
		\node [style=none] (2) at (5.75, -1.5) {};
		\node [style=none] (3) at (5.25, 0) {};
		\node [style=none] (5) at (5.25, 0.75) {};
		\node [style=Z] (6) at (6.25, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2.center) to (0);
		\draw [in=-90, out=30] (0) to (1.center);
		\draw [in=150, out=-90] (3.center) to (0);
		\draw [in=270, out=90] (3.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (9) at (7.25, -1.5) {};
		\node [style=none] (11) at (7.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (11.center) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (5.75, -0.75) {};
		\node [style=none] (1) at (6.25, 0) {};
		\node [style=none] (2) at (5.75, -1.5) {};
		\node [style=none] (3) at (5.25, 0) {};
		\node [style=none] (5) at (5.25, 0.75) {};
		\node [style=Z] (6) at (6.25, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2.center) to (0);
		\draw [in=-90, out=30] (0) to (1.center);
		\draw [in=150, out=-90] (3.center) to (0);
		\draw [in=270, out=90] (3.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (21) at (3.75, -0.75) {};
		\node [style=none] (22) at (4.25, 0) {};
		\node [style=none] (23) at (3.75, -1.5) {};
		\node [style=none] (24) at (3.25, 0) {};
		\node [style=none] (28) at (3.25, 0.75) {};
		\node [style=none] (29) at (4.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (23.center) to (21);
		\draw [in=-90, out=30] (21) to (22.center);
		\draw [in=150, out=-90] (24.center) to (21);
		\draw [in=270, out=90] (22.center) to (28.center);
		\draw [in=270, out=90] (24.center) to (29.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (30) at (5.75, -0.75) {};
		\node [style=none] (31) at (6.25, 0) {};
		\node [style=none] (32) at (5.75, -1.5) {};
		\node [style=none] (33) at (5.25, 0) {};
		\node [style=none] (34) at (6.25, 0.75) {};
		\node [style=none] (35) at (5.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (32.center) to (30);
		\draw [in=-90, out=30] (30) to (31.center);
		\draw [in=150, out=-90] (33.center) to (30);
		\draw [in=270, out=90] (31.center) to (34.center);
		\draw [in=270, out=90] (33.center) to (35.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (12, 2) {};
		\node [style=none] (1) at (12.5, 1.25) {};
		\node [style=none] (2) at (11.5, 1.25) {};
		\node [style=none] (3) at (12, 2.75) {};
		\node [style=Z] (4) at (12.5, 1.25) {};
		\node [style=none] (5) at (13, 0.5) {};
		\node [style=none] (6) at (12, 0.5) {};
		\node [style=none] (7) at (11.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw (3.center) to (0);
		\draw [in=90, out=-150] (0) to (2.center);
		\draw [in=90, out=-30] (4) to (5.center);
		\draw [in=90, out=-150] (4) to (6.center);
		\draw (7.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[scale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (12, 2) {};
		\node [style=none] (1) at (12.5, 1.25) {};
		\node [style=none] (2) at (11.5, 1.25) {};
		\node [style=none] (3) at (12, 2.75) {};
		\node [style=Z] (4) at (12.5, 1.25) {};
		\node [style=none] (5) at (13, 0.5) {};
		\node [style=none] (6) at (12, 0.5) {};
		\node [style=none] (7) at (11.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw (3.center) to (0);
		\draw [in=90, out=-150] (0) to (2.center);
		\draw [in=90, out=-30] (4) to (5.center);
		\draw [in=90, out=-150] (4) to (6.center);
		\draw (7.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$


The comultiplication and  counit are moreover required to be lax-natural so that for any map $f$:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (12) at (2, 0) {};
		\node [style=none] (15) at (2.5, 0.75) {};
		\node [style=none] (17) at (2, -0.75) {};
		\node [style=none] (18) at (1.5, 0.75) {};
		\node [style=map] (19) at (2, -0.75) {$f$};
		\node [style=none] (20) at (2, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (17.center) to (12);
		\draw [in=-90, out=30] (12) to (15.center);
		\draw [in=150, out=-90] (18.center) to (12);
		\draw (20.center) to (17.center);
	\end{pgfonlayer}
\end{tikzpicture}
\leq
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (21) at (3.75, -0.75) {};
		\node [style=none] (22) at (4.25, 0) {};
		\node [style=none] (23) at (3.75, -1.5) {};
		\node [style=none] (24) at (3.25, 0) {};
		\node [style=map] (25) at (3.25, 0) {$f$};
		\node [style=map] (27) at (4.25, 0) {$f$};
		\node [style=none] (28) at (3.25, 0.75) {};
		\node [style=none] (29) at (4.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (23.center) to (21);
		\draw [in=-90, out=30] (21) to (22.center);
		\draw [in=150, out=-90] (24.center) to (21);
		\draw (28.center) to (25);
		\draw (29.center) to (27);
	\end{pgfonlayer}
\end{tikzpicture} \ ,
\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (2, 0) {};
		\node [style=none] (2) at (2, -0.75) {};
		\node [style=map] (4) at (2, -0.75) {$f$};
		\node [style=none] (5) at (2, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2.center) to (0);
		\draw (5.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
\leq
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (6) at (3.75, -0.75) {};
		\node [style=none] (8) at (3.75, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (8.center) to (6);
	\end{pgfonlayer}
\end{tikzpicture}
$$

Where moreover, the diagonals and counits both have right adjoints:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (16) at (4.25, -1.5) {};
		\node [style=none] (17) at (3.25, -1.5) {};
		\node [style=none] (19) at (4.25, 0.75) {};
		\node [style=none] (20) at (3.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (16.center) to (19.center);
		\draw (20.center) to (17.center);
	\end{pgfonlayer}
\end{tikzpicture}
\leq
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (8) at (5.75, -0.75) {};
		\node [style=none] (9) at (6.25, -1.5) {};
		\node [style=none] (11) at (5.25, -1.5) {};
		\node [style=Z] (12) at (5.75, 0) {};
		\node [style=none] (13) at (6.25, 0.75) {};
		\node [style=none] (14) at (5.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (8) to (9.center);
		\draw [in=-150, out=90] (11.center) to (8);
		\draw [in=-90, out=30] (12) to (13.center);
		\draw [in=150, out=-90] (14.center) to (12);
		\draw (8) to (12);
	\end{pgfonlayer}
\end{tikzpicture}
\ , \hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0, 0) {};
		\node [style=Z] (1) at (0, 1) {};
		\node [style=none] (2) at (0, 1.5) {};
		\node [style=none] (3) at (0, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (0) to (3.center);
		\draw [bend left=45, looseness=1.25] (0) to (1);
		\draw [bend left=45, looseness=1.25] (1) to (0);
		\draw (1) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (6) at (1, 1.5) {};
		\node [style=none] (7) at (1, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (7.center) to (6.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (27) at (8.25, -1.5) {};
		\node [style=none] (29) at (8.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (27.center) to (29.center);
	\end{pgfonlayer}
\end{tikzpicture}
\leq
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (21) at (10, -0.75) {};
		\node [style=none] (23) at (10, -1.5) {};
		\node [style=Z] (24) at (10, 0) {};
		\node [style=none] (26) at (10, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (23.center) to (21);
		\draw (26.center) to (24);
	\end{pgfonlayer}
\end{tikzpicture} \ , \hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (21) at (10, -0.75) {};
		\node [style=Z] (24) at (10, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (24) to (21);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (2, 0) {};
		\node [style=none] (1) at (2, -1) {};
		\node [style=none] (2) at (3, -1) {};
		\node [style=none] (3) at (3, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw[style=dashed] (3.center) to (0.center) to (1.center) to (2.center) to cycle;
	\end{pgfonlayer}
\end{tikzpicture}
$$

And the monoids and comonoids are moreover required to form Frobenius algebras:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0.75, 0.5) {};
		\node [style=Z] (1) at (0, 1) {};
		\node [style=none] (2) at (0, 1.5) {};
		\node [style=none] (6) at (1, 1.5) {};
		\node [style=none] (7) at (-0.25, 0) {};
		\node [style=none] (8) at (0.75, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1) to (2.center);
		\draw [in=90, out=-120] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=60] (0) to (6.center);
		\draw (8.center) to (0);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (11) at (2.25, 1.5) {};
		\node [style=none] (12) at (3.25, 1.5) {};
		\node [style=none] (13) at (2.25, 0) {};
		\node [style=none] (14) at (3.25, 0) {};
		\node [style=Z] (15) at (2.75, 1) {};
		\node [style=Z] (16) at (2.75, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (15) to (11.center);
		\draw (15) to (12.center);
		\draw (15) to (16);
		\draw (16) to (13.center);
		\draw (14.center) to (16);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (17) at (4.5, 0.5) {};
		\node [style=Z] (18) at (5.25, 1) {};
		\node [style=none] (19) at (5.25, 1.5) {};
		\node [style=none] (20) at (4.25, 1.5) {};
		\node [style=none] (21) at (5.5, 0) {};
		\node [style=none] (22) at (4.5, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (18) to (19.center);
		\draw [in=90, out=-60] (18) to (21.center);
		\draw (17) to (18);
		\draw [in=-90, out=120] (17) to (20.center);
		\draw (22.center) to (17);
	\end{pgfonlayer}
\end{tikzpicture}
$$


From these other axioms, it follows that:


$$
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0, 2.5) {};
		\node [style=none] (1) at (1, 2.5) {};
		\node [style=Z] (2) at (0.5, 1.5) {};
		\node [style=none] (3) at (0.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (3.center) to (2);
		\draw [style=simple, in=-90, out=117] (2) to (0.center);
		\draw [style=simple, in=63, out=-90] (1.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0, 2.5) {};
		\node [style=Z] (1) at (1, 2.5) {};
		\node [style=none] (2) at (0.5, 1.5) {};
		\node [style=none] (3) at (0.5, 0.5) {};
		\node [style=none] (4) at (0, 3.5) {};
		\node [style=none] (5) at (1, 3.5) {};
		\node [style=none] (6) at (0, 4.5) {};
		\node [style=none] (7) at (1, 4.5) {};
		\node [style=otimes] (8) at (0.5, 1.5) {};
		\node [style=otimes] (9) at (1, 3.5) {};
		\node [style=otimes] (10) at (0, 3.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (3.center) to (2.center);
		\draw [style=simple, in=-90, out=135] (2.center) to (0);
		\draw [style=simple] (0) to (5.center);
		\draw [style=simple, in=120, out=-120, looseness=1.25] (4.center) to (0);
		\draw [style=simple, in=-60, out=60, looseness=1.25] (1) to (5.center);
		\draw [style=simple] (1) to (4.center);
		\draw [style=simple, in=45, out=-90] (1) to (2.center);
		\draw [style=simple] (4.center) to (6.center);
		\draw [style=simple] (5.center) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (2) at (1, 1.5) {};
		\node [style=none] (3) at (1, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (3.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (4) at (2.5, 2.5) {};
		\node [style=Z] (5) at (3.5, 2.5) {};
		\node [style=none] (6) at (3, 1.5) {};
		\node [style=none] (7) at (3, 0.5) {};
		\node [style=otimes] (12) at (3, 1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (7.center) to (6.center);
		\draw [style=simple, in=-90, out=135] (6.center) to (4);
		\draw [style=simple, in=45, out=-90] (5) to (6.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
$$
\begin{tikzpicture}[scale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (5.75, -0.75) {};
		\node [style=none] (1) at (6.25, 0) {};
		\node [style=none] (2) at (5.75, -1.5) {};
		\node [style=none] (3) at (5.25, 0) {};
		\node [style=none] (5) at (5.25, 0.75) {};
		\node [style=Z] (6) at (6.25, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2.center) to (0);
		\draw [in=-90, out=30] (0) to (1.center);
		\draw [in=150, out=-90] (3.center) to (0);
		\draw [in=270, out=90] (3.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (9) at (7.25, -1.5) {};
		\node [style=none] (11) at (7.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (11.center) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (5.75, -0.75) {};
		\node [style=none] (1) at (6.25, 0) {};
		\node [style=none] (2) at (5.75, -1.5) {};
		\node [style=none] (3) at (5.25, 0) {};
		\node [style=none] (5) at (5.25, 0.75) {};
		\node [style=Z] (6) at (6.25, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2.center) to (0);
		\draw [in=-90, out=30] (0) to (1.center);
		\draw [in=150, out=-90] (3.center) to (0);
		\draw [in=270, out=90] (3.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (21) at (3.75, -0.75) {};
		\node [style=none] (22) at (4.25, 0) {};
		\node [style=none] (23) at (3.75, -1.5) {};
		\node [style=none] (24) at (3.25, 0) {};
		\node [style=none] (28) at (3.25, 0.75) {};
		\node [style=none] (29) at (4.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (23.center) to (21);
		\draw [in=-90, out=30] (21) to (22.center);
		\draw [in=150, out=-90] (24.center) to (21);
		\draw [in=270, out=90] (22.center) to (28.center);
		\draw [in=270, out=90] (24.center) to (29.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (30) at (5.75, -0.75) {};
		\node [style=none] (31) at (6.25, 0) {};
		\node [style=none] (32) at (5.75, -1.5) {};
		\node [style=none] (33) at (5.25, 0) {};
		\node [style=none] (34) at (6.25, 0.75) {};
		\node [style=none] (35) at (5.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (32.center) to (30);
		\draw [in=-90, out=30] (30) to (31.center);
		\draw [in=150, out=-90] (33.center) to (30);
		\draw [in=270, out=90] (31.center) to (34.center);
		\draw [in=270, out=90] (33.center) to (35.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (12, 2) {};
		\node [style=none] (1) at (12.5, 1.25) {};
		\node [style=none] (2) at (11.5, 1.25) {};
		\node [style=none] (3) at (12, 2.75) {};
		\node [style=Z] (4) at (12.5, 1.25) {};
		\node [style=none] (5) at (13, 0.5) {};
		\node [style=none] (6) at (12, 0.5) {};
		\node [style=none] (7) at (11.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw (3.center) to (0);
		\draw [in=90, out=-150] (0) to (2.center);
		\draw [in=90, out=-30] (4) to (5.center);
		\draw [in=90, out=-150] (4) to (6.center);
		\draw (7.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (12, 2) {};
		\node [style=none] (1) at (12.5, 1.25) {};
		\node [style=none] (2) at (11.5, 1.25) {};
		\node [style=none] (3) at (12, 2.75) {};
		\node [style=Z] (4) at (12.5, 1.25) {};
		\node [style=none] (5) at (13, 0.5) {};
		\node [style=none] (6) at (12, 0.5) {};
		\node [style=none] (7) at (11.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw (3.center) to (0);
		\draw [in=90, out=-150] (0) to (2.center);
		\draw [in=90, out=-30] (4) to (5.center);
		\draw [in=90, out=-150] (4) to (6.center);
		\draw (7.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (3.75, 0) {};
		\node [style=none] (1) at (4.25, -0.75) {};
		\node [style=none] (2) at (3.75, 0.75) {};
		\node [style=none] (3) at (3.25, -0.75) {};
		\node [style=map] (4) at (3.25, -0.75) {$f$};
		\node [style=map] (5) at (4.25, -0.75) {$f$};
		\node [style=none] (6) at (3.25, -1.5) {};
		\node [style=none] (7) at (4.25, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2.center) to (0);
		\draw [in=90, out=-30] (0) to (1.center);
		\draw [in=-150, out=90] (3.center) to (0);
		\draw (6.center) to (4);
		\draw (7.center) to (5);
	\end{pgfonlayer}
\end{tikzpicture}
\leq
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (8) at (5.75, -0.75) {};
		\node [style=none] (9) at (6.25, -1.5) {};
		\node [style=none] (10) at (5.75, 0) {};
		\node [style=none] (11) at (5.25, -1.5) {};
		\node [style=map] (12) at (5.75, 0) {$f$};
		\node [style=none] (13) at (5.75, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (10.center) to (8);
		\draw [in=90, out=-30] (8) to (9.center);
		\draw [in=-150, out=90] (11.center) to (8);
		\draw (13.center) to (10.center);
	\end{pgfonlayer}
\end{tikzpicture}
 \ ,
\hspace*{.2cm}
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (6) at (3.75, -0.75) {};
		\node [style=none] (8) at (3.75, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (8.center) to (6);
	\end{pgfonlayer}
\end{tikzpicture}
\leq
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (9) at (4.75, -1.5) {};
		\node [style=none] (10) at (4.75, -0.75) {};
		\node [style=map] (11) at (4.75, -0.75) {$f$};
		\node [style=none] (12) at (4.75, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (10.center) to (9);
		\draw (12.center) to (10.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$


The category of comonoid homorphisms of a Cartesian bicategory of relations is Cartesian category $\Map(\X)$.
\end{definition}

Therefore, now we can nondeterministically and partially copy and delete things with the commutative comonoid structure; moreover the commutative monoid structure also allows us to nondeterministically and partially compare and ask for the existence of things.

TODO REGULAR LOGIC


Moreover, because cartesian bicategories of relations are equipped with a chosen compatible family of Frobenius algebras, we see that cartesian bicategories are \dag-compact closed.  The dagger and the transpose coincide.



Span is not a Cartesian bicategory of relations because it is not poset enriched (there can be more than one 2-cell between 1-cells); however it is a {\em Cartesian bicategory} (see \cite{carbonia}).  All of the equations now only hold up to coherent isomorphism, however the story is essentially the same. This is much more difficult to work with because this notion requires coherence conditions so we will omit this more general definition for the sake of brevity. 


As stated before, bicategories of relations subsume categories of internal relations:
\begin{example}
Given a regular category $\X$, $\Rel(\X)$ is a Cartesian bicategory of relations under the Cartesian product and $\Map(\Rel(\X))=\X$ is Cartesian.
\end{example}


We see that either the white and black Frobenius algebras of our presentations for $\LinRel_k$ can be regarded as the Frobenius algebra structure coming from viewing it as a bicategory of relations.  Similarly, for the white Frobenius algebra of  $\Aff\Rel$, but {\em not} the black one because addition and copying are no longer dual to each other.




There are classes of categories in between Cartesian categories and Cartesian bicategories of relations which capture partially invertible and partial deterministic notions of copying.  We review these notions and give examples which will serve to motivate their usage in quantum computing later in this thesis.



%Partial maps of sets are spans with left leg monic. Give span diagram with domain and function


First, we review the categorical semantics of partiality:

\label{sec:rest}

%Restriction and inverse categories provide a categorical semantics for partial computing and reversible computing, respectively.  We review how weakened products can be constructed in both settings; relating one to the other.

\begin{definition}\cite[\S 2.1.1]{cockett}
A {\bf restriction category} is a category along with a restriction operator:

\hfil
$
(A \xrightarrow{f} B )\mapsto (A \xrightarrow{\bar f} A)
$\\
such that:

\begin{multicols}{2}
\begin{enumerate}[label={\bf [R.\arabic*]}, ref={\bf [R.\arabic*]}]
\item $\bar f ; f  = f$
\label{R.1}
\item $\bar f ; \bar g = \bar g ; \bar f$
\label{R.2}
\item $\bar f ; \bar g = \bar{\bar f ;  g}$
\label{R.3}
\item $f ; \bar g = \bar{f; g} ; f$
\label{R.4}
\end{enumerate}
\end{multicols}

Maps of the form $\bar f$ are called restriction idempotents.
The canonical example of a restriction category is $\Par$, sets and partial maps.  The restriction in this case, just restricts partial functions to their domain of definition.


Restriction categories are poset enriched where $f \leq g \iff \bar f ; g = f$.


A map $f$ in a restriction category is called a {\bf partial isomorphism}, in case there exists a map $g$ called the partial inverse of $f$ so that $f;g=\bar f$ and $g;f = \bar g$.  Similarly, a map $f$ in a restriction category is {\bf total} if $\bar f =1$.  Denote the subcategories of partial isomorphisms and total maps of a restriction category $\X$, respectively by $\ParIso(\X)$ and $\Total(\X)$.



%A {\bf split restriction category} is a restriction category in which all restriction idempotents split.
\end{definition}

%
%One can augment partiality with copying:
%
%\begin{example} \cite[p. 101]{pcat} \cite[\S 5]{restiii}
%A {\bf counital copy category} (or a p-category with a one element object) is a monoidal category with a family of commutative comonoids on every object compatible with the monoidal structure, with a natural comultiplication.  This gives a restriction via copying and then discarding:
%$$
%\begin{tikzpicture}
%	\begin{pgfonlayer}{nodelayer}
%		\node [style=none] (0) at (0.75, -2.5) {};
%		\node [style=none] (1) at (0.75, -0.5) {};
%		\node [style=map] (2) at (0.75, -1.5) {$\bar f$};
%	\end{pgfonlayer}
%	\begin{pgfonlayer}{edgelayer}
%		\draw [style=simple] (0.center) to (2);
%		\draw [style=simple] (2) to (1.center);
%	\end{pgfonlayer}
%\end{tikzpicture}
%:=
%\begin{tikzpicture}
%	\begin{pgfonlayer}{nodelayer}
%		\node [style=map] (0) at (0, 2.5) {$f$};
%		\node [style=Z] (1) at (0, 3.5) {};
%		\node [style=Z] (2) at (0.5, 1.5) {};
%		\node [style=none] (3) at (1, 3.5) {};
%		\node [style=none] (4) at (0.5, 0.5) {};
%	\end{pgfonlayer}
%	\begin{pgfonlayer}{edgelayer}
%		\draw [style=simple] (1) to (0);
%		\draw [style=simple, in=117, out=-90] (0) to (2);
%		\draw [style=simple] (2) to (4.center);
%		\draw [style=simple, in=-90, out=60] (2) to (3.center);
%	\end{pgfonlayer}
%\end{tikzpicture}
%$$
%\end{example}

There is a way to construct restriction categories in terms of a restricted category spans of spans internal to a category.  To do so, we need an abstract notion of domains:

\begin{definition}[{\cite[\S 3.1]{cockett}}]
A {\bf stable system of monics} $\M$ of $\X$ is a collection of monics in $\X$ containing all isomorphisms; where for any cospan $ X\xrightarrow{f} Z \xleftarrowtail{m} Y$  in $\X$, where $m'$ is in $\M$, the following pullback exists:

%\hfil$
%\xymatrixrowsep{.005in}
%\xymatrixcolsep{.13in}
%  \xymatrix{
%    W \ar[r]^{f'} \ar@{>->}[d]_{m'} & Y  \ar@{>->}[d]^m \\
%    X \ar[r]_{f} & Z
%  }
%$\\

$$
\xymatrixrowsep{.005in}
\xymatrixcolsep{.13in}
  \xymatrix{
  	& W \ar@{>->}[dl]_{m'} \ar[dr]^{f'}\\
  	X \ar[dr]_f &  & Y \ar@{>->}[dl]^m\\
  	& Z
  }
$$

Where $m'$ is in $\M$.

\end{definition}

Stable systems of monics allow one to represent the domains of definition of a partial functions as a subobjects:

\begin{definition}[{\cite[\S 3.1]{cockett}}]
Given a stable system of monics $\M$ in a category $\X$, the {\bf partial map category} $\Par(\X,\M)$ is given by the same objects as in $\X$ where morphisms $X\to Y$, given by isomorphism classes of spans $X\xleftarrowtail{m} Z \xrightarrow{f} Y$ where $f$ is a map in $\X$ and $m$ is a map in $\M$.  Composition is given by pullback and the identity is given by the trivial span.


Partial map categories have a restriction structure given by:  
$$(X\xleftarrowtail{m} \ Z \xrightarrow{f} Y) \mapsto (X\xleftarrowtail{m} \ Z\ \xrightarrowtail{m} X)$$  Moreover, a partial isomorphism is a span $X\xleftarrowtail{e}\ Z\  \xrightarrowtail{m} Y$ where $e,m \in \M$; the partial inverse given by  $Y\xleftarrowtail{m} \ Z  \ \xrightarrowtail{e} X$.
\end{definition}


$\Par$ is equivalently the partial map category $\Par(\Sets,\M)$ where $\M$ is all monics in $\Sets$.

To augment restriction categories with copying, one must relax the definition of a Cartesian category: 


\begin{definition}[{\cite{restiii}}]
A restriction category has {\bf binary restriction products}, when for all objects  $X,Y$, there exists an object $X\times Y$ and total maps $X \xleftarrow{\pi_0}  X\times Y \xrightarrow{\pi_1} Y$, so that for all objects $Z$ and all maps $X \xleftarrow{f} Z \xrightarrow{g} Y$, there exists a unique $Z\xrightarrow{\langle f,g \rangle} X\times Y$ making the diagram commute:
$$
\xymatrixrowsep{0.2cm}
\xymatrixcolsep{0.4cm}
\xymatrix{
&& Z\ar@{..>}[dd]|-{\langle f, g\rangle} \ar@/_/[ddll]_f \ar@/^/[ddrr]^g &&\\
& \ar@{}[dr]|-{\geq} && \ar@{}[dl] |-{\leq} &\\
X &&  X\times Y \ar[rr]_{\pi_1} \ar[ll]^{\pi_0}  && Y
}
$$

so that $\bar{\langle f, g\rangle ;\pi_0}; f = \langle f, g\rangle ;\pi_0$ and $\bar{\langle f, g\rangle; \pi_1} ;g = \langle f, g\rangle; \pi_1$;
where additionally $\bar{\langle f, g\rangle} =  \bar f ; \bar g$.

%%DRAW DIAGRAM
%\begin{center}
%\begin{tabular}{ccc}
%  $\langle f, g\rangle \pi_0 \leq f$ &
%  $\langle f, g\rangle \pi_1 \leq g$ &
%  $\bar{\langle f, g\rangle} =  \bar f \bar g$
%\end{tabular}
%\end{center}

A restriction category has a {\bf restriction terminal object} $\top$ when for all objects $X$, there exists a unique total map $!_X:X\to\top$ such that $f ; !_Y = \bar ;  f !_X$.

A restriction category with a restriction terminal object and binary restriction products is a {\bf Cartesian restriction category}.


An object $A$ in a restriction category with restriction products is {\bf discrete} when the diagonal map $\Delta_X:=\langle 1_X, 1_X\rangle$ is a partial isomorphism. A restriction category is discrete when all objects are discrete. 
\end{definition}



$\Par$ is a canonical example of a Cartesian restriction category; the restriction product is given by the Cartesian product on underlying sets and the terminal object is  the singleton set. In fact it is also discrete, because the converse of the diagonal relation is a partial function. We can do the same thing that we did with Cartesian categories and categories of relations:




\begin{theorem}[{\cite[Thm. 5.2]{restiii}}]
Cartesian restriction categories are in bijection with symmetric monoidal categories equipped with a supply of (co)commutative comonoids:
$$
\begin{tikzpicture}[xscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (5.75, -0.75) {};
		\node [style=none] (1) at (6.25, 0) {};
		\node [style=none] (2) at (5.75, -1.5) {};
		\node [style=none] (3) at (5.25, 0) {};
		\node [style=none] (5) at (5.25, 0.75) {};
		\node [style=Z] (6) at (6.25, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2.center) to (0);
		\draw [in=-90, out=30] (0) to (1.center);
		\draw [in=150, out=-90] (3.center) to (0);
		\draw [in=270, out=90] (3.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (9) at (7.25, -1.5) {};
		\node [style=none] (11) at (7.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (11.center) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (5.75, -0.75) {};
		\node [style=none] (1) at (6.25, 0) {};
		\node [style=none] (2) at (5.75, -1.5) {};
		\node [style=none] (3) at (5.25, 0) {};
		\node [style=none] (5) at (5.25, 0.75) {};
		\node [style=Z] (6) at (6.25, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2.center) to (0);
		\draw [in=-90, out=30] (0) to (1.center);
		\draw [in=150, out=-90] (3.center) to (0);
		\draw [in=270, out=90] (3.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (12, 2) {};
		\node [style=none] (1) at (12.5, 1.25) {};
		\node [style=none] (2) at (11.5, 1.25) {};
		\node [style=none] (3) at (12, 2.75) {};
		\node [style=Z] (4) at (12.5, 1.25) {};
		\node [style=none] (5) at (13, 0.5) {};
		\node [style=none] (6) at (12, 0.5) {};
		\node [style=none] (7) at (11.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw (3.center) to (0);
		\draw [in=90, out=-150] (0) to (2.center);
		\draw [in=90, out=-30] (4) to (5.center);
		\draw [in=90, out=-150] (4) to (6.center);
		\draw (7.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[scale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (12, 2) {};
		\node [style=none] (1) at (12.5, 1.25) {};
		\node [style=none] (2) at (11.5, 1.25) {};
		\node [style=none] (3) at (12, 2.75) {};
		\node [style=Z] (4) at (12.5, 1.25) {};
		\node [style=none] (5) at (13, 0.5) {};
		\node [style=none] (6) at (12, 0.5) {};
		\node [style=none] (7) at (11.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw (3.center) to (0);
		\draw [in=90, out=-150] (0) to (2.center);
		\draw [in=90, out=-30] (4) to (5.center);
		\draw [in=90, out=-150] (4) to (6.center);
		\draw (7.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (21) at (3.75, -0.75) {};
		\node [style=none] (22) at (4.25, 0) {};
		\node [style=none] (23) at (3.75, -1.5) {};
		\node [style=none] (24) at (3.25, 0) {};
		\node [style=none] (28) at (3.25, 0.75) {};
		\node [style=none] (29) at (4.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (23.center) to (21);
		\draw [in=-90, out=30] (21) to (22.center);
		\draw [in=150, out=-90] (24.center) to (21);
		\draw [in=270, out=90] (22.center) to (28.center);
		\draw [in=270, out=90] (24.center) to (29.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (30) at (5.75, -0.75) {};
		\node [style=none] (31) at (6.25, 0) {};
		\node [style=none] (32) at (5.75, -1.5) {};
		\node [style=none] (33) at (5.25, 0) {};
		\node [style=none] (34) at (6.25, 0.75) {};
		\node [style=none] (35) at (5.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (32.center) to (30);
		\draw [in=-90, out=30] (30) to (31.center);
		\draw [in=150, out=-90] (33.center) to (30);
		\draw [in=270, out=90] (31.center) to (34.center);
		\draw [in=270, out=90] (33.center) to (35.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
Compatible with the monoidal structure:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0, 2.5) {};
		\node [style=none] (1) at (1, 2.5) {};
		\node [style=Z] (2) at (0.5, 1.5) {};
		\node [style=none] (3) at (0.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (3.center) to (2);
		\draw [style=simple, in=-90, out=117] (2) to (0.center);
		\draw [style=simple, in=63, out=-90] (1.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0, 2.5) {};
		\node [style=Z] (1) at (1, 2.5) {};
		\node [style=none] (2) at (0.5, 1.5) {};
		\node [style=none] (3) at (0.5, 0.5) {};
		\node [style=none] (4) at (0, 3.5) {};
		\node [style=none] (5) at (1, 3.5) {};
		\node [style=none] (6) at (0, 4.5) {};
		\node [style=none] (7) at (1, 4.5) {};
		\node [style=otimes] (8) at (0.5, 1.5) {};
		\node [style=otimes] (9) at (1, 3.5) {};
		\node [style=otimes] (10) at (0, 3.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (3.center) to (2.center);
		\draw [style=simple, in=-90, out=135] (2.center) to (0);
		\draw [style=simple] (0) to (5.center);
		\draw [style=simple, in=120, out=-120, looseness=1.25] (4.center) to (0);
		\draw [style=simple, in=-60, out=60, looseness=1.25] (1) to (5.center);
		\draw [style=simple] (1) to (4.center);
		\draw [style=simple, in=45, out=-90] (1) to (2.center);
		\draw [style=simple] (4.center) to (6.center);
		\draw [style=simple] (5.center) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (2) at (1, 1.5) {};
		\node [style=none] (3) at (1, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (3.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (4) at (2.5, 2.5) {};
		\node [style=Z] (5) at (3.5, 2.5) {};
		\node [style=none] (6) at (3, 1.5) {};
		\node [style=none] (7) at (3, 0.5) {};
		\node [style=otimes] (12) at (3, 1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (7.center) to (6.center);
		\draw [style=simple, in=-90, out=135] (6.center) to (4);
		\draw [style=simple, in=45, out=-90] (5) to (6.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$


Where the comultiplication is moreover required to be natural, so that:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (12) at (2, 0) {};
		\node [style=none] (15) at (2.5, 0.75) {};
		\node [style=none] (17) at (2, -0.75) {};
		\node [style=none] (18) at (1.5, 0.75) {};
		\node [style=map] (19) at (2, -0.75) {$f$};
		\node [style=none] (20) at (2, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (17.center) to (12);
		\draw [in=-90, out=30] (12) to (15.center);
		\draw [in=150, out=-90] (18.center) to (12);
		\draw (20.center) to (17.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (21) at (3.75, -0.75) {};
		\node [style=none] (22) at (4.25, 0) {};
		\node [style=none] (23) at (3.75, -1.5) {};
		\node [style=none] (24) at (3.25, 0) {};
		\node [style=map] (25) at (3.25, 0) {$f$};
		\node [style=map] (27) at (4.25, 0) {$f$};
		\node [style=none] (28) at (3.25, 0.75) {};
		\node [style=none] (29) at (4.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (23.center) to (21);
		\draw [in=-90, out=30] (21) to (22.center);
		\draw [in=150, out=-90] (24.center) to (21);
		\draw (28.center) to (25);
		\draw (29.center) to (27);
	\end{pgfonlayer}
\end{tikzpicture}
$$


The restriction is defined as follows:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (7) at (-1.75, 0.75) {$\bar f$};
		\node [style=none] (10) at (-1.75, 2) {};
		\node [style=none] (11) at (-1.75, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (11.center) to (7);
		\draw (7) to (10.center);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0, 0) {};
		\node [style=map] (1) at (-0.5, 0.75) {$f$};
		\node [style=Z] (2) at (-0.5, 1.5) {};
		\node [style=none] (3) at (0.5, 0.75) {};
		\node [style=none] (4) at (0.5, 1.75) {};
		\node [style=none] (5) at (0, -0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (5.center) to (0);
		\draw [in=-90, out=150] (0) to (1);
		\draw (1) to (2);
		\draw [in=-90, out=30] (0) to (3.center);
		\draw (3.center) to (4.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

Discrete Cartesian restriction categories therefore have retract to the diagonal map, which is cocommutative due to the commutativity of the diagonal map:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0, 0) {};
		\node [style=Z] (1) at (0, 1) {};
		\node [style=none] (2) at (0, 1.5) {};
		\node [style=none] (3) at (0, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (0) to (3.center);
		\draw [bend left=45, looseness=1.25] (0) to (1);
		\draw [bend left=45, looseness=1.25] (1) to (0);
		\draw (1) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (6) at (1, 1.5) {};
		\node [style=none] (7) at (1, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (7.center) to (6.center);
	\end{pgfonlayer}
\end{tikzpicture}\ ,
\hspace*{.2cm}
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0, 2.5) {};
		\node [style=none] (1) at (1, 2.5) {};
		\node [style=Z] (2) at (0.5, 1.5) {};
		\node [style=none] (3) at (0.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (3.center) to (2);
		\draw [style=simple, in=-90, out=117] (2) to (0.center);
		\draw [style=simple, in=63, out=-90] (1.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0, 2.5) {};
		\node [style=Z] (1) at (1, 2.5) {};
		\node [style=none] (2) at (0.5, 1.5) {};
		\node [style=none] (3) at (0.5, 0.5) {};
		\node [style=none] (4) at (0, 3.5) {};
		\node [style=none] (5) at (1, 3.5) {};
		\node [style=none] (6) at (0, 4.5) {};
		\node [style=none] (7) at (1, 4.5) {};
		\node [style=otimes] (8) at (0.5, 1.5) {};
		\node [style=otimes] (9) at (1, 3.5) {};
		\node [style=otimes] (10) at (0, 3.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (3.center) to (2.center);
		\draw [style=simple, in=-90, out=135] (2.center) to (0);
		\draw [style=simple] (0) to (5.center);
		\draw [style=simple, in=120, out=-120, looseness=1.25] (4.center) to (0);
		\draw [style=simple, in=-60, out=60, looseness=1.25] (1) to (5.center);
		\draw [style=simple] (1) to (4.center);
		\draw [style=simple, in=45, out=-90] (1) to (2.center);
		\draw [style=simple] (4.center) to (6.center);
		\draw [style=simple] (5.center) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}\ ,
\hspace{.2cm}
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (21) at (3.75, -0.75) {};
		\node [style=none] (22) at (4.25, 0) {};
		\node [style=none] (23) at (3.75, -1.5) {};
		\node [style=none] (24) at (3.25, 0) {};
		\node [style=none] (28) at (3.25, 0.75) {};
		\node [style=none] (29) at (4.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (23.center) to (21);
		\draw [in=-90, out=30] (21) to (22.center);
		\draw [in=150, out=-90] (24.center) to (21);
		\draw [in=270, out=90] (22.center) to (28.center);
		\draw [in=270, out=90] (24.center) to (29.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (30) at (5.75, -0.75) {};
		\node [style=none] (31) at (6.25, 0) {};
		\node [style=none] (32) at (5.75, -1.5) {};
		\node [style=none] (33) at (5.25, 0) {};
		\node [style=none] (34) at (6.25, 0.75) {};
		\node [style=none] (35) at (5.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (32.center) to (30);
		\draw [in=-90, out=30] (30) to (31.center);
		\draw [in=150, out=-90] (33.center) to (30);
		\draw [in=270, out=90] (31.center) to (34.center);
		\draw [in=270, out=90] (33.center) to (35.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

And is which moreover, interacts to form a semi-Frobenius algebra with the diagonal map due to the naturality of the diagonal map:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0.75, 0.5) {};
		\node [style=Z] (1) at (0, 1) {};
		\node [style=none] (2) at (0, 1.5) {};
		\node [style=none] (6) at (1, 1.5) {};
		\node [style=none] (7) at (-0.25, 0) {};
		\node [style=none] (8) at (0.75, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1) to (2.center);
		\draw [in=90, out=-120] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=60] (0) to (6.center);
		\draw (8.center) to (0);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (11) at (2.25, 1.5) {};
		\node [style=none] (12) at (3.25, 1.5) {};
		\node [style=none] (13) at (2.25, 0) {};
		\node [style=none] (14) at (3.25, 0) {};
		\node [style=Z] (15) at (2.75, 1) {};
		\node [style=Z] (16) at (2.75, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (15) to (11.center);
		\draw (15) to (12.center);
		\draw (15) to (16);
		\draw (16) to (13.center);
		\draw (14.center) to (16);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (17) at (4.5, 0.5) {};
		\node [style=Z] (18) at (5.25, 1) {};
		\node [style=none] (19) at (5.25, 1.5) {};
		\node [style=none] (20) at (4.25, 1.5) {};
		\node [style=none] (21) at (5.5, 0) {};
		\node [style=none] (22) at (4.5, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (18) to (19.center);
		\draw [in=90, out=-60] (18) to (21.center);
		\draw (17) to (18);
		\draw [in=-90, out=120] (17) to (20.center);
		\draw (22.center) to (17);
	\end{pgfonlayer}
\end{tikzpicture}
$$


 
\end{theorem}




By forcing the looking at the subcategory on which the unit acts naturally,  we obtain a Cartesian category:

\begin{proposition} 
\label{prop:cartesian}
If $\X$ is a  Cartesian restriction category, then $\Total(\X)$ is Cartesian.
\end{proposition}

Discrete Cartesian restriction categories are a deterministic, yet partial version of relations:

\begin{lemma}
The category of comultiplication homorphisms of a Cartesian bicategory of relations is a discrete Cartesian restriction category.
\end{lemma}

Let us refine the notion of a restriction category:

\begin{definition}[{\cite[\S 2.3.2]{cockett}}]
An {\bf inverse category} is a restriction category in which all maps are partial isomorphisms.
\end{definition}

\begin{example}
The subcategory of partial isomorphisms of $\Par$ is  $\Pinj$.
\end{example}

Inverse categories are particular kinds of \dag-categories:

\begin{theorem}[{\cite[Thm. 2.20]{cockett}}]
A restriction category $\X$ is an inverse category if and only if there is a dagger functor $(\_)^\circ:\X^\op\to\X$ such that for all $X\xleftarrow{f} Z \xrightarrow{g} Y$:
\begin{center}
\begin{tabular}{cc}
 $f; f^\circ ; f = f$ & 
 $f ; f ^\circ ;g; g^\circ = g;g^\circ ; f; f ^\circ $
\end{tabular}
\end{center}
\end{theorem}

The dagger functor takes maps to their partial inverse.
The unitary maps in an inverse category are the total maps.


Sets and partial injections are intimately related to Hilbert spaces.  The following functor was first discovered by \cite{barr}; later studied in much more detail in \cite{elltwo}:

\begin{definition}
There is a \dag-symmetric monoidal embedding $\ell^2:\Pinj\to\Hilb$ taking:

\begin{description}
\item[Objects:] Sets $X$ are taken to the Hilbert space of square-integrable functions on $X$:

$$
\ell^2(X):=\left\{\phi:X\to \C  \ \bigl\vert \sum_{x\in X} \ \left|\phi(x)\right|^2 < \infty \right\}
$$

\item[Maps:] Given a partial injection $f=X \xleftarrowtail{f_0} \ A \  \xrightarrowtail{f_1} Z$ and some $\phi:X\to \C$ in $\ell^2(X)$

$$
(\ell^2(f)(\phi))(y) = \sum_{x\in f_1^{-1}(y)} \phi(f_0(x))
$$ 

\end{description}

The partial inverse is mapped to the Hermetian adjoint.
\end{definition}


The category of partial injections is special in the sense that there is an embedding into $\ell^2$. This does not generalize to sets and functions.  However, it can be modified to yield a functor from finite sets and functions/finite sets and spans into $\FHilb$, where all maps are bounded.  We will extensively use such embeddings throughout this thesis.


We also have a deterministic partially invertible notion of copying:



\begin{definition}[{\cite[Def. 4.3.1]{giles}}]
A symmetric monoidal inverse category $\X$ is a {\bf discrete inverse category} when it is a dagger symmetric monoidal  category, 
equipped commutative semigroup and cocommutative cosemigroup on every object which are daggers of each other:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (21) at (3.75, -0.75) {};
		\node [style=none] (22) at (4.25, 0) {};
		\node [style=none] (23) at (3.75, -1.5) {};
		\node [style=none] (24) at (3.25, 0) {};
		\node [style=none] (28) at (3.25, 0.75) {};
		\node [style=none] (29) at (4.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (23.center) to (21);
		\draw [in=-90, out=30] (21) to (22.center);
		\draw [in=150, out=-90] (24.center) to (21);
		\draw [in=270, out=90] (22.center) to (28.center);
		\draw [in=270, out=90] (24.center) to (29.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (30) at (5.75, -0.75) {};
		\node [style=none] (31) at (6.25, 0) {};
		\node [style=none] (32) at (5.75, -1.5) {};
		\node [style=none] (33) at (5.25, 0) {};
		\node [style=none] (34) at (6.25, 0.75) {};
		\node [style=none] (35) at (5.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (32.center) to (30);
		\draw [in=-90, out=30] (30) to (31.center);
		\draw [in=150, out=-90] (33.center) to (30);
		\draw [in=270, out=90] (31.center) to (34.center);
		\draw [in=270, out=90] (33.center) to (35.center);
	\end{pgfonlayer}
\end{tikzpicture}\ ,
\hspace*{.2cm}
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (12, 2) {};
		\node [style=none] (1) at (12.5, 1.25) {};
		\node [style=none] (2) at (11.5, 1.25) {};
		\node [style=none] (3) at (12, 2.75) {};
		\node [style=Z] (4) at (12.5, 1.25) {};
		\node [style=none] (5) at (13, 0.5) {};
		\node [style=none] (6) at (12, 0.5) {};
		\node [style=none] (7) at (11.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw (3.center) to (0);
		\draw [in=90, out=-150] (0) to (2.center);
		\draw [in=90, out=-30] (4) to (5.center);
		\draw [in=90, out=-150] (4) to (6.center);
		\draw (7.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[scale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (12, 2) {};
		\node [style=none] (1) at (12.5, 1.25) {};
		\node [style=none] (2) at (11.5, 1.25) {};
		\node [style=none] (3) at (12, 2.75) {};
		\node [style=Z] (4) at (12.5, 1.25) {};
		\node [style=none] (5) at (13, 0.5) {};
		\node [style=none] (6) at (12, 0.5) {};
		\node [style=none] (7) at (11.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw (3.center) to (0);
		\draw [in=90, out=-150] (0) to (2.center);
		\draw [in=90, out=-30] (4) to (5.center);
		\draw [in=90, out=-150] (4) to (6.center);
		\draw (7.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (21) at (3.75, -0.75) {};
		\node [style=none] (22) at (4.25, 0) {};
		\node [style=none] (23) at (3.75, -1.5) {};
		\node [style=none] (24) at (3.25, 0) {};
		\node [style=none] (28) at (3.25, 0.75) {};
		\node [style=none] (29) at (4.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (23.center) to (21);
		\draw [in=-90, out=30] (21) to (22.center);
		\draw [in=150, out=-90] (24.center) to (21);
		\draw [in=270, out=90] (22.center) to (28.center);
		\draw [in=270, out=90] (24.center) to (29.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (30) at (5.75, -0.75) {};
		\node [style=none] (31) at (6.25, 0) {};
		\node [style=none] (32) at (5.75, -1.5) {};
		\node [style=none] (33) at (5.25, 0) {};
		\node [style=none] (34) at (6.25, 0.75) {};
		\node [style=none] (35) at (5.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (32.center) to (30);
		\draw [in=-90, out=30] (30) to (31.center);
		\draw [in=150, out=-90] (33.center) to (30);
		\draw [in=270, out=90] (31.center) to (34.center);
		\draw [in=270, out=90] (33.center) to (35.center);
	\end{pgfonlayer}
\end{tikzpicture}\ ,
\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (12, 2) {};
		\node [style=none] (1) at (12.5, 1.25) {};
		\node [style=none] (2) at (11.5, 1.25) {};
		\node [style=none] (3) at (12, 2.75) {};
		\node [style=Z] (4) at (12.5, 1.25) {};
		\node [style=none] (5) at (13, 0.5) {};
		\node [style=none] (6) at (12, 0.5) {};
		\node [style=none] (7) at (11.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw (3.center) to (0);
		\draw [in=90, out=-150] (0) to (2.center);
		\draw [in=90, out=-30] (4) to (5.center);
		\draw [in=90, out=-150] (4) to (6.center);
		\draw (7.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (12, 2) {};
		\node [style=none] (1) at (12.5, 1.25) {};
		\node [style=none] (2) at (11.5, 1.25) {};
		\node [style=none] (3) at (12, 2.75) {};
		\node [style=Z] (4) at (12.5, 1.25) {};
		\node [style=none] (5) at (13, 0.5) {};
		\node [style=none] (6) at (12, 0.5) {};
		\node [style=none] (7) at (11.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw (3.center) to (0);
		\draw [in=90, out=-150] (0) to (2.center);
		\draw [in=90, out=-30] (4) to (5.center);
		\draw [in=90, out=-150] (4) to (6.center);
		\draw (7.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
Compatible with the monoidal structure:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0, 2.5) {};
		\node [style=none] (1) at (1, 2.5) {};
		\node [style=Z] (2) at (0.5, 1.5) {};
		\node [style=none] (3) at (0.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (3.center) to (2);
		\draw [style=simple, in=-90, out=117] (2) to (0.center);
		\draw [style=simple, in=63, out=-90] (1.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0, 2.5) {};
		\node [style=Z] (1) at (1, 2.5) {};
		\node [style=none] (2) at (0.5, 1.5) {};
		\node [style=none] (3) at (0.5, 0.5) {};
		\node [style=none] (4) at (0, 3.5) {};
		\node [style=none] (5) at (1, 3.5) {};
		\node [style=none] (6) at (0, 4.5) {};
		\node [style=none] (7) at (1, 4.5) {};
		\node [style=otimes] (8) at (0.5, 1.5) {};
		\node [style=otimes] (9) at (1, 3.5) {};
		\node [style=otimes] (10) at (0, 3.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (3.center) to (2.center);
		\draw [style=simple, in=-90, out=135] (2.center) to (0);
		\draw [style=simple] (0) to (5.center);
		\draw [style=simple, in=120, out=-120, looseness=1.25] (4.center) to (0);
		\draw [style=simple, in=-60, out=60, looseness=1.25] (1) to (5.center);
		\draw [style=simple] (1) to (4.center);
		\draw [style=simple, in=45, out=-90] (1) to (2.center);
		\draw [style=simple] (4.center) to (6.center);
		\draw [style=simple] (5.center) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}\ ,
\hspace*{.2cm}
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0, 2.5) {};
		\node [style=none] (1) at (1, 2.5) {};
		\node [style=Z] (2) at (0.5, 1.5) {};
		\node [style=none] (3) at (0.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (3.center) to (2);
		\draw [style=simple, in=-90, out=117] (2) to (0.center);
		\draw [style=simple, in=63, out=-90] (1.center) to (2);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0, 2.5) {};
		\node [style=Z] (1) at (1, 2.5) {};
		\node [style=none] (2) at (0.5, 1.5) {};
		\node [style=none] (3) at (0.5, 0.5) {};
		\node [style=none] (4) at (0, 3.5) {};
		\node [style=none] (5) at (1, 3.5) {};
		\node [style=none] (6) at (0, 4.5) {};
		\node [style=none] (7) at (1, 4.5) {};
		\node [style=otimes] (8) at (0.5, 1.5) {};
		\node [style=otimes] (9) at (1, 3.5) {};
		\node [style=otimes] (10) at (0, 3.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (3.center) to (2.center);
		\draw [style=simple, in=-90, out=135] (2.center) to (0);
		\draw [style=simple] (0) to (5.center);
		\draw [style=simple, in=120, out=-120, looseness=1.25] (4.center) to (0);
		\draw [style=simple, in=-60, out=60, looseness=1.25] (1) to (5.center);
		\draw [style=simple] (1) to (4.center);
		\draw [style=simple, in=45, out=-90] (1) to (2.center);
		\draw [style=simple] (4.center) to (6.center);
		\draw [style=simple] (5.center) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
Where the comonoid and monoid are natural so that 
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (12) at (2, 0) {};
		\node [style=none] (15) at (2.5, 0.75) {};
		\node [style=none] (17) at (2, -0.75) {};
		\node [style=none] (18) at (1.5, 0.75) {};
		\node [style=map] (19) at (2, -0.75) {$f$};
		\node [style=none] (20) at (2, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (17.center) to (12);
		\draw [in=-90, out=30] (12) to (15.center);
		\draw [in=150, out=-90] (18.center) to (12);
		\draw (20.center) to (17.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (21) at (3.75, -0.75) {};
		\node [style=none] (22) at (4.25, 0) {};
		\node [style=none] (23) at (3.75, -1.5) {};
		\node [style=none] (24) at (3.25, 0) {};
		\node [style=map] (25) at (3.25, 0) {$f$};
		\node [style=map] (27) at (4.25, 0) {$f$};
		\node [style=none] (28) at (3.25, 0.75) {};
		\node [style=none] (29) at (4.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (23.center) to (21);
		\draw [in=-90, out=30] (21) to (22.center);
		\draw [in=150, out=-90] (24.center) to (21);
		\draw (28.center) to (25);
		\draw (29.center) to (27);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,
\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (30) at (5.75, -0.75) {};
		\node [style=none] (31) at (6.25, -1.5) {};
		\node [style=none] (32) at (5.75, 0) {};
		\node [style=none] (33) at (5.25, -1.5) {};
		\node [style=map] (34) at (5.75, 0) {$f$};
		\node [style=none] (35) at (5.75, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (32.center) to (30);
		\draw [in=90, out=-30] (30) to (31.center);
		\draw [in=-150, out=90] (33.center) to (30);
		\draw (35.center) to (32.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (36) at (7.5, 0) {};
		\node [style=none] (37) at (8, -0.75) {};
		\node [style=none] (38) at (7.5, 0.75) {};
		\node [style=none] (39) at (7, -0.75) {};
		\node [style=map] (40) at (7, -0.75) {$f$};
		\node [style=map] (41) at (8, -0.75) {$f$};
		\node [style=none] (42) at (7, -1.5) {};
		\node [style=none] (43) at (8, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (38.center) to (36);
		\draw [in=90, out=-30] (36) to (37.center);
		\draw [in=-150, out=90] (39.center) to (36);
		\draw (42.center) to (40);
		\draw (43.center) to (41);
	\end{pgfonlayer}
\end{tikzpicture}
$$

Where the commutative semigroup and cocommutative cosemigroup  interact to form a $\dag$-semi-Frobenius algebra:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0.75, 0.5) {};
		\node [style=Z] (1) at (0, 1) {};
		\node [style=none] (2) at (0, 1.5) {};
		\node [style=none] (6) at (1, 1.5) {};
		\node [style=none] (7) at (-0.25, 0) {};
		\node [style=none] (8) at (0.75, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1) to (2.center);
		\draw [in=90, out=-120] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=60] (0) to (6.center);
		\draw (8.center) to (0);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (11) at (2.25, 1.5) {};
		\node [style=none] (12) at (3.25, 1.5) {};
		\node [style=none] (13) at (2.25, 0) {};
		\node [style=none] (14) at (3.25, 0) {};
		\node [style=Z] (15) at (2.75, 1) {};
		\node [style=Z] (16) at (2.75, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (15) to (11.center);
		\draw (15) to (12.center);
		\draw (15) to (16);
		\draw (16) to (13.center);
		\draw (14.center) to (16);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (17) at (4.5, 0.5) {};
		\node [style=Z] (18) at (5.25, 1) {};
		\node [style=none] (19) at (5.25, 1.5) {};
		\node [style=none] (20) at (4.25, 1.5) {};
		\node [style=none] (21) at (5.5, 0) {};
		\node [style=none] (22) at (4.5, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (18) to (19.center);
		\draw [in=90, out=-60] (18) to (21.center);
		\draw (17) to (18);
		\draw [in=-90, out=120] (17) to (20.center);
		\draw (22.center) to (17);
	\end{pgfonlayer}
\end{tikzpicture}
$$

Which is also special:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0, 0) {};
		\node [style=Z] (1) at (0, 1) {};
		\node [style=none] (2) at (0, 1.5) {};
		\node [style=none] (3) at (0, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (0) to (3.center);
		\draw [bend left=45, looseness=1.25] (0) to (1);
		\draw [bend left=45, looseness=1.25] (1) to (0);
		\draw (1) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (6) at (1, 1.5) {};
		\node [style=none] (7) at (1, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (7.center) to (6.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

\end{definition}

\begin{lemma}[{\cite[Lemma 4.3.5]{giles}}]
In a discrete inverse category, restriction idempotents are strengths for the multiplication and comultiplication so that:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (3, 1.75) {};
		\node [style=map] (1) at (3, 1) {$\bar f$};
		\node [style=none] (2) at (3, 0.5) {};
		\node [style=none] (3) at (2.5, 2.5) {};
		\node [style=none] (4) at (3.5, 2.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple, in=63, out=-90] (4.center) to (0);
		\draw [style=simple, in=-90, out=117] (0) to (3.center);
		\draw [style=simple] (1) to (0);
		\draw [style=simple] (1) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (3, 2) {};
		\node [style=none] (1) at (3, 1.5) {};
		\node [style=none] (2) at (2.5, 3) {};
		\node [style=none] (3) at (3.5, 3) {};
		\node [style=map] (4) at (2.5, 3) {$\bar f$};
		\node [style=none] (5) at (3.5, 3.5) {};
		\node [style=none] (6) at (2.5, 3.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple, in=63, out=-90] (3.center) to (0);
		\draw [style=simple, in=-90, out=117] (0) to (2.center);
		\draw [style=simple] (6.center) to (2.center);
		\draw [style=simple] (5.center) to (3.center);
		\draw [style=simple] (0) to (1.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (3, 2) {};
		\node [style=none] (1) at (3, 1.5) {};
		\node [style=none] (2) at (3.5, 3) {};
		\node [style=none] (3) at (2.5, 3) {};
		\node [style=map] (4) at (3.5, 3) {$\bar f$};
		\node [style=none] (5) at (2.5, 3.5) {};
		\node [style=none] (6) at (3.5, 3.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple, in=117, out=-90] (3.center) to (0);
		\draw [style=simple, in=-90, out=63] (0) to (2.center);
		\draw [style=simple] (6.center) to (2.center);
		\draw [style=simple] (5.center) to (3.center);
		\draw [style=simple] (0) to (1.center);
	\end{pgfonlayer}
\end{tikzpicture}
\hspace*{.6cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (3, 3) {};
		\node [style=none] (1) at (3, 3.5) {};
		\node [style=none] (2) at (3.5, 2) {};
		\node [style=none] (3) at (2.5, 2) {};
		\node [style=map] (4) at (3.5, 2) {$\bar f$};
		\node [style=none] (5) at (2.5, 1.5) {};
		\node [style=none] (6) at (3.5, 1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple, in=-117, out=90] (3.center) to (0);
		\draw [style=simple, in=90, out=-63] (0) to (2.center);
		\draw [style=simple] (6.center) to (2.center);
		\draw [style=simple] (5.center) to (3.center);
		\draw [style=simple] (0) to (1.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (3, 3) {};
		\node [style=none] (1) at (3, 3.5) {};
		\node [style=none] (2) at (2.5, 2) {};
		\node [style=none] (3) at (3.5, 2) {};
		\node [style=map] (4) at (2.5, 2) {$\bar f$};
		\node [style=none] (5) at (3.5, 1.5) {};
		\node [style=none] (6) at (2.5, 1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple, in=-63, out=90] (3.center) to (0);
		\draw [style=simple, in=90, out=-117] (0) to (2.center);
		\draw [style=simple] (6.center) to (2.center);
		\draw [style=simple] (5.center) to (3.center);
		\draw [style=simple] (0) to (1.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (3, 1.25) {};
		\node [style=map] (1) at (3, 2) {$\bar f$};
		\node [style=none] (2) at (3, 2.5) {};
		\node [style=none] (3) at (2.5, 0.5) {};
		\node [style=none] (4) at (3.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple, in=-63, out=90] (4.center) to (0);
		\draw [style=simple, in=90, out=-117] (0) to (3.center);
		\draw [style=simple] (1) to (0);
		\draw [style=simple] (1) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
\end{lemma}


Discrete inverse categories are the canonical notion of weakened products for monoidal inverse categories:

\begin{lemma}[{\cite[Proposition 4.3.7]{giles}}]
Similarly the subcategory of  semi-Frobenius algebra homorphisms of a discrete Cartesian restriction category (the partial isomorphisms) is a discrete inverse category.
\end{lemma}



At least as far as the literature is concerned, the other direction is not so trivial.  We will first introduce the more copara construction, which freely adds an effect to every object in a way that is compatible with the tensor product:


\begin{definition}
Given a symmetric monoidal category $\X$, the copara construction, $\CoPara(\X)$ is the symmetric monoidal category obtained by freely adding maps $X\to I$ for every object $X$, compatible with the tensor unit:

\begin{description}
\item[Objects:] Same as in $\X$.

\item[Maps:]  
\hfil $
\dfrac{ X\xrightarrow{f} Y \otimes S \in \X           }
         { X\xrightarrow{(f,S)} Y \in  \CoPara(\X) }
$

\item[Composition:]
\hfil $
\dfrac{X\xrightarrow{(f,S)} Y , \hspace*{.5cm} Y\xrightarrow{(g,T)} Z }
         {(f,S);(g;T) := (f;(g\otimes 1_S);\alpha^{-1}_{Z,S,T} ,S\otimes T) } 
$

\hfil Or in proof net notation:
\hspace*{.5cm}
$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (0, 1.5) {$f$};
		\node [style=none] (1) at (-0.5, 2.5) {};
		\node [style=none] (2) at (0.5, 2.5) {};
		\node [style=none] (3) at (0, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=117, out=-90] (1.center) to (0);
		\draw [in=-90, out=63] (0) to (2.center);
		\draw (0) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}
;
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (0, 1.5) {$g$};
		\node [style=none] (1) at (-0.5, 2.5) {};
		\node [style=none] (2) at (0.5, 2.5) {};
		\node [style=none] (3) at (0, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=117, out=-90] (1.center) to (0);
		\draw [in=-90, out=63] (0) to (2.center);
		\draw (0) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (0, 1.5) {$f$};
		\node [style=none] (1) at (0.5, 2.5) {};
		\node [style=none] (2) at (0, 0.5) {};
		\node [style=map] (3) at (-0.5, 2.5) {$g$};
		\node [style=none] (4) at (-1, 3.5) {};
		\node [style=otimes] (5) at (0, 3.5) {};
		\node [style=none] (6) at (-0.5, 2.5) {};
		\node [style=none] (7) at (-1, 4.5) {};
		\node [style=none] (8) at (0, 4.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=63] (0) to (1.center);
		\draw (0) to (2.center);
		\draw [in=117, out=-90] (4.center) to (3);
		\draw (3) to (5);
		\draw [in=117, out=-90] (6.center) to (0);
		\draw [in=-63, out=90] (1.center) to (5);
		\draw (5) to (8.center);
		\draw (4.center) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}
$

\item[Identity:]

$$
\dfrac{ 1_X \in  \CoPara(\X)}{(u^R_X)^{-1} \in \X}
$$
\hfil Or in proof net notation:
\hspace*{.5cm}
$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (71) at (12.25, -0.75) {};
		\node [style=none] (72) at (11.25, -0.75) {};
		\node [style=none] (73) at (11.75, -1.5) {};
		\node [style=none] (74) at (11.75, -2.25) {};
		\node [style=none] (75) at (11.25, -0.5) {$X$};
		\node [style=none] (76) at (11.75, -2.5) {$X\otimes I$};
		\node [style=otimes] (77) at (11.75, -1.5) {};
		\node [style=unit] (78) at (12.25, -0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (74.center) to (73.center);
		\draw [in=-90, out=30] (73.center) to (71.center);
		\draw [in=-90, out=150] (73.center) to (72.center);
	\end{pgfonlayer}
\end{tikzpicture}
$

\item[Tensor product:]\

\hspace*{-2cm}
$
\dfrac{X\xrightarrow{(f,S)} Y, \hspace*{.5cm} Z\xrightarrow{(g,T)} W}
{(f,S)\otimes (g;T) := ((f\otimes g);(1_{X\otimes S} \otimes c_{W,T});\alpha_{X,S,T\otimes W};(1_X\otimes \alpha_{S,T,W}^{-1};(c_{S,T}));\alpha_{Y,W,S\otimes T}^{-1} ,S\otimes T)} 
$

\hfil Or in proof net notation:
\hspace*{.5cm}
$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (0, 1.5) {$f$};
		\node [style=none] (1) at (-0.5, 2.5) {};
		\node [style=none] (2) at (0.5, 2.5) {};
		\node [style=none] (3) at (0, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=117, out=-90] (1.center) to (0);
		\draw [in=-90, out=63] (0) to (2.center);
		\draw (0) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}
\otimes
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (0, 1.5) {$g$};
		\node [style=none] (1) at (-0.5, 2.5) {};
		\node [style=none] (2) at (0.5, 2.5) {};
		\node [style=none] (3) at (0, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=117, out=-90] (1.center) to (0);
		\draw [in=-90, out=63] (0) to (2.center);
		\draw (0) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (9) at (3.5, 1.5) {$f$};
		\node [style=map] (13) at (4.5, 1.5) {$g$};
		\node [style=otimes] (17) at (4.5, 2.5) {};
		\node [style=otimes] (18) at (3.5, 2.5) {};
		\node [style=otimes] (190) at (4, 0.75) {};
		\node  (19) at (4, 0.75) {};
		\node [style=none] (20) at (3.5, 3) {};
		\node [style=none] (21) at (4.5, 3) {};
		\node [style=none] (22) at (4, 0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (13) to (18);
		\draw [bend right] (18) to (9);
		\draw (9) to (17);
		\draw [bend left] (17) to (13);
		\draw [in=45, out=-90] (13) to (19);
		\draw [in=-90, out=135] (19) to (9);
		\draw (21.center) to (17);
		\draw (22.center) to (19);
		\draw (18) to (20.center);
	\end{pgfonlayer}
\end{tikzpicture}
$


\item[Tensor unit:]\

$$
\dfrac{ I \in  \CoPara(\X)}{ 1_{I\otimes I}\in \X}
$$

\hfil Or in proof net notation:
\hspace*{.5cm}
$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (11.25, 2) {};
		\node [style=none] (1) at (12.25, 2) {};
		\node [style=none] (2) at (11.75, 1.25) {};
		\node [style=none] (3) at (11.75, 0.5) {};
		\node [style=none] (4) at (12.25, 2.25) {$I$};
		\node [style=none] (5) at (11.75, 0.25) {$I\otimes I$};
		\node [style=otimes] (6) at (11.75, 1.25) {};
		\node [style=none] (7) at (11.25, 2.25) {$I$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (3.center) to (2.center);
		\draw [in=-90, out=150] (2.center) to (0.center);
		\draw [in=-90, out=30] (2.center) to (1.center);
	\end{pgfonlayer}
\end{tikzpicture}
$

\end{description}
\end{definition}

The coherence data for the monoidal structure is inherited in a straightforward way from $\X$. Moreover, if $\X$ is symmetric monoidal, then it is easy to see how ${\CoPara}(\X)$ is as well.  Indeed ${\CoPara}(\X)$ is merely freely adding generators to the monoidal theory of $\X$.  However, variations on this theme will occur throughout this thesis, so we have promoted it to its own construction; for example: 

\begin{definition}\cite[Def. 5.1.1]{giles}
Given a discrete inverse category $\X$,  its {\bf Cartesian completion} $\tilde \X$ is the quotient of ${\CoPara}(\X)$ by either of the following equivalent symmetric monoidal congruence relations:
$$
(f,S)\sim(g,T) \iff
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (0, 1.5) {$f$};
		\node [style=none] (1) at (0, 0.5) {};
		\node [style=map] (2) at (0, 3) {$f^\circ$};
		\node [style=map] (3) at (0, 4) {$g$};
		\node [style=Z] (4) at (-0.5, 2.25) {};
		\node [style=Z] (5) at (-0.5, 5) {};
		\node [style=none] (6) at (-0.5, 6) {};
		\node [style=none] (7) at (0.25, 6) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (0) to (1.center);
		\draw [in=75, out=-90] (7.center) to (3);
		\draw (6.center) to (5);
		\draw [in=120, out=-120] (5) to (4);
		\draw (4) to (2);
		\draw [in=60, out=-60, looseness=1.25] (2) to (0);
		\draw (0) to (4);
		\draw (3) to (2);
		\draw (3) to (5);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (0, 1.5) {$g$};
		\node [style=none] (1) at (-0.5, 2.5) {};
		\node [style=none] (2) at (0.5, 2.5) {};
		\node [style=none] (3) at (0, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=117, out=-90] (1.center) to (0);
		\draw [in=-90, out=63] (0) to (2.center);
		\draw (0) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}
\hspace*{.3cm}
or
\hspace*{.3cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (0, 1.5) {$g$};
		\node [style=none] (1) at (0, 0.5) {};
		\node [style=map] (2) at (0, 3) {$g^\circ$};
		\node [style=map] (3) at (0, 4) {$f$};
		\node [style=Z] (4) at (-0.5, 2.25) {};
		\node [style=Z] (5) at (-0.5, 5) {};
		\node [style=none] (6) at (-0.5, 6) {};
		\node [style=none] (7) at (0.25, 6) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (0) to (1.center);
		\draw [in=75, out=-90] (7.center) to (3);
		\draw (6.center) to (5);
		\draw [in=120, out=-120] (5) to (4);
		\draw (4) to (2);
		\draw [in=60, out=-60, looseness=1.25] (2) to (0);
		\draw (0) to (4);
		\draw (3) to (2);
		\draw (3) to (5);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (0, 1.5) {$f$};
		\node [style=none] (1) at (-0.5, 2.5) {};
		\node [style=none] (2) at (0.5, 2.5) {};
		\node [style=none] (3) at (0, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=117, out=-90] (1.center) to (0);
		\draw [in=-90, out=63] (0) to (2.center);
		\draw (0) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

$\tilde \X$ has the structure of a discrete Cartesian restriction category with:
\begin{description}

\item[Restriction product:]
\hfil
$
\langle f,g \rangle:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (-0.25, 2.5) {$f$};
		\node [style=none] (1) at (-0.25, 3.5) {};
		\node [style=none] (2) at (0.75, 3.5) {};
		\node [style=none] (3) at (-0.25, 3.5) {};
		\node [style=map] (4) at (0.75, 2.5) {$g$};
		\node [style=none] (5) at (0.75, 3.5) {};
		\node [style=otimes] (6) at (0.75, 3.5) {};
		\node [style=otimes] (7) at (-0.25, 3.5) {};
		\node [style=Z] (8) at (0.25, 1.5) {};
		\node [style=none] (9) at (-0.25, 4.5) {};
		\node [style=none] (10) at (0.75, 4.5) {};
		\node [style=none] (11) at (0.25, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple, in=117, out=-120] (1.center) to (0);
		\draw [style=simple] (2.center) to (0);
		\draw [style=simple] (3.center) to (4);
		\draw [style=simple, in=63, out=-60] (5.center) to (4);
		\draw [style=simple, in=56, out=-90] (4) to (8);
		\draw [style=simple, in=-90, out=124] (8) to (0);
		\draw [style=simple] (9.center) to (1.center);
		\draw [style=simple] (2.center) to (10.center);
		\draw [style=simple] (8) to (11.center);
	\end{pgfonlayer}
\end{tikzpicture}
$

\item[Restriction terminal map:]
\hfil
$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (2) at (11.75, -0.25) {};
		\node [style=none] (3) at (11.75, -1.25) {};
		\node [style=none] (4) at (11.75, 0) {$X$};
		\node [style=none] (5) at (11.75, -1.5) {$X$};
		\node [style=none] (7) at (12.75, -0.75) {};
		\node [style=unit] (8) at (12.75, -0.75) {};
		\node [style=none] (9) at (12.75, -0.25) {};
		\node [style=none] (10) at (12.75, 0) {$I$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (3.center) to (2.center);
		\draw (7.center) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
$
\end{description}

\end{definition}



\begin{theorem}[{\cite[Thm. 5.2.6]{giles}}]
There is an equivalence of categories between the category of discrete inverse categories and the category of discrete Cartesian categories.


\end{theorem}
 This equivalence is witnessed on the one hand by the Cartesian completion and on the other by taking the wide subcategory of partial isomorphisms.

\begin{example}[{\cite[Ex. 5.3.3]{giles}}]
$\tilde \Pinj$ is $\Par$.
\end{example}
\begin{proof}
For a partial function $f:X\to Y$, $\{(x,(y,x)) | (x,y) \in f \}/\sim$ is a partial isomorphism.
\end{proof}



\begin{lemma}
\label{lemma:xtildefaithful}
The canonical functor $\iota:\X\to \tilde \X$ is faithful.
\end{lemma}

\begin{proof}
Suppose that $\iota(f)\sim\iota(g)$, Then:


\begin{align*}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (-0.5, 1.5) {$g$};
		\node [style=none] (1) at (-0.5, 2.5) {};
		\node [style=none] (2) at (-0.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (0);
		\draw (0) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
&=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (-0.5, 1.25) {$f$};
		\node [style=none] (1) at (-0.5, 0.5) {};
		\node [style=map] (2) at (-0.25, 3) {$f^\circ$};
		\node [style=map] (3) at (-0.25, 3.75) {$g$};
		\node [style=Z] (4) at (-0.5, 2) {};
		\node [style=Z] (5) at (-0.5, 4.75) {};
		\node [style=none] (6) at (-0.5, 5.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (0) to (1.center);
		\draw (6.center) to (5);
		\draw [in=120, out=-120, looseness=0.75] (5) to (4);
		\draw [in=-90, out=56] (4) to (2);
		\draw (0) to (4);
		\draw (3) to (2);
		\draw [in=-63, out=90] (3) to (5);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (-0.5, 0.5) {};
		\node [style=map] (1) at (-0.25, 4.5) {$g$};
		\node [style=Z] (2) at (-0.5, 2.75) {};
		\node [style=Z] (3) at (-0.5, 5.5) {};
		\node [style=none] (4) at (-0.5, 6.5) {};
		\node [style=map] (5) at (-0.25, 3.75) {$f^\circ$};
		\node [style=map] (6) at (-0.5, 1.25) {$f$};
		\node [style=map] (7) at (-0.5, 2) {$f^\circ f$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (4.center) to (3);
		\draw [in=120, out=-120, looseness=0.75] (3) to (2);
		\draw [in=-63, out=90] (1) to (3);
		\draw [in=-90, out=56] (2) to (5);
		\draw (1) to (5);
		\draw [style=simple] (2) to (7);
		\draw [style=simple] (7) to (6);
		\draw [style=simple] (6) to (0.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (-0.5, 0.5) {};
		\node [style=map] (1) at (0, 4) {$g$};
		\node [style=Z] (2) at (-0.5, 2.25) {};
		\node [style=Z] (3) at (-0.5, 5) {};
		\node [style=none] (4) at (-0.5, 6) {};
		\node [style=map] (5) at (0, 3.25) {$f^\circ$};
		\node [style=map] (6) at (-0.5, 1.25) {$f$};
		\node [style=map] (7) at (-1, 3.25) {$f^\circ f$};
		\node [style=none] (8) at (-1, 4) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (4.center) to (3);
		\draw [in=-60, out=90] (1) to (3);
		\draw [in=-90, out=56] (2) to (5);
		\draw (1) to (5);
		\draw [style=simple] (6) to (0.center);
		\draw [style=simple, in=-90, out=120] (2) to (7);
		\draw [style=simple] (2) to (6);
		\draw [style=simple, in=90, out=-120] (3) to (8.center);
		\draw [style=simple] (8.center) to (7);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (-0.5, 0.5) {};
		\node [style=map] (1) at (0, 3.25) {$g$};
		\node [style=Z] (2) at (-0.5, 2.25) {};
		\node [style=Z] (3) at (-0.5, 4.25) {};
		\node [style=none] (4) at (-0.5, 5.25) {};
		\node [style=map] (5) at (-0.5, 1.25) {$ff^\circ$};
		\node [style=map] (6) at (-1, 3.25) {$f$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (4.center) to (3);
		\draw [in=-60, out=90] (1) to (3);
		\draw [style=simple] (5) to (0.center);
		\draw [style=simple, in=-90, out=120] (2) to (6);
		\draw [style=simple] (2) to (5);
		\draw [style=simple, in=60, out=-90] (1) to (2);
		\draw [style=simple, in=90, out=-120] (3) to (6);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (-0.5, 0.5) {};
		\node [style=map] (1) at (0, 3.25) {$g$};
		\node [style=Z] (2) at (-0.5, 1.5) {};
		\node [style=Z] (3) at (-0.5, 4.25) {};
		\node [style=none] (4) at (-0.5, 5.25) {};
		\node [style=map] (5) at (-1, 3.25) {$f$};
		\node [style=map] (6) at (-1, 2.5) {$ff^\circ$};
		\node [style=none] (7) at (0, 2.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (4.center) to (3);
		\draw [in=-60, out=90] (1) to (3);
		\draw [style=simple, in=90, out=-120] (3) to (5);
		\draw (1) to (7.center);
		\draw [in=60, out=-90] (7.center) to (2);
		\draw (2) to (0.center);
		\draw [in=-90, out=120] (2) to (6);
		\draw (6) to (5);
	\end{pgfonlayer}
\end{tikzpicture}\\
&=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (-0.5, 0.5) {};
		\node [style=map] (1) at (0, 2.5) {$g$};
		\node [style=Z] (2) at (-0.5, 1.5) {};
		\node [style=Z] (3) at (-0.5, 3.5) {};
		\node [style=none] (4) at (-0.5, 4.5) {};
		\node [style=map] (5) at (-1, 2.5) {$f$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (4.center) to (3);
		\draw [in=-60, out=90] (1) to (3);
		\draw [style=simple, in=90, out=-120] (3) to (5);
		\draw (2) to (0.center);
		\draw [in=60, out=-90] (1) to (2);
		\draw [in=-90, out=120] (2) to (5);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1, 0.5) {};
		\node [style=Z] (2) at (1, 1) {};
		\node [style=Z] (3) at (1, 4) {};
		\node [style=none] (4) at (1, 4.5) {};
		\node [style=map] (7) at (1.5, 2.5) {$g$};
		\node [style=map] (8) at (0.5, 2.5) {$f$};
		\node [style=none] (9) at (0.5, 3.5) {};
		\node [style=none] (10) at (1.5, 3.5) {};
		\node [style=none] (11) at (0.5, 1.5) {};
		\node [style=none] (12) at (1.5, 1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (4.center) to (3);
		\draw (2) to (0.center);
		\draw [in=90, out=-90] (9.center) to (7);
		\draw [in=90, out=-90] (7) to (11.center);
		\draw [in=-90, out=90] (12.center) to (8);
		\draw [in=-90, out=90] (8) to (10.center);
		\draw [in=-15, out=90] (10.center) to (3);
		\draw [in=90, out=-165] (3) to (9.center);
		\draw [in=165, out=-90] (11.center) to (2);
		\draw [in=-90, out=15] (2) to (12.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (-0.5, 0.5) {};
		\node [style=map] (1) at (0, 2.5) {$f$};
		\node [style=Z] (2) at (-0.5, 1.5) {};
		\node [style=Z] (3) at (-0.5, 3.5) {};
		\node [style=none] (4) at (-0.5, 4.5) {};
		\node [style=map] (5) at (-1, 2.5) {$g$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (4.center) to (3);
		\draw [in=-60, out=90] (1) to (3);
		\draw [style=simple, in=90, out=-120] (3) to (5);
		\draw (2) to (0.center);
		\draw [in=60, out=-90] (1) to (2);
		\draw [in=-90, out=120] (2) to (5);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (-0.5, 1.25) {$g$};
		\node [style=none] (1) at (-0.5, 0.5) {};
		\node [style=map] (2) at (-0.25, 3) {$g^\circ$};
		\node [style=map] (3) at (-0.25, 3.75) {$f$};
		\node [style=Z] (4) at (-0.5, 2) {};
		\node [style=Z] (5) at (-0.5, 4.75) {};
		\node [style=none] (6) at (-0.5, 5.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (0) to (1.center);
		\draw (6.center) to (5);
		\draw [in=120, out=-120, looseness=0.75] (5) to (4);
		\draw [in=-90, out=56] (4) to (2);
		\draw (0) to (4);
		\draw (3) to (2);
		\draw [in=-63, out=90] (3) to (5);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (-0.5, 1.5) {$f$};
		\node [style=none] (1) at (-0.5, 2.5) {};
		\node [style=none] (2) at (-0.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (0);
		\draw (0) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
\end{align*}



\end{proof}

Obtaining Cartesian bicategories of relations from discrete inverse categories is more difficult.  We will discuss this later in the thesis.


Let us summarize the various notions of weakenings of Cartesian bicategories of relations in a table:


\hfil
\begin{tabular}{l|cccc}
                                                     & $\Delta$          & $!$             & $\Delta^*$         & $!^*$\\
\hline
Discrete inverse category            & nat &  & nat  & \\
Discrete Cartesian restriction category      & nat &  lax  & lax \\
Cartesian category                                      & nat & nat &   \\
Cartesian bicategory of relations & lax  & lax & lax & lax \\
\end{tabular}


\subsection{Composing props}
\label{subsec:internal}
%\begin{definition}
%\label{def:monad}
%%monad
%\end{definition}
%
%
%
%\begin{definition}
%\label{def:span}
%
%%bicategory of spans, cospans
%\end{definition}
%
%
%\begin{definition}
%\label{def:rel}
%
%%bicategory of relations, corelations
%\end{definition}



In this section we review some basic results regarding internal categories.  Unless explicitly referenced, the results and definitions of internal category theory contained within this chapter can be found within a standard textbook in category theory (eg. \cite{maclane}). 





One way to combine monoidal theories is via pushout.  We generalize the analagous result of \cite[Proposition 2.51]{ih} to the multicoloured setting"

\begin{lemma}
Take three (symmetric) monoidal theories

$$T_0=({\sf Ob}_0,\Sigma_0 ,E_0 ), \ T_1=({\sf Ob}_1,\Sigma_1 ,E_1 ), \ T_2=({\sf Ob}_2,\Sigma_2 ,E_2 )$$

such that $\bar{T_0}$ is a sub-pro(p) of both $\bar{T_1}$ and $\bar{T_2}$ and $\Sigma_0 \subseteq \Sigma_1,\Sigma_2$.
Then the pushout of the diagram $\bar{T_1} \leftarrow \bar{T_0} \rightarrow \bar{T_2}$  in the category of strict (symmetric) monoidal categories is presented by the (symmetric) monoidal theory:

$$
( {\sf Ob}_1 +_{{\sf Ob}_0} {\sf Ob}_2, \Sigma_0+\Sigma_1, E_1 \cup E_2 \cup E_3 )
$$

\end{lemma}

In practice, I iusually won't be so explicit about the pushout of (symmetric) monoidal theories.  Rather, I will present a set of generators and multiple equations between different subsets of generators.  Indeed, we have done this many times up to this point when glueing *symmetric) monoidal theories together.  However, there is a more refined notion of composition of pro(p)s.
 By regarding categories as certain monads, this machinery will allow us to compose categories via distributive law. 


\begin{definition}
\label{def:monad}
%Given a bicategory $\mathcal B$, there is a bicategory of monads in $\mathcal B$, $\Mnd({\mathcal B})$ with:
%
%\begin{description}
%\item[0-cells:]

Given a bicategory $\mathcal B$,  A {\bf monad} in $\mathcal B$ is a 0-cell $X$ and a 1-cell $T:X\to X$ in $\mathcal B$ equipped with 2-cells $\mu:T^2 \to T$ and $\eta:1_X\to T$ satisfying the associativity and unit laws:


\hfil$
\xymatrix{
T^3 \ar[r]^{T;\mu} \ar[d]_{\mu; T}
  & T^2 \ar[d]^\mu\\
T^2\ar[r]_{\mu} & T
}
\hspace*{1cm}
\xymatrix{
T \ar[r]^{\eta; T} \ar[d]_{ T;\eta} \ar@{=}[dr] & T^2 \ar[d]^\mu\\
T^2 \ar[r]_{\mu} & T
}
$

%
%\item[1-cells:] {\bf Monad maps} from $(X,T,\mu^T, \eta^T)\to (Y,S,\mu^S, \eta^S)$ are a 1-cell $F:X\to Y$ and a 2-cell $\lambda:F;S\to T;F$ satisfying the equations:
%
%\hfil$
%\xymatrix{
%F \ar[r]^{\eta^S;F} \ar[dr]_{F;\eta^T} 
%  & S;F \ar[d]^{\lambda}\\
%  &  F;T
%}
%\hspace*{1cm}
%\xymatrix{
%S^2; F \ar[r]^{S;\lambda} \ar[d]_{\mu^S;F}
% & S;F;T \ar[r] ^{\lambda; T}
% & F;T^2 \ar[d]^{F;\mu^T}\\
%S;F \ar[rr]_{\lambda}
% &
% & F;T
%}
%$
%\item[2-cells:] {\bf Intertwiners} between monad maps $(F,\lambda) \to (G;\chi)$ are 2-cells $\phi: F\to G$ such that:
%
%$$
%\xymatrix{
%S;F \ar[r]^{S;\phi} \ar[d]_{\lambda}
% & S;G \ar[d]^{\chi}\\
%F;T \ar[r]_{\phi;T}
% & G;T
%}
%$$
%\end{description}
\end{definition}



\begin{definition}
Given two monads $\mathbb{T}=(X,T,\mu^T, \eta^T)$ and $\mathbb{S}=(X,S,\mu^S, \eta^S)$, a distributive law of $S$ over $T$ is a 2-cell $\lambda:S;T\to T;S$ satisfying the following coherence equations:


\hfil
$
\xymatrix{
S \ar[dr]^{S;\eta^T} \ar[d]_{\eta^T;S}\\
 T;S \ar[r]_{\lambda}
 & S;T
}
\hspace*{1cm}
\xymatrix{
T^2;S \ar[r]^{T;\lambda} \ar[d]_{\mu^T;S}
 & T;S;T \ar[r]^{\lambda;T}
  & S;T;T \ar[d]^{S;\mu^T}\\
T;S \ar[rr]_{\lambda}
  & 
  &S;T
}
$

\hfil
$
\xymatrix{
S \ar[dr]^{\eta^S;T} \ar[d]_{T;\eta^S}\\
 T;S \ar[r]_{\lambda}
 & S;T
}
\hspace*{1cm}
\xymatrix{
T;S^2 \ar[r]^{\lambda;S} \ar[d]_{T;\mu^S}
 & S;T;S \ar[r]^{S;\lambda}
  & S;S;T \ar[d]^{\mu^S;T}\\
T;S \ar[rr]_{\lambda}
  & 
  &S;T
}
$
\end{definition}


\begin{lemma}
Given a distributive law of monads $\lambda:S;T\to T;S$,
$T;S$ has a monad structure with:

\begin{tabular}{lc}
{\bf unit:} & $\eta^{T;S}:=1_{X} \xrightarrow{\eta^T;\eta^S} T;S $\\
{\bf multiplication:} & $\mu^{T;S}:=(T;S)^2 \xrightarrow{1_X; \lambda ; 1_X} T;T;S;S \xrightarrow{\mu^T;\mu^S} T;S$
\end{tabular}

\end{lemma}

%Yang baxter


\begin{definition}
\label{def:internalcat}

%Internal category
Given a category $\mathcal V$ with finite pullbacks $\mathcal V$, a $\mathcal V$-{\bf internal category} is a monad in $\Span(\mathcal V)$.
\end{definition}


\begin{lemma}
\label{lem:internalcat}

Monads internal to $\Set$ are in bijection with small categories.
\end{lemma}

Let us upack this a bit.  A small category has a {\em set} $\sf Ob$ of objects, and a set {\sf Ar} of maps.  There is a map ${\sf dom}:{\sf Ar}\to {\sf Ob}$ which picks out the domain of maps and another map  ${\sf codom}:{\sf Ar}\to {\sf Ob}$ picking out the codomain.  That is to say, a span of sets:
$$
S=\xymatrix{
& {\sf Ar} \ar[dl]_{{\sf dom}} \ar[dr]^{\sf codom}\\
{\sf Ob} & & {\sf Ob}
}
$$

Composition of maps is a function which takes maps $f:X\to Y$ and $g:Y\to X$ to a new map $(f;g):X\to Y$.   This is asking for a 2-cell $\mu:S^2\to S$ in $\Span(\Set)$; the pullback picks out the composable maps.  The associativity of composition corresponds to the associativity of $\mu$ as a semigroup.
On the other hand, the unit of a small category is a function from ${\sf Ob}$ to $S$, picking out for every object $X$, a map $1_X$ with domain and codomain $X$ , that is to say, a 2-cell $\mu:1_{\sf Ob}\to S$.  The unitality of composition is the unitality of the monad.
The converse direction is the same.


In \cite{rosebrugh} they demonstrate that distributive laws of monads in  $\Span(\Set)$ correspond to strict factorization systems on the underlying internal category:  morphisms in the composite category $T;S$ of a distributive law $\lambda:S;T\to T;S$ can always be uniquely factored into the maps of $T$ followed by $S$.  


%One might hope that monad homorphisms correspond to functors between internal categories; however, these actually correspond to {\em cofunctors}.  Functors are instead tight maps in the  {\em double category} of monads of spans of sets; however, this is not so relevant for this thesis, so we will not give more detail.


By changing $\Set$ to another category, we can construct other sorts of internal categories: 

\begin{definition}
\label{def:monoid}
Let $\Mon$ denote the category with set-monoids as objects and monoid homorphisms as morphisms.
\end{definition}

Now every internal category is equipped with a tensor product given by the monoid structure of the set:


\begin{lemma}[{\cite[\S 2.3]{lack}}]
\label{def:internalmonoidalcat}

Monads in $\Span(\Mon)$ are in bijection with small monoidal categories.
\end{lemma}

Indeed, in analogy to the case for small catgories, a distributive law $\X;\Y$ of two small monoidal categories is precisely a way to combine the two theories, respecting their monoidal structure,  where the maps can be uniquely factored into maps in $\X$ followed by maps in $\Y$.

Distributive laws of monoidal theories yield a monoidal theory for the composite internal monoidal category. The two theories are combined,  plus rules to push the generators past each other (
This follows immediately from the analysis of distributive laws of props of \cite{lack}):

\begin{lemma}
Take two monoidal theories

$$
T_0=({\sf Ob},\Sigma_0 ,E_0 ), \ T_1=({\sf Ob},\Sigma_1 ,E_1 )
$$

With the same objects.  Regard their corresponding pros $\bar{T_0}$ and $\bar{T_1}$ as monads in $\Span(\Mon)$ such that there is a distributive $\lambda:\bar{T_0};\bar{T_1} \Rightarrow \bar{T_1};\bar{T_0}$.


Then the monoidal theory for the composite pro $\bar{T_1};\bar{T_0}$ is given by 
$$
({\sf Ob}, \Sigma_0\cup \Sigma_1, E_0\cup E_1 \cup E_\lambda)
$$

where $\lambda$ is the set of equations dictating the unique ways in which the maps in $T_0$ can be pushed past those in $T_1$.
\end{lemma}


Now we can see, for example, how the pro $\sfa$ arizes in this manner:

\begin{definition}
Consider the distributive law of pros of a comonoid $\zcirc$ over a monoid $\zcirc$:
\begin{align*}
\m; \m^\op;&
    \begin{tikzpicture}[rotate=90]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (-6.25, 0.25) {};
		\node [style=none] (1) at (-7, 0.25) {};
		\node [style=none] (2) at (-4.75, 0.25) {};
		\node [style=X] (3) at (-5.5, 0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (0) to (1.center);
		\draw (3) to (2.center);
		\draw [bend right, looseness=1.25] (3) to (0);
		\draw [bend right, looseness=1.25] (0) to (3);
	\end{pgfonlayer}
  \end{tikzpicture}
  \eqzxa{special}
  \begin{tikzpicture}[rotate=90]
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (-7, 0.25) {};
		\node [style=none] (1) at (-6, 0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (0.center);
	\end{pgfonlayer}
  \end{tikzpicture},
  \hspace*{.5cm}
  \begin{tikzpicture}[rotate=90]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (-7, -0) {};
		\node [style=X] (1) at (-6.25, 0.5) {};
		\node [style=none] (2) at (-7, 0.75) {};
		\node [style=none] (3) at (-7.75, 0.75) {};
		\node [style=none] (4) at (-7.75, -0) {};
		\node [style=none] (5) at (-6.25, -0.25) {};
		\node [style=none] (6) at (-5.5, -0.25) {};
		\node [style=none] (7) at (-5.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (6.center) to (5.center);
		\draw [in=-30, out=180, looseness=1.00] (5.center) to (0);
		\draw (1) to (0);
		\draw [in=0, out=150, looseness=1.00] (1) to (2.center);
		\draw (2.center) to (3.center);
		\draw (0) to (4.center);
		\draw (1) to (7.center);
	\end{pgfonlayer}
  \end{tikzpicture}
 =
  \begin{tikzpicture}[rotate=90,xscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (-7, -0) {};
		\node [style=X] (1) at (-6.25, 0.5) {};
		\node [style=none] (2) at (-7, 0.75) {};
		\node [style=none] (3) at (-7.75, 0.75) {};
		\node [style=none] (4) at (-7.75, -0) {};
		\node [style=none] (5) at (-6.25, -0.25) {};
		\node [style=none] (6) at (-5.5, -0.25) {};
		\node [style=none] (7) at (-5.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (6.center) to (5.center);
		\draw [in=-30, out=180, looseness=1.00] (5.center) to (0);
		\draw (1) to (0);
		\draw [in=0, out=150, looseness=1.00] (1) to (2.center);
		\draw (2.center) to (3.center);
		\draw (0) to (4.center);
		\draw (1) to (7.center);
	\end{pgfonlayer}
  \end{tikzpicture}
  \eqzxa{frob}
  \begin{tikzpicture}[rotate=90]
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (-4.75, -0.25) {};
		\node [style=X] (1) at (-5.5, -0) {};
		\node [style=none] (2) at (-7, -0.25) {};
		\node [style=X] (3) at (-6.25, 0) {};
		\node [style=none] (4) at (-4.75, 0.25) {};
		\node [style=none] (5) at (-7, 0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-30, out=180, looseness=1.25] (0.center) to (1);
		\draw (3) to (1);
		\draw [in=180, out=30, looseness=1.25] (1) to (4.center);
		\draw [in=0, out=-150, looseness=1.25] (3) to (2.center);
		\draw [in=0, out=150, looseness=1.25] (3) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
  \end{align*}

Which we recall is the  pro {\sf sfa} for the free {\bf special  Frobenius algebra}.

\end{definition}




%
%
%
%\begin{lemma}[{\cite[?]{lack}}]
%{\sfa} is a presentation for $(\Span^\sim(\FinOrdMonot^\op),+)$.
%\end{lemma}
%\begin{proof}
%The idea is that a given a two cospans, the pushout of the cospan in the middle induces a mapping taking cospans to spans in $\FinOrdMonot$, but we know that the skeleton of $\FinMonot$ is $\m$.  Therefore, it remains to check all of the critical pairs which occur in $\m^\op;\m$.  The special Frobenius laws are precisely the way to resolve these critical pairs and push the generators in $\m^\op$ past $\m$.
%\end{proof}
%


The unique normal form induced by this distributive law will be quite useful for the purposes of computation:



\begin{lemma}[Spider theorem]
Consider the free pro generated by a special Frobenius algebra $\xcirc$. Then the circuits generated by the connected components have a unique normal form. We use the spider notation on the right to refer to these simply connected components:


$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.5, 1.75) {};
		\node [style=none] (1) at (2.75, 1.75) {};
		\node [style=none] (2) at (2, 1.75) {};
		\node [style=none] (3) at (2.45, 1.75) {$\cdots$};
		\node [style=none] (4) at (2.75, 3.25) {};
		\node [style=none] (5) at (2, 3.25) {};
		\node [style=none] (6) at (1.5, 3.25) {};
		\node [style=none] (7) at (2.45, 3.25) {$\cdots$};
		\node [style=X] (8) at (2, 2.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=45] (8) to (4.center);
		\draw (8) to (5.center);
		\draw [in=135, out=-90] (6.center) to (8);
		\draw [in=90, out=-150] (8) to (0.center);
		\draw (2.center) to (8);
		\draw [in=90, out=-30] (8) to (1.center);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (1.25, 3) {};
		\node [style=X] (1) at (0.5, 4) {};
		\node [style=X] (2) at (1.25, 2.25) {};
		\node [style=X] (3) at (0.5, 1.25) {};
		\node [style=none] (4) at (1.5, 4) {};
		\node [style=none] (5) at (1.5, 1.25) {};
		\node [style=none] (6) at (0.25, 0.5) {};
		\node [style=none] (7) at (1.5, 4.75) {};
		\node [style=none] (8) at (1.5, 0.5) {};
		\node [style=none] (9) at (0.75, 4.75) {};
		\node [style=none] (10) at (0.25, 4.75) {};
		\node [style=none] (11) at (0.75, 0.5) {};
		\node [style=none] (12) at (1, 3.25) {};
		\node [style=none] (13) at (0.5, 3.75) {};
		\node [style=none] (14) at (0.5, 1.5) {};
		\node [style=none] (15) at (1, 2) {};
		\node [style=none] (16) at (0.75, 3.5) {$\ddots$};
		\node [style=none] (17) at (0.75, 1.75) {$\reflectbox{$\ddots$}$};
		\node [style=none] (18) at (1.2, 0.5) {$\cdots$};
		\node [style=none] (19) at (1.2, 4.75) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (7.center) to (4.center);
		\draw [in=105, out=-90] (10.center) to (1);
		\draw [in=60, out=-90, looseness=0.75] (4.center) to (0);
		\draw [in=-90, out=75] (1) to (9.center);
		\draw [in=300, out=90] (5.center) to (2);
		\draw [in=90, out=-120] (3) to (6.center);
		\draw [in=90, out=-60] (3) to (11.center);
		\draw (8.center) to (5.center);
		\draw (0) to (2);
		\draw (3) to (14.center);
		\draw (15.center) to (2);
		\draw (13.center) to (1);
		\draw (0) to (12.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

Because the connected circuits are reducible to each other, spiders connected by wires fuse:


$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (32) at (20.25, -0.5) {};
		\node [style=none] (33) at (19.25, -0.5) {};
		\node [style=none] (34) at (19.75, -0.5) {$\cdots$};
		\node [style=none] (35) at (19.25, -2.75) {};
		\node [style=X] (36) at (19.75, -1.25) {};
		\node [style=none] (37) at (20.75, -0.5) {};
		\node [style=none] (38) at (20.25, -2.75) {$\cdots$};
		\node [style=none] (39) at (19.75, -2.75) {};
		\node [style=X] (40) at (20.25, -2) {};
		\node [style=none] (41) at (20.75, -2.75) {};
		\node [style=none] (42) at (20, -1.5) {\reflectbox{$\ddots$}};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (35.center) to (36);
		\draw [in=-90, out=56] (36) to (32.center);
		\draw [in=124, out=-90] (33.center) to (36);
		\draw [in=-124, out=90] (39.center) to (40);
		\draw [in=90, out=-56] (40) to (41.center);
		\draw [in=-90, out=45] (40) to (37.center);
		\draw [bend right=45, looseness=1.25] (40) to (36);
		\draw [bend right=45, looseness=1.25] (36) to (40);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (11) at (4, -0.5) {};
		\node [style=none] (12) at (3, -0.5) {};
		\node [style=none] (13) at (3.5, -0.5) {$\cdots$};
		\node [style=none] (14) at (2.5, -2) {};
		\node [style=none] (15) at (3.5, -1.25) {};
		\node [style=none] (16) at (4.5, -0.5) {};
		\node [style=none] (17) at (3.5, -2) {$\cdots$};
		\node [style=none] (18) at (3, -2) {};
		\node [style=X] (19) at (3.5, -1.25) {};
		\node [style=none] (20) at (4, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-150, out=90] (14.center) to (15);
		\draw [in=-90, out=56] (15) to (11.center);
		\draw [in=124, out=-90] (12.center) to (15);
		\draw [in=-124, out=90] (18.center) to (19);
		\draw [in=90, out=-56] (19) to (20.center);
		\draw [in=-90, out=30] (19) to (16.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

In the case when the Frobenius algebra is not special, then the spider theorem only holds for simply connected circuits.  This does not arise from a distributive law of props, but rather a distributive law of polycategories, however, we won't go into any more detail.  For example, given a Frobenius algebra $\zcirc$:


$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.5, -0.5) {};
		\node [style=none] (1) at (0.5, -0.5) {};
		\node [style=none] (2) at (1, -0.5) {$\cdots$};
		\node [style=none] (3) at (0.5, -2.75) {};
		\node [style=Z] (4) at (1, -1.25) {};
		\node [style=none] (5) at (2, -0.5) {};
		\node [style=none] (6) at (1.5, -2.75) {$\cdots$};
		\node [style=none] (7) at (1, -2.75) {};
		\node [style=Z] (8) at (1.5, -2) {};
		\node [style=none] (9) at (2, -2.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-124, out=90] (3.center) to (4);
		\draw [in=-90, out=56] (4) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
		\draw [in=-90, out=56] (8) to (5.center);
		\draw (8) to (4);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (11) at (4, -0.5) {};
		\node [style=none] (12) at (3, -0.5) {};
		\node [style=none] (13) at (3.5, -0.5) {$\cdots$};
		\node [style=none] (14) at (2.5, -2) {};
		\node [style=none] (15) at (3.5, -1.25) {};
		\node [style=none] (16) at (4.5, -0.5) {};
		\node [style=none] (17) at (3.5, -2) {};
		\node [style=none] (18) at (3, -2) {};
		\node [style=Z] (19) at (3.5, -1.25) {};
		\node [style=none] (20) at (4, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-150, out=90] (14.center) to (15);
		\draw [in=-90, out=56] (15) to (11.center);
		\draw [in=124, out=-90] (12.center) to (15);
		\draw [in=-124, out=90] (18.center) to (19);
		\draw [in=90, out=-56] (19) to (20.center);
		\draw [in=-90, out=30] (19) to (16.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$


\end{lemma}



We want to be able to take distributive laws of two categories which both share some structure.  For example, what is the appropriate notion of distributive law of symmetric monoidal categories where the braiding of both categories are identified with each other?  For this, we need to work in bimodules of internal categories; where the shared structure shall act on both parts of the distributive law:



\begin{definition}
Given a bicategory $\mathcal B$ with coequalizers,
the bicategory of modules in $\mathcal B$, $\Mod(\mathcal{B})$ has:

\begin{description}
\item[\ \ 0-cells:] Monads in $\mathcal B$.
\item[\ \ 1-cells:] A $1$-cell between monads $\mathbb{T}=(X,T,\mu^T,\eta^T)\to \mathbb{S}=(Y,S,\mu^S,\eta^S)$ is a $(\mathbb{T},\mathbb{S})$-bimodule; that is, a 1-cell $F:X\to Y$ in $\mathcal B$ equipped with 2-cells $\tau:S;F\to F$ and $\rho:F;T\to F$ (the left and right actions, respectively) satisfying the following coherence equations: 


$$
\xymatrix{
 S;S;F \ar[r]^{\ \mu^S;F} \ar[d]_{S;\tau}
  & S;F \ar[d]^{\tau}
\\S;F \ar[r]_{\tau}
  &F
}
\hspace{.5cm}
\xymatrix{
  F \ar@{=}[dr] \ar[d]_{\eta^S;F} 
\\S;F \ar[r]_{\tau}
   & F
}
\hspace{.5cm}
\xymatrix{
 F;T;T \ar[r]^{\ F;\mu^T} \ar[d]_{\rho;T}
  & F;T \ar[d]^{\rho}
\\F;T \ar[r]_{\rho}
  &F
}
\hspace{.5cm}
\xymatrix{
  F \ar@{=}[dr] \ar[d]_{F;\eta^T} 
\\F;T \ar[r]_{\rho}
   & F
}
$$
$$
\xymatrix{
S;F;T \ar[r]^{S;\rho} \ar[d]_{\tau;T}
& S;F \ar[d]^{\tau}\\
F;T \ar[r]_{\rho}
& F
}
$$


Given a $(\mathbb{S},\mathbb{T})$-bimodule $(F,\tau,\rho)$ and a  $(\mathbb{T},\mathbb{U})$-bimodule $(G,\tau,\rho')$, the composite has 1-cell given by the coequalizer:

$$
\xymatrix{
F;T;G  \ar@<-.5ex>[r]_{T;\rho'} \ar@<.5ex>[r]^{\tau;T} & F;G \ar[r] &F \otimes_T G 
}
$$

with left and right actions induced by $\tau$ and $\rho'$.

The identity 1-cell on a monad is the monad itself considered as a bimodule over itself.

\item[\ \ 2-cells:] A 2-cell between $(\mathbb{S},\mathbb{T})$-bimodules $(F,\rho,\tau)\to (G,\rho',\tau')$ is a 2-cell $\phi:F\to G$ in $\mathcal{B}$ satisfying the following coherence conditions:

$$
\xymatrix{
  S;F \ar[r]^{\tau}  \ar[d]_{S;\phi}
   & F \ar[d]^{\phi}
\\S;G \ar[r]_{\tau'}
   &G
}
\hspace*{.5cm}
\xymatrix{
  F;T \ar[r]^{\rho}  \ar[d]_{\phi;T}
   & F \ar[d]^{\phi}
\\G;T \ar[r]_{\rho'}
   &G
}
$$

Composition and identities are given pointwise in $\mathcal B$.
\end{description}
\end{definition}

Now we can look at actions on internal categories:

\begin{definition}
\label{def:internalprof}
Given a category $\mathcal V$ with finite pullbacks and coequalizers preserving them, let $\mathcal V$-$\Prof:=\Mod(\Span(\mathcal V))$ denote the bicategory of $\mathcal V$-{\bf internal profunctors}.  
The 1-cells of $\Prof$ are called (internal) {\bf  profunctors}.
The tensor product of bimodules of internal categories is the (internal) {\bf coend}.
\end{definition}

The natural question arizes:  what is the minimal structure two multicoloured props can share?

\begin{definition}
Let $\P_X$ denote the free strict symmetric monoidal category with objects labelled by $X$. Where $\P$ is the prop generated by a single object.
\end{definition}


This structure allows us to regard multicoloured props as bimodules (the case of single sorted props was originally conisdered, but this is a slight generalization):


\begin{lemma}[{\cite[\S 4]{lack}}]
Every multicloloured prop generated by objects $\sf Ob$ can be identified with a monad in $\Mon$-$\Prof$ on the $0$-cell $\P_{\sf Ob}$.  
\end{lemma}

The canonical left and right actions merely absorb the braids of $\P_{\sf Ob}$ into the prop on the left and right.


%\begin{lemma}
%Given a $2$-category $\mathcal B$, a $0$-cell $X$ of $\mathcal B$ and a monad $\mathcal F$ on $\mathcal B$, then there is an equivalence:
%$$
%\Mnd(\Mod(\Span(\mathcal{B}))) \cong \mathcal{F}/\Mnd(\mathcal{B}(X,X))
%$$
%\end{lemma}


The folliwing characterization of distributive laws of props in terms of monoidal theories will prove to be useful for us.  This specific result does not appear to be in the literature, but it follows easily from \cite{lack,ih}:
\begin{lemma}
Take three symmetric monoidal theories

$$
T_0=({\sf Ob},\Sigma_0 ,E_0 ), \ T_1=({\sf Ob},\Sigma_1 ,E_1 ),  \ T_2=({\sf Ob},\Sigma_2 ,E_3 )
$$

With the same objects, where $\bar{T_2}$ embeds as a symmetric monoidal category within both $\bar{T_0}$ and $\bar{T_3}$.  Regard both $\bar{T_0}$ and $\bar{T_0}$ as  $\bar{T_2}$-bimodules, where the left and right actions are given by lifting the maps in $\bar{T_2}$ along this embedding.

Suppose there is a distributive law

$$
\lambda:\bar{T_0}\otimes_{\bar{T_2}} \bar{T_1}\Rightarrow \bar{T_1}\otimes_{\bar{T_2}} \bar{T_0}
$$

Then the induced prop $\bar{T_1}\otimes_{\bar{T_2}} \bar{T_0}$ is presented by a monoidal theory

$$
({\sf Ob}, \Sigma_0\cup \Sigma_1, E_0\cup E_1 \cup E_\lambda)
$$

where $E_\lambda$ is the set of equations dictating the unique ways in which the generators of $\Sigma_0$ can be pushed past those of $\Sigma_1$ up to the maps in the image of the embeddings $\bar{T_2}\rightarrow \bar{T_0}$ and $\bar{T_2}\rightarrow \bar{T_1}$.
\end{lemma}



\begin{example}[{\cite[\S 5.1]{lack}}]
Let $\inj$ be the prop generated by a single generator $0\to 1$ and no equations:


$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (57) at (8, -5) {};
		\node [style=none] (58) at (8, -4.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (57) to (58.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

And let $\surj$ denote the prop generated by a commutative semigroup:

$$
\begin{tikzpicture}[scale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (21) at (3.75, -0.75) {};
		\node [style=none] (22) at (4.25, 0) {};
		\node [style=none] (23) at (3.75, -1.5) {};
		\node [style=none] (24) at (3.25, 0) {};
		\node [style=none] (28) at (3.25, 0.75) {};
		\node [style=none] (29) at (4.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (23.center) to (21);
		\draw [in=-90, out=30] (21) to (22.center);
		\draw [in=150, out=-90] (24.center) to (21);
		\draw [in=270, out=90] (22.center) to (28.center);
		\draw [in=270, out=90] (24.center) to (29.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[scale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (30) at (5.75, -0.75) {};
		\node [style=none] (31) at (6.25, 0) {};
		\node [style=none] (32) at (5.75, -1.5) {};
		\node [style=none] (33) at (5.25, 0) {};
		\node [style=none] (34) at (6.25, 0.75) {};
		\node [style=none] (35) at (5.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (32.center) to (30);
		\draw [in=-90, out=30] (30) to (31.center);
		\draw [in=150, out=-90] (33.center) to (30);
		\draw [in=270, out=90] (31.center) to (34.center);
		\draw [in=270, out=90] (33.center) to (35.center);
	\end{pgfonlayer}
\end{tikzpicture}\ ,
\hspace*{.2cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (12, 2) {};
		\node [style=none] (1) at (12.5, 1.25) {};
		\node [style=none] (2) at (11.5, 1.25) {};
		\node [style=none] (3) at (12, 2.75) {};
		\node [style=X] (4) at (12.5, 1.25) {};
		\node [style=none] (5) at (13, 0.5) {};
		\node [style=none] (6) at (12, 0.5) {};
		\node [style=none] (7) at (11.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw (3.center) to (0);
		\draw [in=90, out=-150] (0) to (2.center);
		\draw [in=90, out=-30] (4) to (5.center);
		\draw [in=90, out=-150] (4) to (6.center);
		\draw (7.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (12, 2) {};
		\node [style=none] (1) at (12.5, 1.25) {};
		\node [style=none] (2) at (11.5, 1.25) {};
		\node [style=none] (3) at (12, 2.75) {};
		\node [style=X] (4) at (12.5, 1.25) {};
		\node [style=none] (5) at (13, 0.5) {};
		\node [style=none] (6) at (12, 0.5) {};
		\node [style=none] (7) at (11.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw (3.center) to (0);
		\draw [in=90, out=-150] (0) to (2.center);
		\draw [in=90, out=-30] (4) to (5.center);
		\draw [in=90, out=-150] (4) to (6.center);
		\draw (7.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}$$


$\inj$ is a presentation for the injections and $\surj$ the surjections in $\FinOrd\cong \FSets$ under the coprodcut.  Moreover, distributive law:

$$
\cm=\inj\otimes_\P \surj
$$
$$
\begin{tikzpicture}[xscale=-1,yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (5.75, -0.75) {};
		\node [style=none] (1) at (6.25, 0) {};
		\node [style=none] (2) at (5.75, -1.5) {};
		\node [style=none] (3) at (5.25, 0) {};
		\node [style=none] (5) at (5.25, 0.75) {};
		\node [style=X] (6) at (6.25, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2.center) to (0);
		\draw [in=-90, out=30] (0) to (1.center);
		\draw [in=150, out=-90] (3.center) to (0);
		\draw [in=270, out=90] (3.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (9) at (7.25, -1.5) {};
		\node [style=none] (11) at (7.25, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (11.center) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (5.75, -0.75) {};
		\node [style=none] (1) at (6.25, 0) {};
		\node [style=none] (2) at (5.75, -1.5) {};
		\node [style=none] (3) at (5.25, 0) {};
		\node [style=none] (5) at (5.25, 0.75) {};
		\node [style=X] (6) at (6.25, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2.center) to (0);
		\draw [in=-90, out=30] (0) to (1.center);
		\draw [in=150, out=-90] (3.center) to (0);
		\draw [in=270, out=90] (3.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
induces the prop for the commutative comonoid $\cm\cong \FinOrd\cong \FSets$.
\end{example}

That is to say, we can regard the epi-mono factorization system of finite sets as a distributive law.

Bicommutative bialgebras also arise in this way:

\begin{example}
Conside the distributive law $\cb$ between a monoid $\xcirc$ and comonoid $\zcirc$:
$$
\cm^\op  \otimes_\P \cm;
  \begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (-3.75, -1) {};
		\node [style=none] (1) at (-4, -1.75) {};
		\node [style=none] (2) at (-3.5, -1.75) {};
		\node [style=Z] (3) at (-3.75, -0.25) {};
		\node [style=none] (4) at (-4, 0.5) {};
		\node [style=none] (5) at (-3.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-60, looseness=1.00] (0) to (2.center);
		\draw [in=-120, out=90, looseness=1.00] (1.center) to (0);
		\draw (0) to (3);
		\draw [in=60, out=-90, looseness=1.00] (5.center) to (3);
		\draw [in=-90, out=120, looseness=1.00] (3) to (4.center);
	\end{pgfonlayer}
  \end{tikzpicture}
  \eref{bi.one}
  \begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (-4, 0.5) {};
		\node [style=Z] (1) at (-4, -0.25) {};
		\node [style=X] (2) at (-4.5, 0.5) {};
		\node [style=Z] (3) at (-4.5, -0.25) {};
		\node [style=none] (4) at (-4, -1) {};
		\node [style=none] (5) at (-4.5, -1) {};
		\node [style=none] (6) at (-4.5, 1.25) {};
		\node [style=none] (7) at (-4, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [bend left, looseness=1.25] (0) to (1);
		\draw [bend right, looseness=1.25] (2) to (3);
		\draw (1) to (2);
		\draw (3) to (0);
		\draw (0) to (7.center);
		\draw (6.center) to (2);
		\draw (3) to (5.center);
		\draw (4.center) to (1);
	\end{pgfonlayer}
\end{tikzpicture},
\hspace*{.5cm}
  \begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (-4, -0) {};
		\node [style=X] (1) at (-4, -0.75) {};
		\node [style=none] (2) at (-4.25, -1.5) {};
		\node [style=none] (3) at (-3.75, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-60, out=90, looseness=1.00] (3.center) to (1);
		\draw (1) to (0);
		\draw [in=90, out=-120, looseness=1.00] (1) to (2.center);
	\end{pgfonlayer}
  \end{tikzpicture}
   \eref{bi.two}
  \begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (-4.25, -0.75) {};
		\node [style=none] (1) at (-4.25, -1.5) {};
		\node [style=none] (2) at (-3.5, -1.5) {};
		\node [style=Z] (3) at (-3.5, -0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2.center) to (3);
		\draw (0) to (1.center);
	\end{pgfonlayer}
  \end{tikzpicture},
  \hspace*{.5cm}
   \begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (-4, -0) {};
		\node [style=Z] (1) at (-4, -0.75) {};
		\node [style=none] (2) at (-4.25, -1.5) {};
		\node [style=none] (3) at (-3.75, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-60, out=90, looseness=1.00] (3.center) to (1);
		\draw (1) to (0);
		\draw [in=90, out=-120, looseness=1.00] (1) to (2.center);
	\end{pgfonlayer}
  \end{tikzpicture}
  \erefop{bi.two}
   \begin{tikzpicture}[yscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (-4.25, -0.75) {};
		\node [style=none] (1) at (-4.25, -1.5) {};
		\node [style=none] (2) at (-3.5, -1.5) {};
		\node [style=X] (3) at (-3.5, -0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (2.center) to (3);
		\draw (0) to (1.center);
	\end{pgfonlayer}
  \end{tikzpicture},
\hspace*{.5cm}
  \begin{tikzpicture}[rotate=90]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (-8.25, -0) {};
		\node [style=X] (1) at (-9.25, -0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (0) to (1);
	\end{pgfonlayer}
\end{tikzpicture}
\eref{extra}
\\
$$

This is the prop of the free {\bf bicommutative bialgebra}.

In fact $\cb=\cb_\N$ is equivalent to the prop of matrices over $\N$.
\end{example}


Similarly for Frobenius algebras:
\begin{lemma}[{\cite[?]{lack}}]
{\sfa} is a presentation for $(\Span^\sim(\FSets^\op),+)$.
\end{lemma}


\begin{example}
Consider the distributive law between a monoid $\xcirc$ and comonoid $\xcirc$:

$$
 \cm \otimes_\P \cm^\op;
    \begin{tikzpicture}[rotate=90]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (-6.25, 0.25) {};
		\node [style=none] (1) at (-7, 0.25) {};
		\node [style=none] (2) at (-4.75, 0.25) {};
		\node [style=X] (3) at (-5.5, 0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (0) to (1.center);
		\draw (3) to (2.center);
		\draw [bend right, looseness=1.25] (3) to (0);
		\draw [bend right, looseness=1.25] (0) to (3);
	\end{pgfonlayer}
  \end{tikzpicture}
  \eref{special}
  \begin{tikzpicture}[rotate=90]
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (-7, 0.25) {};
		\node [style=none] (1) at (-6, 0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (0.center);
	\end{pgfonlayer}
  \end{tikzpicture},
  \hspace*{.5cm}
  \begin{tikzpicture}[rotate=90]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (-7, -0) {};
		\node [style=X] (1) at (-6.25, 0.5) {};
		\node [style=none] (2) at (-7, 0.75) {};
		\node [style=none] (3) at (-7.75, 0.75) {};
		\node [style=none] (4) at (-7.75, -0) {};
		\node [style=none] (5) at (-6.25, -0.25) {};
		\node [style=none] (6) at (-5.5, -0.25) {};
		\node [style=none] (7) at (-5.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (6.center) to (5.center);
		\draw [in=-30, out=180, looseness=1.00] (5.center) to (0);
		\draw (1) to (0);
		\draw [in=0, out=150, looseness=1.00] (1) to (2.center);
		\draw (2.center) to (3.center);
		\draw (0) to (4.center);
		\draw (1) to (7.center);
	\end{pgfonlayer}
  \end{tikzpicture}
 \eref{frobl}
  \begin{tikzpicture}[rotate=90,xscale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (-7, -0) {};
		\node [style=X] (1) at (-6.25, 0.5) {};
		\node [style=none] (2) at (-7, 0.75) {};
		\node [style=none] (3) at (-7.75, 0.75) {};
		\node [style=none] (4) at (-7.75, -0) {};
		\node [style=none] (5) at (-6.25, -0.25) {};
		\node [style=none] (6) at (-5.5, -0.25) {};
		\node [style=none] (7) at (-5.5, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (6.center) to (5.center);
		\draw [in=-30, out=180, looseness=1.00] (5.center) to (0);
		\draw (1) to (0);
		\draw [in=0, out=150, looseness=1.00] (1) to (2.center);
		\draw (2.center) to (3.center);
		\draw (0) to (4.center);
		\draw (1) to (7.center);
	\end{pgfonlayer}
  \end{tikzpicture}
  \eref{frobr}
  \begin{tikzpicture}[rotate=90]
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (-4.75, -0.25) {};
		\node [style=X] (1) at (-5.5, -0) {};
		\node [style=none] (2) at (-7, -0.25) {};
		\node [style=X] (3) at (-6.25, 0) {};
		\node [style=none] (4) at (-4.75, 0.25) {};
		\node [style=none] (5) at (-7, 0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-30, out=180, looseness=1.25] (0.center) to (1);
		\draw (3) to (1);
		\draw [in=180, out=30, looseness=1.25] (1) to (4.center);
		\draw [in=0, out=-150, looseness=1.25] (3) to (2.center);
		\draw [in=0, out=150, looseness=1.25] (3) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
This is the prop $\scfa$ for the free  special commutative Frobenius algebra, which we discussed earlier.
\end{example}


\begin{lemma}[{ \cite[?]{lack}}]
{\sfa} is a presentation for $(\Span^\sim(\FSets),+)$.
\end{lemma}


The (special) spider theorem also holds for (special) commutative Frobenius algebras, where now components can be connected together using the braids.


In analogy to the noncommutative case, the spider theorem for non-special commutative Fronbenius algebras, although this arises from a distributive law of {\em symmetric polycategories}, rather than of monoidal categories.


Actually, the original spider theorem was the spider theorem for non-special symmetric Frobenius algebras, first published in the PhD thesis of \cite{spider}; wherein it was proved by topological methods rather than using the machinery of distributive laws.





\section{Categorical quantum mechanics}
\label{sec:cqm}
%
%I will first sketch the algebraic paradigm used by quantum computer scientists to do calculations.  Then I will give a categorical, graphical reformulation.
%
%The states of the quantum system are regarded as normalized vectors in $\FHilb$. Using the bra-ket notation a state $\phi$ is denoted by  $|\phi\rangle$ with adjoint $\langle \phi|$. This notation interacts nicely with the contravariant order of composition.  The inner product of states $|\phi\rangle$ and  $|\psi\rangle$ is denoted by  $\langle \psi |\phi\rangle:= \langle \psi|\circ |\phi\rangle$ and the outer product by $|\phi\rangle\langle \psi | := |\phi\rangle\circ\langle \psi |$.
%
%One often choses an ordered basis for a finite dimensional Hilbert space, called the standard basis.  The elements of the standard basis are denoted by $\{ | j  \rangle\}_{j\in \{0,\ldots, \dim|\mathcal{H}|-1\}} $.
%
%The purely quantum evolution of a quantum state is performed by postcomposition with unitary maps.  Because the unitary maps are norm-preserving, they take quantum states to quantum states.
%
%
%Measurement is slightly more complicated to describe.  One has to double the quantum state and embed it into the space of  density matrices.  Then by applying a projection operator to this space, one can calculuate the probability of certain measurement outcomes.
%
%We will return to the problem of measurement shortly, from a different perspective using string diagrams for \dag-compact closed categories.  This paradigm is known as ``categorical quantum mechanics,'' and follows the seminal work of Abramsky and Coecke \cite{abramsky}. 
%
%
%Less rigorous graphical perspectives on quantum mechanics have existed for quite a while. Notably Penrose used string diagrams in several of his papers \cite{penrosei,??}. It wasn't until relatively recently, that string diagrams for quantum processes started be be taken seriously in their own right.  
%
%
%In more in depth mathematical introduction to the subject of categorical quantum mechanics can be found in \cite{heunen}, with a more broadly accessible introduction being found in \cite{pqp}.

%The first step in introducing this formalism, is a graphical counterpart of the notion of an orthonormal basis:


String diagrams have been used in quantum theory for quite some time.  For example in the work of Penrose \cite{penrosei}.  In such settings, string diagrams have been used as (often heuristic) tools for calculation. The more recent programme of ``categorical quantum mechanics,'' following the seminal paper of Abramsky and Coecke \cite{abramsky} has endeavoured to formulate finite dimensional quantum mechanics using category theory.  In this setting,  string diagrams are formal mathematical objects: allowing certain essential features to be abstracted away from the category of finite dimensional Hilbert spaces.

In this section, we shall briefly review this formalism; however a more in depth mathematical introduction can be found in \cite{heunen}, with a more broadly accessible introduction being found in \cite{pqp}.


To motivate this graphical treatment of finite dimensional quantum theory, we first establish some basic algebraic notations.


Fix a finite dimensional Hilbert space $\mathcal H$ with dimension $d\geq 2$, which we will regard as our local state-space. An element of $\mathcal H$ is called a {\bf qudit}.  A $\mathcal H$ is called a {\bf qubit} when $d=2$, a {\bf qutrit} when $d=3$, a {\bf qupit} when $d$ is any prime and a {\bf quopit} when $d$ any odd prime.

Fix such a $d$ and take some ordered orthonormal basis $B$ of $\mathcal H$.  The elements of $B$ are denoted in order, using ``ket notation'' by $\{| b_0\rangle , \ldots, |b_{d-1}\rangle \}$.
The tensor product of these vectors is denoted by concatenation, so that for example:
$$
| b_x \rangle \otimes | b_y\rangle =: |b_x,b_y \rangle  
$$


Most of the time,  for the state space of a qudit we will not chose an aribitrary $d$-dimensional Hilbert space.  Instead, we will work in the Hilbert space of square integrable functions on $\Z/d\Z$, $\ell^2(\Z/d\Z)$.  Here, the elements of $\Z/d\Z$ induce a basis for  $\ell^2(\Z/d\Z)$ called the {\bf standard basis} or $Z$-basis.  We will denote the elements of the basis  as  $\{| 0\rangle , \ldots, |d-1\rangle \}$.  The structure of a ring is therefore transported onto the standard basis elements (or a field when $d$ is prime).  These are regarded as the $d$-level quantum analogue of classical dits.    Similarly, the $n$-qudit state space is regarded as the Hilbert space $\ell^2((\Z/d\Z)^n)$, so that the $n$-standard basis elements have the structure of an $n$-dimensional $\Z/d\Z$-bimodule (or vector space, when $d$ is prime).

Denote arbitrary vectors $\phi$ in $\mathcal H$ using this ket notation by $|\phi \rangle$; where the adjoint of $|\phi \rangle$ is denoted as a ``bra''  by $|\phi \rangle^\dag =: \langle \phi |$. 

Given two vectors $|\phi \rangle$ and $| \psi \rangle$ on the same space, the inner product is denoted by $\langle \phi | \psi \rangle$ and the outer product by $|\phi \rangle\langle \psi|$.  This notation for vectors and their adjoints is called ``bra-ket'' notation.


This notation allows allows us to represent matrices in terms of sums.  For example, a matrix from $A:d^n\to d^m$ with entries $a_{j,k}$ is denoted as follows:

$$
A  = \sum_{k=0}^{n-1} \sum_{j=0}^{m-1} a_{j,k}| j \rangle \langle k |
$$

For example we want to compute the  action of $A$ on $|\ell \rangle$:

$$
A|\ell\rangle 
  =  \sum_{k=0}^{n-1} \sum_{j=0}^{m-1} a_{j,k}| j \rangle \langle k | \ell \rangle
= 
 \sum_{j=0}^{m-1} a_{j,\ell}| j \rangle
$$


Now that this basic notation is established, we will move onto more specifically quantum notions.


A {\bf pure quantum state} is a vector $|\phi \rangle$ with norm 1, so that $\langle \phi | \phi \rangle =1$. Quantum states are interpreted as the possible physical states of a quantum system which has been unexposed to the classical world.  The quantum evolution of pure quantum states is modeled by their postcomposition with unitary maps.  Unitary maps are precisely the linear automorphisms which preserve quantum states by definition.

There is a graphical way to represent orthonormal bases:

\begin{lemma}[{\cite{coecke2013new}}]
\label{lem:specialdagfa}
Commutative \dag-Frobenius algebras in $\FHilb$ are in bijection with orthogonal bases.  Moreover, special commutative \dag-Frobenius algebras are in bijection with orthonormal bases.


An orthonormal basis $\{ |b_j\rangle \}_{j=0,\ldots, d-1}$ yields a Frobenius algebra where the spiders are of the form:
$$
\sum_{j=0}^{d-1} |b_j, \ldots, b_j \rangle\langle b_j,\ldots, b_j|
$$
\end{lemma}
The idea is that these structures are in bijection with dirac deltas for orthonormal bases.  


As a matter of notation: given some fixed dimension $d$, and a distinguished standard basis, we will call the  connected components of the special commutative $\dag$-Frobenius algebra corresponding the standard basis qudit {\bf $Z$-spiders}.  We will draw them in white, as follows:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.5, 1.75) {};
		\node [style=none] (1) at (2.75, 1.75) {};
		\node [style=none] (2) at (2, 1.75) {};
		\node [style=none] (3) at (2.45, 1.75) {$\cdots$};
		\node [style=none] (4) at (2.75, 3.25) {};
		\node [style=none] (5) at (2, 3.25) {};
		\node [style=none] (6) at (1.5, 3.25) {};
		\node [style=none] (7) at (2.45, 3.25) {$\cdots$};
		\node [style=Z] (8) at (2, 2.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=45] (8) to (4.center);
		\draw (8) to (5.center);
		\draw [in=135, out=-90] (6.center) to (8);
		\draw [in=90, out=-150] (8) to (0.center);
		\draw (2.center) to (8);
		\draw [in=90, out=-30] (8) to (1.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$



To actually do computations on classical systems, one has to measure things. 
In \cite{cpm}, Selinger gives a construction to produce categories of quantum channels from general \dag-compact closed categories. When applied to $\FHilb$, this construction adds discarding behavior to quantum systems.  This will provide the necessary machinery to model measurement. 


We present this construction in terms of a quotient of the $\CoPara$ construction for the sake of uniformity of this thesis:
\begin{definition}
\label{def:cpm}

%Dagger category... equivalent to ioo compact closed conjugation 

Given a compact closed $\dag$-symmetric monoidal category $\X$, then  $\CPM(\X)$ is the quotient of ${\CoPara}(\X)$ by the congruence relation:
$$
(f,S) \sim (g,T) \iff
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0.75, 11.75) {};
		\node [style=none] (1) at (0.75, 10.75) {};
		\node [style=map] (3) at (0.75, 10.75) {$f$};
		\node [style=map] (4) at (0.75, 11.75) {$f^\dag$};
		\node [style=none] (5) at (0.75, 10) {};
		\node [style=none] (6) at (0.75, 12.5) {};
		\node [style=none] (7) at (0, 12.5) {};
		\node [style=none] (8) at (0, 10) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (6.center) to (4);
		\draw (4) to (3);
		\draw (3) to (5.center);
		\draw [in=-90, out=135, looseness=0.75] (3) to (7.center);
		\draw [in=-135, out=90] (8.center) to (4);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (0.75, 11.75) {};
		\node [style=none] (1) at (0.75, 10.75) {};
		\node [style=map] (3) at (0.75, 10.75) {$g$};
		\node [style=map] (4) at (0.75, 11.75) {$g^\dag$};
		\node [style=none] (5) at (0.75, 10) {};
		\node [style=none] (6) at (0.75, 12.5) {};
		\node [style=none] (7) at (0, 12.5) {};
		\node [style=none] (8) at (0, 10) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (6.center) to (4);
		\draw (4) to (3);
		\draw (3) to (5.center);
		\draw [in=-90, out=135, looseness=0.75] (3) to (7.center);
		\draw [in=-135, out=90] (8.center) to (4);
	\end{pgfonlayer}
\end{tikzpicture}
$$

Draw elements of this equivalence class using the following notation:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (2) at (23, -0.5) {};
		\node [style=ground, scale=-1] (3) at (23.5, 0.5) {};
		\node [style=none] (5) at (22.5, 0.5) {};
		\node [style=map] (6) at (23, -0.5) {$f$};
		\node [style=none] (7) at (23, -1.25) {};
		\node [style=none] (8) at (22.5, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=270, out=30] (2.center) to (3);
		\draw [in=-90, out=150] (2.center) to (5.center);
		\draw (7.center) to (2.center);
		\draw (8.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (2) at (23, -0.5) {};
		\node [style=ground, scale=-1] (3) at (23.5, 0.5) {};
		\node [style=none] (5) at (22.5, 0.5) {};
		\node [style=map] (6) at (23, -0.5) {$g$};
		\node [style=none] (7) at (23, -1.25) {};
		\node [style=none] (8) at (22.5, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=270, out=30] (2.center) to (3);
		\draw [in=-90, out=150] (2.center) to (5.center);
		\draw (7.center) to (2.center);
		\draw (8.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

The dagger is defined as follows:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (2) at (23, -0.5) {};
		\node [style=ground, scale=-1] (3) at (23.5, 0.5) {};
		\node [style=none] (5) at (22.5, 0.5) {};
		\node [style=map] (6) at (23, -0.5) {$f$};
		\node [style=none] (7) at (23, -1.25) {};
		\node [style=none] (8) at (22.5, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=270, out=30] (2.center) to (3);
		\draw [in=-90, out=150] (2.center) to (5.center);
		\draw (7.center) to (2.center);
		\draw (8.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
\mapsto
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (9) at (25, -0.25) {};
		\node [style=ground, scale=-1] (10) at (25.75, 0.5) {};
		\node [style=none] (11) at (25, 1.25) {};
		\node [style=map] (12) at (25, -0.25) {$f^\dag$};
		\node [style=none] (13) at (24.75, -1.25) {};
		\node [style=none] (14) at (25.75, -0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (9.center) to (11.center);
		\draw [in=-135, out=90] (13.center) to (9.center);
		\draw [in=-90, out=-90, looseness=2.25] (9.center) to (14.center);
		\draw (14.center) to (10);
	\end{pgfonlayer}
\end{tikzpicture}
$$
Making $\CPM(\X)$ a \dag-symmetric monoidal cateory.

The canonical functor $\X\to \CoPara(\X)\to\CPM(\X,\dag)$ taking $f \mapsto (f,I)$ is called {\bf doubling}. The maps in the image of this functor are {\bf pure}, and those which aren't are {\bf mixed}.


The map $d_X=((u^L_X)^{-1}, X)$ is called the {\bf discarding map} on $X$.  A map $f:X\to Y$ in $\CPM(\X)$ is called {\bf trace-preserving} when $f;d_Y = d_X$.

All maps can be obtained by composing pure maps with discard maps.  Any such factorization is called a {\bf dilation}.


The compact closed structure of $\CPM(\X)$ is inhereted from the doubling of the compact closed structure of $\X$.  If the \dag-symmetric monoidal structure of $\X$ is compatible with it's compact closed structure, so that $\X$ is \dag-compact closed, then $\CPM(\X)$ is \dag-compact closed as well.
\end{definition}

Oftentimes, we will bend the ``doubled picture" so that the inputs are on the bottom and the outputs are on the top:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (88) at (54.05, -0.5) {};
		\node [style=ground, scale=-1] (89) at (53.55, 0.5) {};
		\node [style=none] (90) at (54.55, 0.5) {};
		\node [style=map] (91) at (54.05, -0.5) {$f$};
		\node [style=none] (92) at (54.05, -1.25) {};
		\node [style=none] (93) at (54.55, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=150] (88.center) to (89);
		\draw [in=-90, out=30] (88.center) to (90.center);
		\draw (92.center) to (88.center);
		\draw (93.center) to (90.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (185) at (30.975, 9) {$(f^*)^\dag$};
		\node [style=map] (186) at (32.25, 9) {$f$};
		\node [style=none] (187) at (30.75, 10) {};
		\node [style=none] (188) at (32.5, 10) {};
		\node [style=none] (189) at (31, 9) {};
		\node [style=none] (190) at (32.25, 9) {};
		\node [style=none] (191) at (31, 8) {};
		\node [style=none] (192) at (32.25, 8) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=270, out=120] (189.center) to (187.center);
		\draw [in=60, out=-90] (188.center) to (190.center);
		\draw [in=120, out=60, looseness=2] (189.center) to (190.center);
		\draw (191.center) to (189.center);
		\draw (190.center) to (192.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

In this picture, the composition of equivalence classes is  composition in $\X$:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (185) at (31, 9.75) {$(f^*)^\dag$};
		\node [style=map] (186) at (32.275, 9.75) {$f$};
		\node [style=none] (187) at (31, 11) {};
		\node [style=none] (188) at (32.25, 11) {};
		\node [style=none] (189) at (31.025, 9.75) {};
		\node [style=none] (190) at (32.275, 9.75) {};
		\node [style=none] (191) at (31.025, 8.75) {};
		\node [style=none] (192) at (32.275, 8.75) {};
		\node [style=map] (193) at (30.975, 11) {$(g^*)^\dag$};
		\node [style=map] (194) at (32.25, 11) {$g$};
		\node [style=none] (195) at (30.75, 12) {};
		\node [style=none] (196) at (32.5, 12) {};
		\node [style=none] (197) at (31, 11) {};
		\node [style=none] (198) at (32.25, 11) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=270, out=120] (189.center) to (187.center);
		\draw [in=60, out=-90] (188.center) to (190.center);
		\draw [in=120, out=60, looseness=2] (189.center) to (190.center);
		\draw (191.center) to (189.center);
		\draw (190.center) to (192.center);
		\draw [in=270, out=120] (197.center) to (195.center);
		\draw [in=60, out=-90] (196.center) to (198.center);
		\draw [in=120, out=60, looseness=2] (197.center) to (198.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

This different perspective will prove useful for the purposes of calculation.  


Also notice that when $\X$ is a self-dual compact closed \dag- category; then the \dag-structure is equivalent to an identity on objects conjugation functor.  For example in $\Mat_\C$, one could have instead have defined the $\CPM$ construction in terms of complex conjugation.  Because skeletal categories are much easier to work with, this perspective will also be useful;  in which case we can regard elements of the equivalence class as follows:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (88) at (54.05, -0.5) {};
		\node [style=ground, scale=-1] (89) at (53.55, 0.5) {};
		\node [style=none] (90) at (54.55, 0.5) {};
		\node [style=map] (91) at (54.05, -0.5) {$f$};
		\node [style=none] (92) at (54.05, -1.25) {};
		\node [style=none] (93) at (54.55, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=150] (88.center) to (89);
		\draw [in=-90, out=30] (88.center) to (90.center);
		\draw (92.center) to (88.center);
		\draw (93.center) to (90.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (339) at (241.725, 9.25) {$\bar f$};
		\node [style=map] (340) at (243, 9.25) {$f$};
		\node [style=none] (341) at (242, 10.25) {};
		\node [style=none] (342) at (243.25, 10.25) {};
		\node [style=none] (343) at (241.75, 9.25) {};
		\node [style=none] (344) at (243, 9.25) {};
		\node [style=none] (345) at (241.75, 8.5) {};
		\node [style=none] (346) at (243, 8.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=45] (343.center) to (341.center);
		\draw [in=60, out=-90] (342.center) to (344.center);
		\draw [in=120, out=135, looseness=2.25] (343.center) to (344.center);
		\draw (345.center) to (343.center);
		\draw (344.center) to (346.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

This perspective will often make indexing the wires easier; especially when the conjugation is more natural to use than the dagger.  Therefore, we shall invoke the $\CPM$ construction for both dagger structures and conjugation functors depending on which setting is most natural.


As mentioned before, the following example motivated this categorical construction:

\begin{example}
$\CPM(\FHilb, \dag)$ is the dagger compact closed category of density matrices between finite dimensional Hilbert spaces.


Or equivalently 
$\CPM(\Mat_\C, \bar{(\_)})$
is the skeleton of density matrices.
\end{example}

Density matrices model mixed quantum circuits. The discarding map is interpreted as exposing the quantum system to the classical world. A (mixed) {\bf quantum state}, is a trace-preserving state in $\CPM(\FHilb)$.  Quantum states model the possible physical states which are not-necessarily pure quantum states. Note that in $\CPM(\FHilb)$, the doubling acts on scalars by complex conjugation, so that the canonical map $\Hilb\to \CPM(\FHilb)$ is not injective.  The trace-preserving maps in $\CPM(\FHilb)$ model the mixed quantum-classical evolution of quantum states; as they are precisely the maps in $\CPM(\FHilb)$ which preserve quantum states.


%
%There are several variations on the $\CPM$ construction which are defined using different congurence relations on ${\CoPara}(\X)$.  For example, there is an infinite dimensional version which uses a different congruence. The quotient we have given is not a congruence relation for non-compact closed $\dag$-symmetric monoidal categories \cite{coecke2016pictures}.  There is a seperate equivalence relation which is defined in terms of universally quantifying over all of the maps which fit where we have drawn the braiding.
%Similarly, the discard construction \cite{disc} adds a generator to ones \dag-compact closed category which freely discards isometries. This approach is particularly amenable to adding mixed states to monoidal theories for pure quantum processes.
%When applied to $\FHilb$, importantly, all of these perspectives reproduce the same result.


%As hinted at earlier, density matrices allow us to talk about quantum measurement.  We first show how to graphically project onto a basis in density matrices:


In quantum mechanics, measurement on a system $\mathcal H$ is performed with respect to an orthonormal basis.  Fix an orthonormal basis $B=\{ |b_0\rangle,\ldots, |b_{n-1}\rangle \}$ of $\mathcal H$.  Suppose one is measuring a quantum state $|\psi\rangle$, then probability of measuring basis vector $| b_j\rangle $ is given by $| \langle b_j | \psi \rangle |^2$.  This probabilistic interpretation of quantum measurement is called the {\bf Born rule}.


Now the question is, what does this have to do with the $\CPM$ construction?


\begin{definition}
Given a special \dag-commutative Fsrobenius algebra $B$ on a \dag-compact closed category $\X$,
$$
p_B=
\begin{tikzpicture}[scale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (10) at (0, 0.75) {};
		\node [style=none] (11) at (-0.25, 0) {};
		\node [style=none] (13) at (0, 1.5) {};
		\node [style=none] (14) at (-0.25, -0.75) {};
		\node [style=ground] (15) at (0.25, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (13.center) to (10);
		\draw [in=90, out=-135] (10) to (11.center);
		\draw (11.center) to (14.center);
		\draw [in=90, out=-45] (10) to (15);
	\end{pgfonlayer}
\end{tikzpicture}
\in \CPM(\X,\dag)
$$


In the doubled picture:

$$
\left\llbracket
\begin{tikzpicture}[scale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (10) at (0, 0.75) {};
		\node [style=none] (11) at (-0.25, 0) {};
		\node [style=none] (13) at (0, 1.5) {};
		\node [style=none] (14) at (-0.25, -0.75) {};
		\node [style=ground] (15) at (0.25, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (13.center) to (10);
		\draw [in=90, out=-135] (10) to (11.center);
		\draw (11.center) to (14.center);
		\draw [in=90, out=-45] (10) to (15);
	\end{pgfonlayer}
\end{tikzpicture}
\right\rrbracket
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (29) at (8.275, 0) {};
		\node [style=none] (30) at (8, 0.75) {};
		\node [style=none] (31) at (8.55, 0.75) {};
		\node [style=none] (32) at (8.275, -1.25) {};
		\node [style=Z] (34) at (6.9, 0) {};
		\node [style=none] (35) at (6.9, -0.75) {};
		\node [style=none] (36) at (7.4, -0.75) {};
		\node [style=none] (37) at (6.9, 0.5) {};
		\node [style=none] (38) at (7.4, 0) {};
		\node [style=none] (39) at (7.65, 0) {};
		\node [style=none] (40) at (6.4, 0.5) {};
		\node [style=none] (41) at (7.65, 0.75) {};
		\node [style=none] (42) at (7.4, 0.75) {};
		\node [style=none] (43) at (6.4, -1.25) {};
		\node [style=none] (44) at (7.4, 1.25) {};
		\node [style=none] (45) at (8.55, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=150, out=-90] (30.center) to (29);
		\draw [in=-90, out=30] (29) to (31.center);
		\draw (29) to (32.center);
		\draw [in=-135, out=180] (35.center) to (34);
		\draw [in=180, out=-60, looseness=0.75] (34) to (36.center);
		\draw (34) to (37.center);
		\draw [in=0, out=-90, looseness=0.75] (38.center) to (35.center);
		\draw [in=0, out=-90, looseness=0.75] (39.center) to (36.center);
		\draw [bend right=90, looseness=1.25] (37.center) to (40.center);
		\draw (38.center) to (42.center);
		\draw (39.center) to (41.center);
		\draw (40.center) to (43.center);
		\draw [bend left=90, looseness=1.25] (41.center) to (30.center);
		\draw (44.center) to (42.center);
		\draw (31.center) to (45.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (46) at (10.625, -0.725) {};
		\node [style=none] (48) at (10.95, 0.75) {};
		\node [style=none] (49) at (10.625, -1.225) {};
		\node [style=Z] (50) at (10.05, 0) {};
		\node [style=none] (51) at (10.05, -0.75) {};
		\node [style=none] (52) at (10.625, -0.725) {};
		\node [style=none] (53) at (10.05, 0.5) {};
		\node [style=none] (54) at (10.55, 0) {};
		\node [style=none] (56) at (9.55, 0.5) {};
		\node [style=none] (58) at (10.55, 0.75) {};
		\node [style=none] (59) at (9.55, -1.25) {};
		\node [style=none] (60) at (10.55, 1.25) {};
		\node [style=none] (61) at (10.95, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=30] (46) to (48.center);
		\draw (46) to (49.center);
		\draw [in=-135, out=180] (51.center) to (50);
		\draw [in=180, out=-60, looseness=0.75] (50) to (52.center);
		\draw (50) to (53.center);
		\draw [in=0, out=-90, looseness=0.75] (54.center) to (51.center);
		\draw [bend right=90, looseness=1.25] (53.center) to (56.center);
		\draw (54.center) to (58.center);
		\draw (56.center) to (59.center);
		\draw (60.center) to (58.center);
		\draw (48.center) to (61.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (63) at (13.1, 0.75) {};
		\node [style=none] (64) at (12.325, -1.225) {};
		\node [style=Z] (65) at (12.45, 0) {};
		\node [style=none] (66) at (12.7, -0.75) {};
		\node [style=none] (68) at (12.45, 0.5) {};
		\node [style=none] (69) at (13.2, -0.25) {};
		\node [style=none] (70) at (11.95, 0.5) {};
		\node [style=none] (71) at (12.7, 0.75) {};
		\node [style=none] (72) at (11.95, -1.25) {};
		\node [style=none] (73) at (12.7, 1.25) {};
		\node [style=none] (74) at (13.1, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-120, out=-180, looseness=1.25] (66.center) to (65);
		\draw (65) to (68.center);
		\draw [in=0, out=-90] (69.center) to (66.center);
		\draw [bend right=90, looseness=1.25] (68.center) to (70.center);
		\draw [in=-90, out=90] (69.center) to (71.center);
		\draw (70.center) to (72.center);
		\draw (73.center) to (71.center);
		\draw (63.center) to (74.center);
		\draw [in=45, out=-90] (63.center) to (65);
		\draw [in=90, out=-45] (65) to (64.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

It is idempotent, because:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (76) at (14.575, -3.725) {};
		\node [style=Z] (77) at (14.7, -2.5) {};
		\node [style=none] (78) at (14.95, -3.25) {};
		\node [style=none] (79) at (14.7, -2) {};
		\node [style=none] (80) at (15.45, -2.75) {};
		\node [style=none] (81) at (14.2, -2) {};
		\node [style=none] (82) at (14.95, -1.75) {};
		\node [style=none] (83) at (14.2, -3.75) {};
		\node [style=none] (86) at (16.1, -0.5) {};
		\node [style=Z] (88) at (15.45, -1.5) {};
		\node [style=none] (89) at (15.7, -2.25) {};
		\node [style=none] (90) at (15.45, -1) {};
		\node [style=none] (91) at (16.2, -1.75) {};
		\node [style=none] (92) at (14.95, -1) {};
		\node [style=none] (93) at (15.7, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-120, out=-180, looseness=1.25] (78.center) to (77);
		\draw (77) to (79.center);
		\draw [in=0, out=-90] (80.center) to (78.center);
		\draw [bend right=90, looseness=1.25] (79.center) to (81.center);
		\draw [in=-90, out=90] (80.center) to (82.center);
		\draw (81.center) to (83.center);
		\draw [in=90, out=-45] (77) to (76.center);
		\draw [in=-120, out=-180, looseness=1.25] (89.center) to (88);
		\draw (88) to (90.center);
		\draw [in=0, out=-90] (91.center) to (89.center);
		\draw [bend right=90, looseness=1.25] (90.center) to (92.center);
		\draw [in=-90, out=90] (91.center) to (93.center);
		\draw [in=45, out=-90] (86.center) to (88);
		\draw (92.center) to (82.center);
		\draw [in=45, out=-60] (88) to (77);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (114) at (18.325, -2.425) {};
		\node [style=Z] (115) at (17.95, -1.25) {};
		\node [style=none] (116) at (17.575, -2.075) {};
		\node [style=none] (117) at (17.7, -0.75) {};
		\node [style=none] (119) at (17.2, -0.75) {};
		\node [style=none] (120) at (17.45, -1.25) {};
		\node [style=none] (121) at (17.2, -2.45) {};
		\node [style=none] (122) at (18.6, -0.5) {};
		\node [style=Z] (123) at (17.95, -1.25) {};
		\node [style=none] (124) at (18.1, -1.95) {};
		\node [style=none] (125) at (17.95, -0.75) {};
		\node [style=none] (126) at (18.45, -1.5) {};
		\node [style=none] (127) at (17.45, -0.75) {};
		\node [style=none] (128) at (18.2, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-150, out=-180, looseness=1.25] (116.center) to (115);
		\draw [in=-90, out=150] (115) to (117.center);
		\draw [bend right=90, looseness=1.25] (117.center) to (119.center);
		\draw (119.center) to (121.center);
		\draw [in=90, out=-45] (115) to (114.center);
		\draw [in=-120, out=-180, looseness=1.25] (124.center) to (123);
		\draw (123) to (125.center);
		\draw [in=0, out=-90] (126.center) to (124.center);
		\draw [bend right=90, looseness=1.25] (125.center) to (127.center);
		\draw [in=-90, out=90] (126.center) to (128.center);
		\draw [in=45, out=-90] (122.center) to (123);
		\draw (127.center) to (120.center);
		\draw [in=0, out=-90, looseness=0.75] (120.center) to (116.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (94) at (54.425, -4.425) {};
		\node [style=Z] (95) at (54.05, -3.25) {};
		\node [style=none] (97) at (53.8, -2.5) {};
		\node [style=none] (98) at (52.525, -2.5) {};
		\node [style=none] (100) at (52.525, -4.45) {};
		\node [style=none] (101) at (54.7, -2.5) {};
		\node [style=Z] (102) at (54.05, -3.25) {};
		\node [style=none] (103) at (54.2, -3.95) {};
		\node [style=none] (105) at (54.55, -3.5) {};
		\node [style=none] (107) at (54.3, -2.5) {};
		\node [style=none] (110) at (53.6, -3) {};
		\node [style=none] (111) at (53.3, -3) {};
		\node [style=Z] (112) at (53.425, -3.75) {};
		\node [style=none] (114) at (52.975, -3) {};
		\node [style=Z] (115) at (53.35, -2.45) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=150] (95) to (97.center);
		\draw [bend right=90, looseness=1.25] (97.center) to (98.center);
		\draw (98.center) to (100.center);
		\draw [in=90, out=-45] (95) to (94.center);
		\draw [in=-120, out=-180, looseness=1.25] (103.center) to (102);
		\draw [in=0, out=-90] (105.center) to (103.center);
		\draw [in=-90, out=90] (105.center) to (107.center);
		\draw [in=45, out=-90] (101.center) to (102);
		\draw [bend right=90, looseness=1.25] (110.center) to (111.center);
		\draw [in=-90, out=105, looseness=1.25] (112) to (110.center);
		\draw [in=-165, out=90] (114.center) to (115);
		\draw [in=-150, out=30] (112) to (102);
		\draw [in=90, out=-15] (115) to (102);
		\draw [in=-75, out=270] (111.center) to (114.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (94) at (54.425, -4.425) {};
		\node [style=Z] (95) at (54.05, -3.25) {};
		\node [style=none] (97) at (53.8, -2.5) {};
		\node [style=none] (98) at (52.775, -2.5) {};
		\node [style=none] (100) at (52.775, -4.45) {};
		\node [style=none] (101) at (54.7, -2.5) {};
		\node [style=Z] (102) at (54.05, -3.25) {};
		\node [style=none] (103) at (54.2, -3.95) {};
		\node [style=none] (105) at (54.55, -3.5) {};
		\node [style=none] (107) at (54.3, -2.5) {};
		\node [style=Z] (112) at (53.35, -3.75) {};
		\node [style=Z] (115) at (53.35, -2.7) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=150] (95) to (97.center);
		\draw [bend right=90, looseness=1.25] (97.center) to (98.center);
		\draw (98.center) to (100.center);
		\draw [in=90, out=-45] (95) to (94.center);
		\draw [in=-120, out=-180, looseness=1.25] (103.center) to (102);
		\draw [in=0, out=-90] (105.center) to (103.center);
		\draw [in=-90, out=90] (105.center) to (107.center);
		\draw [in=45, out=-90] (101.center) to (102);
		\draw [in=-150, out=30] (112) to (102);
		\draw [in=90, out=-15] (115) to (102);
		\draw [bend right=45] (115) to (112);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (9) at (54.425, -4.425) {};
		\node [style=Z] (10) at (54.05, -3.25) {};
		\node [style=none] (11) at (54.15, -2.5) {};
		\node [style=none] (12) at (53.025, -2.5) {};
		\node [style=none] (13) at (53.025, -4.45) {};
		\node [style=none] (14) at (54.7, -1.75) {};
		\node [style=Z] (15) at (54.05, -3.25) {};
		\node [style=none] (16) at (54.2, -3.95) {};
		\node [style=none] (17) at (54.55, -3.5) {};
		\node [style=none] (18) at (54.3, -1.75) {};
		\node [style=Z] (20) at (53.8, -2.625) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=105, looseness=1.25] (10) to (11.center);
		\draw [bend right=90, looseness=1.25] (11.center) to (12.center);
		\draw (12.center) to (13.center);
		\draw [in=90, out=-45] (10) to (9.center);
		\draw [in=-120, out=-180, looseness=1.25] (16.center) to (15);
		\draw [in=0, out=-90] (17.center) to (16.center);
		\draw [in=-90, out=90] (17.center) to (18.center);
		\draw [in=45, out=-90] (14.center) to (15);
		\draw [in=75, out=-15, looseness=1.25] (20) to (15);
		\draw [in=-105, out=150] (15) to (20);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (63) at (13.1, 0.75) {};
		\node [style=none] (64) at (12.325, -1.225) {};
		\node [style=Z] (65) at (12.45, 0) {};
		\node [style=none] (66) at (12.7, -0.75) {};
		\node [style=none] (68) at (12.45, 0.5) {};
		\node [style=none] (69) at (13.2, -0.25) {};
		\node [style=none] (70) at (11.95, 0.5) {};
		\node [style=none] (71) at (12.7, 0.75) {};
		\node [style=none] (72) at (11.95, -1.25) {};
		\node [style=none] (73) at (12.7, 1.25) {};
		\node [style=none] (74) at (13.1, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-120, out=-180, looseness=1.25] (66.center) to (65);
		\draw (65) to (68.center);
		\draw [in=0, out=-90] (69.center) to (66.center);
		\draw [bend right=90, looseness=1.25] (68.center) to (70.center);
		\draw [in=-90, out=90] (69.center) to (71.center);
		\draw (70.center) to (72.center);
		\draw (73.center) to (71.center);
		\draw (63.center) to (74.center);
		\draw [in=45, out=-90] (63.center) to (65);
		\draw [in=90, out=-45] (65) to (64.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

And self-adjoint because

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (143) at (24.15, -0.75) {};
		\node [style=none] (144) at (23.875, 1.475) {};
		\node [style=Z] (145) at (23.5, 0) {};
		\node [style=none] (147) at (23.5, -0.5) {};
		\node [style=none] (148) at (24.15, 0.5) {};
		\node [style=none] (149) at (22.85, -0.5) {};
		\node [style=none] (150) at (23.75, -0.75) {};
		\node [style=none] (151) at (22.85, 1.5) {};
		\node [style=none] (152) at (23.75, -1.25) {};
		\node [style=none] (153) at (24.15, -1.25) {};
		\node [style=none] (154) at (23.5, 0.5) {};
		\node [style=none] (155) at (23.475, -1) {};
		\node [style=none] (156) at (22.8, -1) {};
		\node [style=none] (157) at (23.525, 1) {};
		\node [style=none] (158) at (24.15, 1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (145) to (147.center);
		\draw [in=90, out=-90] (148.center) to (150.center);
		\draw (149.center) to (151.center);
		\draw (152.center) to (150.center);
		\draw (143.center) to (153.center);
		\draw [in=-45, out=90] (143.center) to (145);
		\draw [in=-90, out=45] (145) to (144.center);
		\draw [in=90, out=-90] (149.center) to (155.center);
		\draw [in=270, out=90] (156.center) to (147.center);
		\draw (145) to (154.center);
		\draw [in=270, out=90] (148.center) to (157.center);
		\draw [in=90, out=450, looseness=1.25] (157.center) to (158.center);
		\draw [in=90, out=-90] (158.center) to (154.center);
		\draw [in=270, out=-90, looseness=1.75] (156.center) to (155.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (159) at (26.75, -1) {};
		\node [style=none] (160) at (26.225, 1.475) {};
		\node [style=Z] (161) at (25.85, 0) {};
		\node [style=none] (162) at (25.85, -0.5) {};
		\node [style=none] (163) at (25.425, 0) {};
		\node [style=none] (164) at (26.7, -0.5) {};
		\node [style=none] (165) at (26.35, -1) {};
		\node [style=none] (166) at (25.2, 1.5) {};
		\node [style=none] (167) at (26.35, -1.5) {};
		\node [style=none] (168) at (26.75, -1.5) {};
		\node [style=none] (169) at (25.85, 0.5) {};
		\node [style=none] (170) at (26.075, -1) {};
		\node [style=none] (171) at (25.4, -1) {};
		\node [style=none] (172) at (25.425, 1) {};
		\node [style=none] (173) at (25.85, 1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (161) to (162.center);
		\draw [in=90, out=-90] (163.center) to (165.center);
		\draw [in=-90, out=90] (164.center) to (166.center);
		\draw (167.center) to (165.center);
		\draw (159.center) to (168.center);
		\draw [in=-45, out=90] (159.center) to (161);
		\draw [in=-90, out=45] (161) to (160.center);
		\draw [in=90, out=-90] (164.center) to (170.center);
		\draw [in=270, out=90] (171.center) to (162.center);
		\draw (161) to (169.center);
		\draw [in=270, out=90] (163.center) to (172.center);
		\draw [in=90, out=450, looseness=1.25] (172.center) to (173.center);
		\draw [in=90, out=-90] (173.center) to (169.center);
		\draw [in=270, out=-90, looseness=1.75] (171.center) to (170.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (174) at (28.125, -0.925) {};
		\node [style=Z] (175) at (28.5, 0.25) {};
		\node [style=none] (176) at (28.25, 0.75) {};
		\node [style=none] (177) at (27.75, 0.75) {};
		\node [style=none] (178) at (27.75, -0.95) {};
		\node [style=none] (179) at (29.15, 1) {};
		\node [style=Z] (180) at (28.5, 0.25) {};
		\node [style=none] (181) at (28.65, -0.45) {};
		\node [style=none] (182) at (29, 0) {};
		\node [style=none] (183) at (28.75, 1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=150] (175) to (176.center);
		\draw [bend right=90, looseness=1.25] (176.center) to (177.center);
		\draw (177.center) to (178.center);
		\draw [in=90, out=-45] (175) to (174.center);
		\draw [in=-120, out=-180, looseness=1.25] (181.center) to (180);
		\draw [in=0, out=-90] (182.center) to (181.center);
		\draw [in=-90, out=90] (182.center) to (183.center);
		\draw [in=45, out=-90] (179.center) to (180);
	\end{pgfonlayer}
\end{tikzpicture}
$$



Therefore it is a projector.  Call this map the $B$-projector.
\end{definition}



Given a quantum state $| \psi \rangle$ and an orthonormal basis  $B$, a  {\bf destructive measurement} on $|\psi\rangle$ with respect to $B$ is performed by projecting $|\psi\rangle$ onto $B$ as $p_B|\psi\rangle$.  A destructive measurement with respect to $B$ transforms a quantum state into a stochastic mixture of all of the basis elements of $B$.



To promote these classical mixtures to their own systems,  we regard the projectors onto quantum observables themselves as objects. First, we recall the Karoubi envelope:

\begin{definition}
Given a category $\X$ and a class of idempotents $\mathcal I$ (so that $\forall e\in \mathcal I$, $e^2=e$), the {\bf Karoubi envelope of $\X$ at $\mathcal{I}$}, ${\sf Split}_{\mathcal I}(\X)$ is the category with:
\begin{description}
\item[\ \ Objects:] Pairs $(X,e)$ where $X$ is an object of $\X$ and $e:X\to X$ is in $\mathcal I$.
\item[\ \ Maps:] A map $(e,f,m):(X,e)\to (Y,m)$ is a map $f:X\to Y$ in $\X$ such that $e;f;m=f$.
\item[\ \ Composition:] $(e,f,m);(m,g,\ell) = (e,f;g,\ell)$.
\item[\ \ Identities:] $1_{(X,e)}=(1_X,e,1_X)$.
\end{description}


In particular, when $\mathcal{I}$ contains all idempotents in $\X$, call  ${\sf Split}(\X):={\sf Split}_{\mathcal I}(\X)$ {\bf the Karoubi envelope of $\X$}.
$\X$ fully and faithfully embeds into its Karoubi envelope via the functor:
$$
\left(X\xrightarrow{f}Y\right)
\mapsto 
\left((X,1_X)\xrightarrow{(1_X,f,1_Y)}(Y,1_Y)\right)
$$
Where $\X$ is {\bf Cauchy-complete} when this embedding is an equivalence. 
Moreover, when $\X$ is monoidal, symmetric monoidal or compact closed, so is ${\sf Split}(\X)$ with the embedding preserving this structure.


${\sf Split}_{{\mathcal I }\cup \{ 1_X | X \in \X\}}(\X)$ is said to be the category obtained by {\bf splitting the idempotents in $\mathcal I$}.

Note that when one splits an idempotent $e:X\to X$, then $(X,e)$ is the retract of $(X, 1_X)$ so that:

$$
\xymatrix{
(X,e) \ar@{>->}[r]^{(e,e,1)} \ar@{=}[dr] & (X,1_X)  \ar@{->>}[d]^{(1,e,e)}\\
& (X,e)
}\, \hspace*{.5cm}
\xymatrix{
(X,1_X) \ar@{->>}[r]^{(1,e,e)} \ar[dr]_{(e,e,e)} & (X,e)  \ar@{>->}[d]^{(e,e,1)}\\
& (X,1_X)
}
$$




\end{definition}


This generalizes to $\dag$-compact closed categories:

\begin{definition}[{\cite{idempotent}}]
Given a $\dag$-category $\X$ and class of projectors $\mathcal I$ in $\X$, then  ${\sf Split}_{\mathcal I}(\X)$ is a $\dag$ category.

The map $(e,1_X, 1_X) :(X,e)\to (X,1_X)$ is an isometry with adjoint $(1_X,1_X, e) :(X,1_X)\to (X,e)$ .

In particular, when $\X$ is $\dag$-compact closed then so is ${\sf Split}^\dag(\X)$, with the embedding preserving this structure.
\end{definition}

In \cite{idempotent}, they show that splitting projectors in $\CPM(\FHilb)$ yields a category where the the split projectors can be interpreted as classical types:

\begin{remark}
Given a basis $B = \{|b_0\rangle,\ldots,|b_{n-1}\rangle\}$ for $\mathcal{H}$, the isometry  $(p_B,1_\mathcal{H}, 1_\mathcal{H}) :(\mathcal{H},p_B)\to (\mathcal{H},1_\mathcal{H})$ is regarded as the {\bf state preparation map} and its adjoint $(1_\mathcal{H},1_\mathcal{H}, p_B) :(\mathcal{H},1_\mathcal{H})\to (\mathcal{H},p_B)$  a {\bf nondestructive measurement}, with respect to the basis $B$.  The maps between these idempotents are (un-normalized) stochastic processes.
\end{remark}

Let us unpack this a bit. 
%Suppose we have the classical state $|b_j\rangle$.  This corresponds to the state $(1_I,|b_j\rangle, p_B):(I,1_I)\to (\mathcal{H},p_b)$.  Now postcomposing this with the state preparation map $(p_B,p_B,1_\mathcal{H}) :(\mathcal{H},p_B)\to (\mathcal{H},1_\mathcal{H})$ regards $|b_j \rangle$ as a pure quantum state.  
%
%Going in the opposite direction, suppose we want to find the probability of measuring the state $|b_j\rangle$.  By precomposing the map $(p_B, \langle b_j|, 1_I):(\mathcal H, p_B)\to (I,1_I)$ with the measurement map $(1_\mathcal{H},1_\mathcal{H}, p_B) :(\mathcal{H},1_\mathcal{H})\to (\mathcal{H},p_B)$ we regard $\langle b_j|$ as a pure quantum effect.
%Therefore, if we were to precompose this composite with a quantum state $|\psi\rangle$, we would obtain the probability $|\langle \psi| b_j\rangle|^2$.
Take $B$ to correspond to a special commutative \dag-Frobenius algebra $\zcirc$.  The endomorphisms on  $(\mathcal{H},p_B)$ corresponds to a map $p_B;f;p_B$ for some $f:\mathcal{H}\to \mathcal{H}$  in $\CPM(\FHilb)$:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (108) at (22.825, 0.5) {};
		\node [style=none] (109) at (22.075, -1.725) {};
		\node [style=Z] (110) at (22.175, -0.5) {};
		\node [style=none] (111) at (22.425, -1.25) {};
		\node [style=none] (112) at (22.175, 0) {};
		\node [style=none] (113) at (22.925, -0.75) {};
		\node [style=none] (114) at (21.675, 0) {};
		\node [style=none] (115) at (22.425, 0.5) {};
		\node [style=none] (116) at (21.725, -1.75) {};
		\node [style=none] (117) at (22.075, -1.75) {};
		\node [style=none] (118) at (21.325, -3.975) {};
		\node [style=Z] (119) at (21.45, -2.75) {};
		\node [style=none] (120) at (21.7, -3.5) {};
		\node [style=none] (121) at (21.45, -2.25) {};
		\node [style=none] (122) at (22.2, -3) {};
		\node [style=none] (123) at (20.95, -2.25) {};
		\node [style=none] (124) at (21.725, -1.75) {};
		\node [style=none] (125) at (20.95, -4) {};
		\node [style=none] (126) at (21.725, -1.75) {};
		\node [style=none] (127) at (22.075, -1.75) {};
		\node [style=map] (128) at (21.9, -1.75) {$f$};
		\node [style=none] (129) at (22.8, 0.525) {};
		\node [style=none] (130) at (22.425, 0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-120, out=-180, looseness=1.25] (111.center) to (110);
		\draw (110) to (112.center);
		\draw [in=0, out=-90] (113.center) to (111.center);
		\draw [bend right=90, looseness=1.25] (112.center) to (114.center);
		\draw [in=-90, out=90] (113.center) to (115.center);
		\draw (114.center) to (116.center);
		\draw [in=45, out=-90] (108.center) to (110);
		\draw [in=90, out=-45] (110) to (109.center);
		\draw [in=-120, out=-180, looseness=1.25] (120.center) to (119);
		\draw (119) to (121.center);
		\draw [in=0, out=-90] (122.center) to (120.center);
		\draw [bend right=90, looseness=1.25] (121.center) to (123.center);
		\draw [in=-90, out=90] (122.center) to (124.center);
		\draw (123.center) to (125.center);
		\draw [in=45, out=-90] (117.center) to (119);
		\draw [in=90, out=-45] (119) to (118.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (59) at (25.15, -3.175) {};
		\node [style=none] (62) at (24.625, -2.4) {};
		\node [style=none] (64) at (24.95, -1.75) {};
		\node [style=none] (76) at (24.925, -5.225) {};
		\node [style=Z] (77) at (24.925, -4.5) {};
		\node [style=none] (78) at (24.675, -4.25) {};
		\node [style=none] (79) at (24.2, -4.25) {};
		\node [style=none] (80) at (24.2, -5.25) {};
		\node [style=Z] (104) at (24.625, -3.15) {};
		\node [style=none] (105) at (24.625, -3.15) {};
		\node [style=none] (106) at (25.15, -2.425) {};
		\node [style=none] (107) at (24.95, -1.75) {};
		\node [style=map] (151) at (24.925, -1.775) {$f$};
		\node [style=none] (152) at (25.7, 0.175) {};
		\node [style=none] (153) at (24.95, 0.925) {};
		\node [style=none] (154) at (24.95, 1.425) {};
		\node [style=none] (155) at (24.95, -1.75) {};
		\node [style=Z] (156) at (25.175, -1.075) {};
		\node [style=none] (157) at (24.925, -0.825) {};
		\node [style=none] (158) at (24.525, -0.85) {};
		\node [style=none] (159) at (24.95, -1.75) {};
		\node [style=Z] (160) at (24.95, 0.175) {};
		\node [style=none] (161) at (24.95, 0.175) {};
		\node [style=none] (162) at (25.7, 0.925) {};
		\node [style=none] (163) at (25.7, 1.425) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-150, looseness=0.75] (64.center) to (62.center);
		\draw [in=-90, out=90, looseness=0.75] (59.center) to (62.center);
		\draw [in=-75, out=135] (77) to (78.center);
		\draw [bend right=90, looseness=1.25] (78.center) to (79.center);
		\draw (79.center) to (80.center);
		\draw (77) to (76.center);
		\draw [in=90, out=-45, looseness=0.75] (107.center) to (106.center);
		\draw [in=-90, out=90, looseness=0.75] (105.center) to (106.center);
		\draw [in=270, out=-90, looseness=1.25] (105.center) to (59.center);
		\draw [in=60, out=-120] (105.center) to (77);
		\draw (154.center) to (153.center);
		\draw [in=-90, out=90, looseness=0.75] (152.center) to (153.center);
		\draw [in=-75, out=135] (156) to (157.center);
		\draw [bend right=90, looseness=1.25] (157.center) to (158.center);
		\draw [in=135, out=-90, looseness=0.75] (158.center) to (159.center);
		\draw [in=60, out=-90] (156) to (155.center);
		\draw (163.center) to (162.center);
		\draw [in=-90, out=90, looseness=0.75] (161.center) to (162.center);
		\draw [in=270, out=-90, looseness=1.25] (161.center) to (152.center);
		\draw [in=60, out=-120] (161.center) to (156);
	\end{pgfonlayer}
\end{tikzpicture}
\hspace*{.5cm}
\text{where}
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (191) at (29.3, -2.425) {};
		\node [style=none] (192) at (28.7, -1.65) {};
		\node [style=Z] (194) at (28.775, -2.4) {};
		\node [style=none] (195) at (28.775, -2.4) {};
		\node [style=none] (196) at (29.35, -1.675) {};
		\node [style=Z] (200) at (29.325, -1.075) {};
		\node [style=none] (201) at (29.075, -0.825) {};
		\node [style=none] (202) at (28.675, -0.85) {};
		\node [style=none] (204) at (28.8, -3.175) {};
		\node [style=none] (205) at (29.325, -0.075) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=90, looseness=0.75] (191.center) to (192.center);
		\draw [in=-90, out=90, looseness=0.75] (195.center) to (196.center);
		\draw [in=270, out=-90, looseness=1.25] (195.center) to (191.center);
		\draw [in=-75, out=135] (200) to (201.center);
		\draw [bend right=90, looseness=1.25] (201.center) to (202.center);
		\draw (204.center) to (195.center);
		\draw (200) to (205.center);
		\draw (196.center) to (200);
		\draw (202.center) to (192.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (206) at (30.975, -2.175) {};
		\node [style=Z] (208) at (30.55, -1.9) {};
		\node [style=none] (209) at (30.55, -1.9) {};
		\node [style=Z] (211) at (31, -1.075) {};
		\node [style=none] (213) at (31.225, -1.8) {};
		\node [style=none] (214) at (30.575, -2.925) {};
		\node [style=none] (215) at (31, -0.075) {};
		\node [style=Z] (216) at (31.55, -2.35) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=180, out=-15] (209.center) to (206.center);
		\draw (214.center) to (209.center);
		\draw (211) to (215.center);
		\draw [bend right=45, looseness=1.25] (216) to (211);
		\draw [in=0, out=180, looseness=0.75] (213.center) to (206.center);
		\draw [in=0, out=135, looseness=0.50] (216) to (213.center);
		\draw [in=-165, out=105, looseness=1.25] (209.center) to (211);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (220) at (33, -0.825) {};
		\node [style=none] (223) at (33, -0.075) {};
		\node [style=Z] (224) at (33, -1.825) {};
		\node [style=none] (225) at (33, -2.575) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (220) to (223.center);
		\draw (224) to (225.center);
		\draw [bend right] (224) to (220);
		\draw [bend right] (220) to (224);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (223) at (33, -0.075) {};
		\node [style=none] (225) at (33, -2.575) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (225.center) to (223.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

Therefore every endomorphism on $(\mathcal{H},p_B)$ is of the following form, for some  $g:\mathcal H\to \mathcal H$ in $\FHilb$:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (24.925, -3.3) {};
		\node [style=Z] (1) at (24.925, -2.575) {};
		\node [style=none] (2) at (24.675, -2.325) {};
		\node [style=none] (3) at (24.2, -2.325) {};
		\node [style=none] (4) at (24.2, -3.325) {};
		\node [style=map] (5) at (24.925, -1.775) {$g$};
		\node [style=none] (6) at (24.95, -0.825) {};
		\node [style=none] (7) at (24.2, -0.075) {};
		\node [style=none] (8) at (24.2, 0.425) {};
		\node [style=Z] (9) at (24.2, -0.825) {};
		\node [style=none] (10) at (24.2, -0.825) {};
		\node [style=none] (11) at (24.95, -0.075) {};
		\node [style=none] (12) at (24.95, 0.425) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-75, out=135] (1) to (2.center);
		\draw [bend right=90, looseness=1.25] (2.center) to (3.center);
		\draw (3.center) to (4.center);
		\draw (1) to (0.center);
		\draw (8.center) to (7.center);
		\draw [in=-90, out=90, looseness=0.75] (6.center) to (7.center);
		\draw (12.center) to (11.center);
		\draw [in=-90, out=90, looseness=0.75] (10.center) to (11.center);
		\draw [in=270, out=-45, looseness=1.25] (10.center) to (6.center);
		\draw [in=90, out=-90, looseness=1.25] (10.center) to (5);
		\draw (1) to (5);
	\end{pgfonlayer}
\end{tikzpicture}
$$




So that up to a complex number on the unit circle, $(\mathcal{H},e_B)$ can be identified with the the Hilbert space $\mathcal{H}$; where state preparation  $(p_B, 1_{\mathcal H},1_{\mathcal H})$  and nondestructive measurement $(1_{\mathcal H},1_{\mathcal H}, p_B)$ correspond to the following maps:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (14) at (34.65, 0.75) {};
		\node [style=none] (15) at (34.375, -1.225) {};
		\node [style=Z] (16) at (34, 0) {};
		\node [style=none] (17) at (34.25, -0.75) {};
		\node [style=none] (19) at (34.75, -0.25) {};
		\node [style=none] (21) at (34.25, 0.75) {};
		\node [style=none] (23) at (34.25, 1.25) {};
		\node [style=none] (24) at (34.65, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-120, out=-180, looseness=1.25] (17.center) to (16);
		\draw [in=0, out=-90] (19.center) to (17.center);
		\draw [in=-90, out=90] (19.center) to (21.center);
		\draw (23.center) to (21.center);
		\draw (14.center) to (24.center);
		\draw [in=45, out=-90] (14.center) to (16);
		\draw [in=90, out=-45] (16) to (15.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{1cm} 
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (36.4, -0.725) {};
		\node [style=none] (1) at (36.275, 1.775) {};
		\node [style=Z] (2) at (35.95, 0.025) {};
		\node [style=none] (3) at (35.7, 0.525) {};
		\node [style=none] (4) at (36.525, 0.525) {};
		\node [style=none] (5) at (35.9, -1.225) {};
		\node [style=none] (6) at (36.4, -1.225) {};
		\node [style=none] (7) at (36.125, 1.275) {};
		\node [style=none] (8) at (35.625, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=135, out=-90] (3.center) to (2);
		\draw [in=90, out=-90] (4.center) to (5.center);
		\draw (0.center) to (6.center);
		\draw [in=-90, out=90] (0.center) to (2);
		\draw [in=-90, out=45] (2) to (1.center);
		\draw [in=270, out=90] (3.center) to (7.center);
		\draw [in=90, out=-90] (8.center) to (4.center);
		\draw [bend left=90] (8.center) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (35) at (38.25, -0.725) {};
		\node [style=none] (36) at (38.55, 1.775) {};
		\node [style=Z] (37) at (38.25, 0.025) {};
		\node [style=none] (38) at (38, 0.525) {};
		\node [style=none] (39) at (37.3, 0.525) {};
		\node [style=none] (40) at (37.3, -0.725) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=135, out=-90] (38.center) to (37);
		\draw [in=90, out=-90] (39.center) to (40.center);
		\draw (35.center) to (37);
		\draw [in=-90, out=45] (37) to (36.center);
		\draw [in=90, out=450, looseness=1.75] (38.center) to (39.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$




Consider the action of the state preparation map on $|b_j\rangle$ and $\langle b_j|$ respectively:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (34.65, 0.75) {};
		\node [style=none] (1) at (34.375, -1.35) {};
		\node [style=Z] (2) at (34, 0) {};
		\node [style=none] (3) at (34.25, -0.75) {};
		\node [style=none] (4) at (34.75, -0.25) {};
		\node [style=none] (5) at (34.25, 0.75) {};
		\node [style=none] (6) at (34.25, 1.25) {};
		\node [style=none] (7) at (34.65, 1.25) {};
		\node [style=map] (8) at (34.375, -1.35) {$|b_j\rangle$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-120, out=-180, looseness=1.25] (3.center) to (2);
		\draw [in=0, out=-90] (4.center) to (3.center);
		\draw [in=-90, out=90] (4.center) to (5.center);
		\draw (6.center) to (5.center);
		\draw (0.center) to (7.center);
		\draw [in=45, out=-90] (0.center) to (2);
		\draw [in=90, out=-45] (2) to (1.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (9) at (37.9, 0.75) {};
		\node [style=none] (12) at (36.75, 0) {};
		\node [style=none] (13) at (37.25, 0.75) {};
		\node [style=none] (14) at (37.25, 1.25) {};
		\node [style=none] (16) at (37.9, 1.25) {};
		\node [style=map] (17) at (37.875, 0.725) {$|b_j\rangle$};
		\node [style=map] (18) at (36.25, 0.725) {$\langle b_j|$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=0, out=-90] (13.center) to (12.center);
		\draw [in=-90, out=90] (13.center) to (14.center);
		\draw (9.center) to (16.center);
		\draw [in=-180, out=-90] (18) to (12.center);
	\end{pgfonlayer}
\end{tikzpicture}\
,\hspace*{1cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (19) at (40.6, -0.725) {};
		\node [style=none] (20) at (40.9, 1.25) {};
		\node [style=Z] (21) at (40.6, 0.025) {};
		\node [style=none] (22) at (40.35, 0.525) {};
		\node [style=none] (23) at (39.65, 0.525) {};
		\node [style=none] (24) at (39.65, -0.725) {};
		\node [style=map] (25) at (40.9, 1.2) {$\langle b_j|$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=135, out=-90] (22.center) to (21);
		\draw [in=90, out=-90] (23.center) to (24.center);
		\draw (19.center) to (21);
		\draw [in=-90, out=45] (21) to (20.center);
		\draw [in=90, out=450, looseness=1.75] (22.center) to (23.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (26) at (42.925, -0.975) {};
		\node [style=none] (29) at (42.875, 0.575) {};
		\node [style=none] (30) at (41.9, 0.525) {};
		\node [style=none] (31) at (41.9, -0.975) {};
		\node [style=map] (32) at (42.9, -0.275) {$\langle b_j|$};
		\node [style=map] (33) at (42.9, 0.575) {$|b_j\rangle$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-90] (30.center) to (31.center);
		\draw [in=90, out=450, looseness=1.75] (29.center) to (30.center);
		\draw (26.center) to (32);
	\end{pgfonlayer}
\end{tikzpicture}
$$



There is a very important relationship which bases can have to each other:


\begin{definition}
\label{def:complementary}
%Interacting Hopf-Frobenius algebras/ strongly complementary observables
Take \dag-commutative Frobenius algebras $\zcirc$ and $\xcirc$; they are  {\bf complementary} when the monoids and comonoids of different colours interact to form bialgebras. 


They are moreover {\bf strongly complementary} when the the bialgebras are Hopf algebras whose antipode is equivalently any of the following maps:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0.5, 0) {};
		\node [style=X] (1) at (1, 0.5) {};
		\node [style=none] (2) at (0, 1) {};
		\node [style=none] (3) at (1.5, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=135] (0) to (2.center);
		\draw (0) to (1);
		\draw [in=90, out=-45] (1) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (0.5, 0) {};
		\node [style=Z] (1) at (1, 0.5) {};
		\node [style=none] (2) at (0, 1) {};
		\node [style=none] (3) at (1.5, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=135] (0) to (2.center);
		\draw (0) to (1);
		\draw [in=90, out=-45] (1) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (1, 0) {};
		\node [style=X] (1) at (0.5, 0.5) {};
		\node [style=none] (2) at (1.5, 1) {};
		\node [style=none] (3) at (0, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=45] (0) to (2.center);
		\draw (0) to (1);
		\draw [in=90, out=-135] (1) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (1, 0) {};
		\node [style=Z] (1) at (0.5, 0.5) {};
		\node [style=none] (2) at (1.5, 1) {};
		\node [style=none] (3) at (0, -0.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=45] (0) to (2.center);
		\draw (0) to (1);
		\draw [in=90, out=-135] (1) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

\end{definition}

Strongly complementary bases have important information-theoretical properties:

\begin{lemma}
\label{lem:strongcomp}

Given two strongly complementary bases given by special commutative \dag-Frobenius alegbras $\zcirc$ and $\xcirc$ preparing a state with respect to basis $\xcirc$ and measuring with respect to $\zcirc$ preserves no infomation, as:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (36) at (40.55, 1.525) {};
		\node [style=Z] (37) at (40.25, 0.775) {};
		\node [style=none] (39) at (39.475, 0.775) {};
		\node [style=none] (41) at (40.25, 0.775) {};
		\node [style=none] (42) at (39.925, -1.225) {};
		\node [style=X] (43) at (39.55, 0) {};
		\node [style=none] (44) at (39.875, -0.75) {};
		\node [style=none] (45) at (40.3, -0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=45] (37) to (36.center);
		\draw [in=-120, out=-180, looseness=1.25] (44.center) to (43);
		\draw [in=0, out=-90] (45.center) to (44.center);
		\draw [in=45, out=-90] (41.center) to (43);
		\draw [in=90, out=-45] (43) to (42.center);
		\draw [in=-90, out=90] (45.center) to (39.center);
		\draw [in=105, out=90, looseness=1.75] (39.center) to (41.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (46) at (42.625, 1.525) {};
		\node [style=Z] (47) at (42.325, 0.775) {};
		\node [style=none] (48) at (41.55, 0.775) {};
		\node [style=none] (49) at (42.325, 0.775) {};
		\node [style=none] (50) at (42, -1.225) {};
		\node [style=X] (51) at (41.625, 0) {};
		\node [style=none] (52) at (41.95, -0.75) {};
		\node [style=none] (53) at (42.375, -0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=45] (47) to (46.center);
		\draw [in=-120, out=-180, looseness=1.25] (52.center) to (51);
		\draw [in=0, out=-90] (53.center) to (52.center);
		\draw [in=45, out=-90] (49.center) to (51);
		\draw [in=90, out=-45] (51) to (50.center);
		\draw [in=-90, out=90] (53.center) to (48.center);
		\draw [in=105, out=90, looseness=1.75] (48.center) to (49.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (54) at (44.9, 1.775) {};
		\node [style=Z] (55) at (44.9, 1.275) {};
		\node [style=none] (56) at (43.875, 0.775) {};
		\node [style=none] (57) at (44.475, -1.225) {};
		\node [style=X] (58) at (44.45, -0.25) {};
		\node [style=none] (59) at (44.275, -0.75) {};
		\node [style=none] (60) at (44.95, -0.25) {};
		\node [style=Z] (61) at (44.4, 0.775) {};
		\node [style=X] (62) at (43.95, 0) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (55) to (54.center);
		\draw [in=0, out=-90] (60.center) to (59.center);
		\draw (58) to (57.center);
		\draw [in=-90, out=90] (60.center) to (56.center);
		\draw [in=30, out=-165] (55) to (61);
		\draw [in=90, out=135, looseness=1.75] (61) to (56.center);
		\draw [in=-60, out=60, looseness=0.75] (58) to (55);
		\draw (58) to (62);
		\draw [in=-180, out=-105, looseness=1.25] (62) to (59.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (63) at (46.975, 1.775) {};
		\node [style=Z] (64) at (46.975, 1.275) {};
		\node [style=none] (66) at (46.525, -0.9) {};
		\node [style=X] (67) at (46.525, 0.5) {};
		\node [style=Z] (70) at (46.975, -0.225) {};
		\node [style=X] (71) at (46.025, 1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (64) to (63.center);
		\draw (67) to (66.center);
		\draw [in=45, out=-150] (64) to (70);
		\draw [in=-30, out=0, looseness=1.50] (67) to (64);
		\draw (67) to (71);
		\draw [in=-105, out=180, looseness=1.25] (70) to (71);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (72) at (49.25, 1.525) {};
		\node [style=Z] (73) at (49.25, 1.025) {};
		\node [style=none] (74) at (49.225, -0.65) {};
		\node [style=X] (75) at (49.225, 0) {};
		\node [style=Z] (76) at (48.475, 0.025) {};
		\node [style=X] (77) at (48.475, 1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (73) to (72.center);
		\draw (75) to (74.center);
		\draw [in=45, out=-150] (73) to (76);
		\draw [in=315, out=45, looseness=1.25] (75) to (73);
		\draw (75) to (77);
		\draw [in=-150, out=150] (76) to (77);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (78) at (51.025, 1.525) {};
		\node [style=Z] (79) at (51.025, 1.025) {};
		\node [style=none] (80) at (51, -0.9) {};
		\node [style=X] (81) at (51, -0.25) {};
		\node [style=Z] (82) at (51, 0.275) {};
		\node [style=X] (83) at (50.5, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (79) to (78.center);
		\draw (81) to (80.center);
		\draw (79) to (82);
		\draw [in=-30, out=30] (81) to (79);
		\draw [bend left=45] (81) to (83);
		\draw (82) to (83);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (84) at (52.55, 1.525) {};
		\node [style=Z] (85) at (52.55, 1.025) {};
		\node [style=none] (86) at (52.525, -0.9) {};
		\node [style=X] (87) at (52.525, -0.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (85) to (84.center);
		\draw (87) to (86.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

\end{lemma}


Actually, we only needed the Hopf algebra part of the bialgebra for these two bases to have this property.  However, we ask for both because the following two very important bases have this property:

\begin{example}
Given fixed dimension $d$, recall that the standard basis, or Z basis,  is denoted as follows:
$$\{ |0\rangle, \ldots, |d-1\rangle \}$$
The Fourier basis, or $X$ basis, is denoted as follows:
$$\{\sqrt{d} \mathcal{F}|0\rangle, \ldots, \sqrt{d}\mathcal{F}|d-1\rangle \}$$

Where the qudit quantum Fourier transform is the unitary map:

$$\mathcal{F} := \dfrac{1}{\sqrt{d}} \sum_{j,k=0}^{d-1} e^{2\pi\cdot i \cdot j \cdot k/d} | k\rangle \langle j |:\C^d\to \C^d $$

The standard basis and Fourier bases are strongly complementary.
\end{example}

For qubits, the  state $|+\rangle:=\mathcal{F}|0\rangle$ is called the {\bf plus state}; and  $|-\rangle:=\mathcal{F}|1\rangle$ is called the {\bf minus state}.  Although, this notation obviously does not generalize well to qudits.  Also, in this setting, the antipode is the identity, so that it doesn't matter if the wires are inputs or outputs of spiders .  For example:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (14) at (9.5, -1.75) {};
		\node [style=Z] (15) at (8.75, -1.75) {};
		\node [style=none] (16) at (9.5, -1) {};
		\node [style=none] (17) at (8.75, -1) {};
		\node [style=none] (18) at (9.5, -2.5) {};
		\node [style=none] (19) at (8.75, -2.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (17.center) to (15);
		\draw (15) to (14);
		\draw (14) to (16.center);
		\draw (14) to (18.center);
		\draw (19.center) to (15);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (20) at (11.25, -1.75) {};
		\node [style=Z] (21) at (10.5, -2) {};
		\node [style=none] (22) at (11.25, -1) {};
		\node [style=none] (23) at (10.5, -1) {};
		\node [style=none] (24) at (11.25, -2.75) {};
		\node [style=none] (25) at (10.5, -2.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (23.center) to (21);
		\draw (21) to (20);
		\draw (20) to (22.center);
		\draw (20) to (24.center);
		\draw (25.center) to (21);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (8) at (12.75, -2) {};
		\node [style=Z] (9) at (12, -1.75) {};
		\node [style=none] (10) at (12.75, -1) {};
		\node [style=none] (11) at (12, -1) {};
		\node [style=none] (12) at (12.75, -2.75) {};
		\node [style=none] (13) at (12, -2.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (11.center) to (9);
		\draw (9) to (8);
		\draw (8) to (10.center);
		\draw (8) to (12.center);
		\draw (13.center) to (9);
	\end{pgfonlayer}
\end{tikzpicture}
$$
Notice how we had to multiply the basis elements by a factor of $\sqrt d$ so that these two Frobenius algebras interact to form a Hopf algebra on the nose.  This means that the Fourier basis we have chosen is not normalized, and thus the corresponding Frobenius algebra is not special.  However, this isn't a problem, because it is special up to the invertible  scalar $1/\sqrt{d}$.

This pair of complementary bases will occur throughout this thesis.  As a matter of notation, as mentioned earlier we draw the ``$Z$-spiders'' for the standard basis in white,
and ``$X$-spiders'' for the Fourier basis in  grey as follows:

\begin{align*}
\left\llbracket\ 
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (4, -0.5) {};
		\node [style=none] (1) at (3, -0.5) {};
		\node [style=none] (2) at (3.5, -0.75) {$\cdots$};
		\node [style=Z] (4) at (3.5, -1.25) {};
		\node [style=none] (6) at (3.5, -1.75) {$\cdots$};
		\node [style=none] (7) at (3, -2) {};
		\node [style=Z] (8) at (3.5, -1.25) {};
		\node [style=none] (9) at (4, -2) {};
		\node [style=none] (10) at (3.5, -2) {$n$};
		\node [style=none] (11) at (3.5, -0.5) {$m$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=56] (4) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
&=
\sum_{j=0}^{d-1} | j, \ldots, j\rangle \langle j,\ldots, j|\\
\left\llbracket\ 
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (4, -0.5) {};
		\node [style=none] (1) at (3, -0.5) {};
		\node [style=none] (2) at (3.5, -0.75) {$\cdots$};
		\node [style=X] (4) at (3.5, -1.25) {};
		\node [style=none] (6) at (3.5, -1.75) {$\cdots$};
		\node [style=none] (7) at (3, -2) {};
		\node [style=none] (8) at (3.5, -1.25) {};
		\node [style=none] (9) at (4, -2) {};
		\node [style=none] (10) at (3.5, -2) {$n$};
		\node [style=none] (11) at (3.5, -0.5) {$m$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=56] (4) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
&=
\sqrt{d}\sum_{j=0}^{d-1}  \mathcal{F} | j, \ldots, j\rangle \langle j,\ldots, j| \mathcal{F}^\dag\\
&=
\sum_{\forall x \in (\Z/d\Z)^n,  y  \in (\Z/d\Z)^m: \sum  x_j= \sum y _k \mod d} | y_1 ,\ldots, y_n \rangle \langle  x_1,\ldots, x_n|
\end{align*}



%The following pair of strongly complementary observables will come up often throughout this thesis:
%
%\begin{example}
%Qudit quantum teleportation in doubled picture:
%
%tODO
%\end{example}

We almost have all of the essential ingredients of categorical quantum mechanics: we have density matrices and strongly complementary observables.  The next essential thing to do is to decorate spiders with a phase-angle:

\begin{definition}
\label{def:phases}
Given a $\dag$-Frobenius algebra on an object $X$, a {\bf phase} for the Frobenius algebra is a unitary endomorphism $\theta:X\to X$ which commutes with the multiplication and comultiplication, so that:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (14) at (-1.75, 12) {};
		\node [style=none] (15) at (-1.25, 11.25) {};
		\node [style=none] (16) at (-2.25, 11.25) {};
		\node [style=none] (17) at (-1.75, 12.75) {};
		\node [style=map] (18) at (-1.25, 11.25) {$\theta$};
		\node [style=none] (19) at (-1.25, 10.5) {};
		\node [style=none] (20) at (-2.25, 10.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (14) to (15.center);
		\draw [in=90, out=-150] (14) to (16.center);
		\draw (17.center) to (14);
		\draw (18) to (19.center);
		\draw (20.center) to (16.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0, 11.25) {};
		\node [style=map] (1) at (0, 12) {$\theta$};
		\node [style=none] (2) at (-0.5, 10.5) {};
		\node [style=none] (3) at (0.5, 10.5) {};
		\node [style=none] (4) at (0, 12.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (4.center) to (1);
		\draw (1) to (0);
		\draw [in=90, out=-150] (0) to (2.center);
		\draw [in=90, out=-30] (0) to (3.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (5) at (2, 12) {};
		\node [style=none] (7) at (1.5, 11.25) {};
		\node [style=none] (8) at (2.5, 11.25) {};
		\node [style=none] (9) at (2, 12.75) {};
		\node [style=map] (11) at (1.5, 11.25) {$\theta$};
		\node [style=none] (12) at (1.5, 10.5) {};
		\node [style=none] (13) at (2.5, 10.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-150] (5) to (7.center);
		\draw [in=90, out=-30] (5) to (8.center);
		\draw (9.center) to (5);
		\draw (11) to (12.center);
		\draw (13.center) to (8.center);
	\end{pgfonlayer}
\end{tikzpicture}
\hspace*{1cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (33) at (4, 11.25) {};
		\node [style=none] (34) at (4.5, 12) {};
		\node [style=none] (35) at (3.5, 12) {};
		\node [style=none] (36) at (4, 10.5) {};
		\node [style=map] (37) at (4.5, 12) {$\theta$};
		\node [style=none] (38) at (4.5, 12.75) {};
		\node [style=none] (39) at (3.5, 12.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=30] (33) to (34.center);
		\draw [in=-90, out=150] (33) to (35.center);
		\draw (36.center) to (33);
		\draw (37) to (38.center);
		\draw (39.center) to (35.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (21) at (5.75, 12) {};
		\node [style=map] (22) at (5.75, 11.25) {$\theta$};
		\node [style=none] (23) at (5.25, 12.75) {};
		\node [style=none] (24) at (6.25, 12.75) {};
		\node [style=none] (25) at (5.75, 10.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (25.center) to (22);
		\draw (22) to (21);
		\draw [in=-90, out=150] (21) to (23.center);
		\draw [in=-90, out=30] (21) to (24.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (26) at (7.75, 11.25) {};
		\node [style=none] (27) at (7.25, 12) {};
		\node [style=none] (28) at (8.25, 12) {};
		\node [style=none] (29) at (7.75, 10.5) {};
		\node [style=map] (30) at (7.25, 12) {$\theta$};
		\node [style=none] (31) at (7.25, 12.75) {};
		\node [style=none] (32) at (8.25, 12.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=150] (26) to (27.center);
		\draw [in=-90, out=30] (26) to (28.center);
		\draw (29.center) to (26);
		\draw (30) to (31.center);
		\draw (32.center) to (28.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

Phases for Frobenius algebras are preserved by composition; and they form a group called the {\bf phase group} for the Frobenius algebra.  The phase group associated with a commutative Frobenius algebra is therefore Abelian.
\end{definition}

The motivating example is again  $\FHilb$:
\begin{example}
Given an orthonormal basis $\{| j \rangle \}_{j \in I}$ in $\FHilb$, of dimension $d$, the phases are generated by the following unitaries, for all $\{\theta_0,\ldots, \theta_{d-1}\} \in [0, 1)^d$:

$$\sum_{j=0}^{d-1} e^{  2\pi \cdot i \cdot j \cdot \theta_j/d }|  j \rangle\langle j|$$


\end{example}

Therefore, working up to global phase, fix $\theta_0=0$.

%The curve  $\{e^{2 \pi \cdot i \cdot \theta}\ | \ \theta \in [0, 1)\}$ carves out the unit circle in the complex plane so the phase group is isomorphic to the circle (hence the name).


The normal form for spiders extends to spiders with phases:

\begin{lemma}[Phased spider theorem]
The connected components of a commutative \dag-Frobenius algebra and its phase group can be factorized into the following form; which we will call a phased-spider:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (4.75, 3.25) {};
		\node [style=Z] (1) at (4, 4.25) {};
		\node [style=Z] (2) at (4.75, 1.75) {};
		\node [style=Z] (3) at (4, 0.75) {};
		\node [style=none] (4) at (5, 4.25) {};
		\node [style=none] (5) at (5, 0.75) {};
		\node [style=none] (6) at (3.75, 0) {};
		\node [style=none] (7) at (5, 5) {};
		\node [style=none] (8) at (5, 0) {};
		\node [style=none] (9) at (4.25, 5) {};
		\node [style=none] (10) at (3.75, 5) {};
		\node [style=none] (11) at (4.25, 0) {};
		\node [style=none] (12) at (4.5, 3.5) {};
		\node [style=none] (13) at (4, 4) {};
		\node [style=none] (14) at (4, 1) {};
		\node [style=none] (15) at (4.5, 1.5) {};
		\node [style=none] (16) at (4.25, 3.75) {$\ddots$};
		\node [style=none] (17) at (4.25, 1.25) {$\reflectbox{$\ddots$}$};
		\node [style=none] (18) at (4.7, 0) {$\cdots$};
		\node [style=none] (19) at (4.7, 5) {$\cdots$};
		\node [style=map] (20) at (4.75, 2.5) {$\theta$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (7.center) to (4.center);
		\draw [in=105, out=-90] (10.center) to (1);
		\draw [in=60, out=-90, looseness=0.75] (4.center) to (0);
		\draw [in=-90, out=75] (1) to (9.center);
		\draw [in=300, out=90] (5.center) to (2);
		\draw [in=90, out=-120] (3) to (6.center);
		\draw [in=90, out=-60] (3) to (11.center);
		\draw (8.center) to (5.center);
		\draw (0) to (2);
		\draw (3) to (14.center);
		\draw (15.center) to (2);
		\draw (13.center) to (1);
		\draw (0) to (12.center);
	\end{pgfonlayer}
\end{tikzpicture}
=:
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.5, 1.75) {};
		\node [style=none] (1) at (2.75, 1.75) {};
		\node [style=none] (2) at (2, 1.75) {};
		\node [style=none] (3) at (2.45, 1.75) {$\cdots$};
		\node [style=none] (4) at (2.75, 3.25) {};
		\node [style=none] (5) at (2, 3.25) {};
		\node [style=none] (6) at (1.5, 3.25) {};
		\node [style=none] (7) at (2.45, 3.25) {$\cdots$};
		\node [style=Z] (8) at (2, 2.5) {$\ \theta\ $};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=45] (8) to (4.center);
		\draw (8) to (5.center);
		\draw [in=135, out=-90] (6.center) to (8);
		\draw [in=90, out=-150] (8) to (0.center);
		\draw (2.center) to (8);
		\draw [in=90, out=-30] (8) to (1.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

The normal form induces a phased spider fusion rule:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.5, -0.5) {};
		\node [style=none] (1) at (0.5, -0.5) {};
		\node [style=none] (2) at (1, -0.5) {$\cdots$};
		\node [style=none] (3) at (0.5, -2.75) {};
		\node [style=Z] (4) at (1, -1.25) {$\ \theta\ $};
		\node [style=none] (5) at (2, -0.5) {};
		\node [style=none] (6) at (1.5, -2.75) {$\cdots$};
		\node [style=none] (7) at (1, -2.75) {};
		\node [style=Z] (8) at (1.5, -2) {$\ \phi\ $};
		\node [style=none] (9) at (2, -2.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-124, out=90] (3.center) to (4);
		\draw [in=-90, out=56] (4) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
		\draw [in=-90, out=56] (8) to (5.center);
		\draw (8) to (4);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (11) at (4, -0.5) {};
		\node [style=none] (12) at (3, -0.5) {};
		\node [style=none] (13) at (3.5, -0.5) {$\cdots$};
		\node [style=none] (14) at (2.5, -2) {};
		\node [style=none] (15) at (3.5, -1.25) {};
		\node [style=none] (16) at (4.5, -0.5) {};
		\node [style=none] (17) at (3.5, -2) {};
		\node [style=none] (18) at (3, -2) {};
		\node [style=Z] (19) at (3.5, -1.25) {$\ \theta+\phi\ $};
		\node [style=none] (20) at (4, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-150, out=90] (14.center) to (15);
		\draw [in=-90, out=56] (15) to (11.center);
		\draw [in=124, out=-90] (12.center) to (15);
		\draw [in=-124, out=90] (18.center) to (19);
		\draw [in=90, out=-56] (19) to (20.center);
		\draw [in=-90, out=30] (19) to (16.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

Or in the case when the Frobenius algebra is moreover special:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (32) at (20.25, -0.5) {};
		\node [style=none] (33) at (19.25, -0.5) {};
		\node [style=none] (34) at (19.75, -0.5) {$\cdots$};
		\node [style=none] (35) at (19.25, -2.75) {};
		\node [style=Z] (36) at (19.75, -1.25) {$\ \theta\ $};
		\node [style=none] (37) at (20.75, -0.5) {};
		\node [style=none] (38) at (20.25, -2.75) {$\cdots$};
		\node [style=none] (39) at (19.75, -2.75) {};
		\node [style=Z] (40) at (20.25, -2) {$\ \phi\ $};
		\node [style=none] (41) at (20.75, -2.75) {};
		\node [style=none] (42) at (20, -1.5) {\reflectbox{$\ddots$}};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (35.center) to (36);
		\draw [in=-90, out=56] (36) to (32.center);
		\draw [in=124, out=-90] (33.center) to (36);
		\draw [in=-124, out=90] (39.center) to (40);
		\draw [in=90, out=-56] (40) to (41.center);
		\draw [in=-90, out=45] (40) to (37.center);
		\draw [bend right=45, looseness=1.25] (40) to (36);
		\draw [bend right=45, looseness=1.25] (36) to (40);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (11) at (4, -0.5) {};
		\node [style=none] (12) at (3, -0.5) {};
		\node [style=none] (13) at (3.5, -0.5) {$\cdots$};
		\node [style=none] (14) at (2.5, -2) {};
		\node [style=none] (15) at (3.5, -1.25) {};
		\node [style=none] (16) at (4.5, -0.5) {};
		\node [style=none] (17) at (3.5, -2) {$\cdots$};
		\node [style=none] (18) at (3, -2) {};
		\node [style=Z] (19) at (3.5, -1.25) {$\ \theta+\phi\ $};
		\node [style=none] (20) at (4, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-150, out=90] (14.center) to (15);
		\draw [in=-90, out=56] (15) to (11.center);
		\draw [in=124, out=-90] (12.center) to (15);
		\draw [in=-124, out=90] (18.center) to (19);
		\draw [in=90, out=-56] (19) to (20.center);
		\draw [in=-90, out=30] (19) to (16.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

This notation is compatible with the non-phased spider notation, where a spider drawn with no phase corresponds to a phased spider whose phase is the identity:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (4, -0.5) {};
		\node [style=none] (1) at (3, -0.5) {};
		\node [style=none] (2) at (3.5, -0.5) {$\cdots$};
		\node [style=none] (4) at (3.5, -1.25) {};
		\node [style=none] (6) at (3.5, -2) {$\cdots$};
		\node [style=none] (7) at (3, -2) {};
		\node [style=Z] (8) at (3.5, -1.25) {};
		\node [style=none] (9) at (4, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=56] (4.center) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4.center);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (4, -0.5) {};
		\node [style=none] (1) at (3, -0.5) {};
		\node [style=none] (2) at (3.5, -0.5) {$\cdots$};
		\node [style=none] (4) at (3.5, -1.25) {};
		\node [style=none] (6) at (3.5, -2) {$\cdots$};
		\node [style=none] (7) at (3, -2) {};
		\node [style=Z] (8) at (3.5, -1.25) { $\ 0\ $ };
		\node [style=none] (9) at (4, -2) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=56] (4.center) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4.center);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
\end{lemma}




\begin{definition}
\label{def:zx}
Given some fixed dimension $d$, a fragment of the qudit {\bf ZX-calculus} is a single-sorted symmetric monoidal theory generated by two strongly complementary spiders, each of which is parameterized by phase group.  We also require that this comes equipped with a faithful $\dag$-symmetric monoidal functor into $\Mat_\C$, sending one spider to the $X$-spider and the other to the $Z$-spider, in a way that preserves the phase group structure.

That is to say, a monoidal theory two spiders decorated phase groups $G$ and $H$ and group homomorphisms $g:G\to [0,1)^d$ and $h:H\to [0,1)^d$, respectively such that:

$$
\left\llbracket\ 
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (4, -0.5) {};
		\node [style=none] (1) at (3, -0.5) {};
		\node [style=none] (2) at (3.5, -0.75) {$\cdots$};
		\node [style=Z] (4) at (3.5, -1.25) {$\ \phi \ $};
		\node [style=none] (6) at (3.5, -1.75) {$\cdots$};
		\node [style=none] (7) at (3, -2) {};
		\node [style=none] (8) at (3.5, -1.25) {};
		\node [style=none] (9) at (4, -2) {};
		\node [style=none] (10) at (3.5, -2) {$n$};
		\node [style=none] (11) at (3.5, -0.5) {$m$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=56] (4) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
=
\sum_{j=0}^{d-1} e^{2\cdot \pi \cdot i \cdot j\cdot g_j(\phi)/d} | j, \ldots, j\rangle \langle j,\ldots, j|
$$
$$
\left\llbracket\ 
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (4, -0.5) {};
		\node [style=none] (1) at (3, -0.5) {};
		\node [style=none] (2) at (3.5, -0.75) {$\cdots$};
		\node [style=X] (4) at (3.5, -1.25) {$\ \psi\ $};
		\node [style=none] (6) at (3.5, -1.75) {$\cdots$};
		\node [style=none] (7) at (3, -2) {};
		\node [style=none] (8) at (3.5, -1.25) {};
		\node [style=none] (9) at (4, -2) {};
		\node [style=none] (10) at (3.5, -2) {$n$};
		\node [style=none] (11) at (3.5, -0.5) {$m$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=56] (4) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
=
\sqrt{d}
\sum_{j=0}^{d-1} e^{2\cdot \pi \cdot i \cdot j\cdot h_j(\psi)/d} \mathcal{F} | j, \ldots, j\rangle \langle j,\ldots, j| \mathcal{F}^\dag
$$

A fragment of the ZX-calculus, is {\bf complete} when this interpretation is faithful. 
\end{definition}

Notice how we have normalized the $X$ spider, but not the $X$ spider, so that they interact to form Hopf algebras on the nose.  This choice of normalization will be useful for our purposes. However, in the literature other scaling factors are used; notably the flexsymmetric scaling of \cite[\S 5]{flexsymmetric}.  Also, in the ZX-calculus literature it is commonplace to index the phases over $[0,2\pi)^d$ rather than over $[0,1)$.  We chose the latter  because it is much more amenable to generalization away from quantum mechanics. 

The {\bf scalable ZX-calculus} \cite{szx} refers to the proof nets for fragments of the ZX-calculus Frobenius algebras on wires of composite dimension are denoted as follows:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (21) at (-1, 2.5) {};
		\node [style=none] (23) at (-1.5, 3.5) {};
		\node [style=none] (24) at (-0.5, 3.5) {};
		\node [style=none] (29) at (-1, 3.3) {$\cdots$};
		\node [style=none] (30) at (-1, 2.5) {$\ \theta_L, \theta_R \ $};
		\node [style=Z] (300) at (-1, 2.5) {$\ \theta_L, \theta_R \ $};
		\node [style=none] (32) at (-1.5, 1.5) {};
		\node [style=none] (33) at (-0.5, 1.5) {};
		\node [style=none] (38) at (-1, 1.7) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple, in=270, out=45] (21) to (24.center);
		\draw [style=simple, in=135, out=-90] (23.center) to (21);
		\draw [style=simple, in=90, out=-45] (30) to (33.center);
		\draw [style=simple, in=-135, out=90] (32.center) to (30);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (0.5, 2.5) {};
		\node [style=Z] (1) at (1.5, 2.5) {};
		\node [style=none] (4) at (0.5, 3.25) {};
		\node [style=none] (5) at (1.5, 3.25) {};
		\node [style=none] (6) at (0.5, 3.75) {};
		\node [style=none] (7) at (1.5, 3.75) {};
		\node [style=otimes] (9) at (1.5, 3.25) {};
		\node [style=otimes] (10) at (0.5, 3.25) {};
		\node [style=none] (11) at (1, 3.5) {$\cdots$};
		\node [style=Z] (12) at (0.5, 2.5) {$\ \theta_L \ $};
		\node [style=Z] (13) at (1.5, 2.5) {$\ \theta_R \ $};
		\node [style=none] (14) at (0.5, 1.75) {};
		\node [style=none] (15) at (1.5, 1.75) {};
		\node [style=none] (16) at (0.5, 1.25) {};
		\node [style=none] (17) at (1.5, 1.25) {};
		\node [style=otimes] (18) at (1.5, 1.75) {};
		\node [style=otimes] (19) at (0.5, 1.75) {};
		\node [style=none] (20) at (1, 1.5) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (0) to (5.center);
		\draw [style=simple, in=120, out=-120, looseness=1.25] (4.center) to (0);
		\draw [style=simple, in=-60, out=60, looseness=1.25] (1) to (5.center);
		\draw [style=simple] (1) to (4.center);
		\draw [style=simple] (4.center) to (6.center);
		\draw [style=simple] (5.center) to (7.center);
		\draw [style=simple] (12) to (15.center);
		\draw [style=simple, in=-120, out=120, looseness=1.25] (14.center) to (12);
		\draw [style=simple, in=60, out=-60, looseness=1.25] (13) to (15.center);
		\draw [style=simple] (13) to (14.center);
		\draw [style=simple] (14.center) to (16.center);
		\draw [style=simple] (15.center) to (17.center);
	\end{pgfonlayer}
\end{tikzpicture}\ ,
\hspace*{.5cm}
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (21) at (-1, 2.5) {};
		\node [style=none] (23) at (-1.5, 3.5) {};
		\node [style=none] (24) at (-0.5, 3.5) {};
		\node [style=none] (29) at (-1, 3.3) {$\cdots$};
		\node [style=none] (30) at (-1, 2.5) {};
		\node [style=X] (300) at (-1, 2.5) {$\ \theta_L,\theta_R\ $};
		\node [style=none] (32) at (-1.5, 1.5) {};
		\node [style=none] (33) at (-0.5, 1.5) {};
		\node [style=none] (38) at (-1, 1.7) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple, in=270, out=45] (21) to (24.center);
		\draw [style=simple, in=135, out=-90] (23.center) to (21);
		\draw [style=simple, in=90, out=-45] (30) to (33.center);
		\draw [style=simple, in=-135, out=90] (32.center) to (30);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (0) at (0.5, 2.5) {};
		\node [style=X] (1) at (1.5, 2.5) {};
		\node [style=none] (4) at (0.5, 3.25) {};
		\node [style=none] (5) at (1.5, 3.25) {};
		\node [style=none] (6) at (0.5, 3.75) {};
		\node [style=none] (7) at (1.5, 3.75) {};
		\node [style=otimes] (9) at (1.5, 3.25) {};
		\node [style=otimes] (10) at (0.5, 3.25) {};
		\node [style=none] (11) at (1, 3.5) {$\cdots$};
		\node [style=X] (12) at (0.5, 2.5) {$\ \theta_L \ $};
		\node [style=X] (13) at (1.5, 2.5) {$\ \theta_R \ $};
		\node [style=none] (14) at (0.5, 1.75) {};
		\node [style=none] (15) at (1.5, 1.75) {};
		\node [style=none] (16) at (0.5, 1.25) {};
		\node [style=none] (17) at (1.5, 1.25) {};
		\node [style=otimes] (18) at (1.5, 1.75) {};
		\node [style=otimes] (19) at (0.5, 1.75) {};
		\node [style=none] (20) at (1, 1.5) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [style=simple] (0) to (5.center);
		\draw [style=simple, in=120, out=-120, looseness=1.25] (4.center) to (0);
		\draw [style=simple, in=-60, out=60, looseness=1.25] (1) to (5.center);
		\draw [style=simple] (1) to (4.center);
		\draw [style=simple] (4.center) to (6.center);
		\draw [style=simple] (5.center) to (7.center);
		\draw [style=simple] (12) to (15.center);
		\draw [style=simple, in=-120, out=120, looseness=1.25] (14.center) to (12);
		\draw [style=simple, in=60, out=-60, looseness=1.25] (13) to (15.center);
		\draw [style=simple] (13) to (14.center);
		\draw [style=simple] (14.center) to (16.center);
		\draw [style=simple] (15.center) to (17.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
As we use proof nets for monoidal categories extensively throughout this thesis, we won't declare when we are using scalable ZX-notation; it will just be the default setting which we work in.


Consider the simplest fragment of the ZX-calculus:

\begin{definition}
The {\bf phase-free} qudit ZX-calculus
is the fragment of the ZX-calculus generated by both Frobenius algebras with no phases.
%
%\begin{align*}
%\left\llbracket\ 
%\begin{tikzpicture}
%	\begin{pgfonlayer}{nodelayer}
%		\node [style=none] (0) at (4, -0.5) {};
%		\node [style=none] (1) at (3, -0.5) {};
%		\node [style=none] (2) at (3.5, -0.75) {$\cdots$};
%		\node [style=Z] (4) at (3.5, -1.25) {};
%		\node [style=none] (6) at (3.5, -1.75) {$\cdots$};
%		\node [style=none] (7) at (3, -2) {};
%		\node [style=Z] (8) at (3.5, -1.25) {};
%		\node [style=none] (9) at (4, -2) {};
%		\node [style=none] (10) at (3.5, -2) {$n$};
%		\node [style=none] (11) at (3.5, -0.5) {$m$};
%	\end{pgfonlayer}
%	\begin{pgfonlayer}{edgelayer}
%		\draw [in=-90, out=56] (4) to (0.center);
%		\draw [in=124, out=-90] (1.center) to (4);
%		\draw [in=-124, out=90] (7.center) to (8);
%		\draw [in=90, out=-56] (8) to (9.center);
%	\end{pgfonlayer}
%\end{tikzpicture}
%\ \right\rrbracket
%&=
%\dfrac{1}{\sqrt{p}}
%\sum_{j=0}^{p-1} | j, \ldots, j\rangle \langle j,\ldots, j|\\
%\left\llbracket\ 
%\begin{tikzpicture}
%	\begin{pgfonlayer}{nodelayer}
%		\node [style=none] (0) at (4, -0.5) {};
%		\node [style=none] (1) at (3, -0.5) {};
%		\node [style=none] (2) at (3.5, -0.75) {$\cdots$};
%		\node [style=X] (4) at (3.5, -1.25) {};
%		\node [style=none] (6) at (3.5, -1.75) {$\cdots$};
%		\node [style=none] (7) at (3, -2) {};
%		\node [style=none] (8) at (3.5, -1.25) {};
%		\node [style=none] (9) at (4, -2) {};
%		\node [style=none] (10) at (3.5, -2) {$n$};
%		\node [style=none] (11) at (3.5, -0.5) {$m$};
%	\end{pgfonlayer}
%	\begin{pgfonlayer}{edgelayer}
%		\draw [in=-90, out=56] (4) to (0.center);
%		\draw [in=124, out=-90] (1.center) to (4);
%		\draw [in=-124, out=90] (7.center) to (8);
%		\draw [in=90, out=-56] (8) to (9.center);
%	\end{pgfonlayer}
%\end{tikzpicture}
%\ \right\rrbracket
%&=
%\sum_{j=0}^{p-1}  \mathcal{F} | j, \ldots, j\rangle \langle j,\ldots, j| \mathcal{F}^\dag\\
%&=
%\sum_{\forall (x_j) \in \F_p^n,  (y_k) \in \F_p^m: \sum  x_j= \sum y _k \mod p} | y_1 ,\ldots, y_n \rangle \langle  x_1,\ldots, x_n|
%\end{align*}
\end{definition}


This has a relational semantics; to expose which we need the following definition:


\begin{definition}
A unitary map $f:\mathcal{H}\to \mathcal{H}$ is a {\bf stabilizer} of a state $|\phi\rangle$ on $\mathcal H$ in case $\phi$ is a +1-eigenvector of $g$ so that $g| \phi\rangle = |\phi \rangle$.


The qudit ${\cal X}$-gate  shifts the computational basis vectors by $a$ modulo $p$:

$${\cal X} := \sum_{b=0}^{p-1} | b+1\rangle \langle b|$$

An $X$-stabilizer of an $n$-qudit state $\phi$ is a stabilizer of the form:

$$
\bigotimes_{j=0}^{n-1}{\cal X}_{(j)}^{a_j}
$$

Where the subscript $(j)$ denotes that we are applying a gate on wire $(j)$ tensored on both sides with identities.


\end{definition}

The $X$ stabilizers characterize the phase-free ZX-calculus (this has been known for quite some time to both the Italian and Oxford groups in the qubit case, see for example \cite[p. 8]{ih}):

\begin{lemma}
Given an odd prime $p$, $\LinRel_{\F_p}$ is isomorphic to the qupit phase-free ZX-calculus modulo invertible scalars.
\end{lemma}

\begin{proof}
Given a phase-free ZX-diagram it is easy to see how the $X$-stabilizers form a linear subspace over $\F_p$ as follows:
$$
\left\llbracket
D
\right\rrbracket_X
:=
\left\{ 
\left(
\begin{pmatrix}
           a_{1} \\
           \vdots \\
           a_{n}
\end{pmatrix}
,
\begin{pmatrix}
           b_{1} \\
           \vdots \\
           b_{m}
\end{pmatrix}
\right) \in \F_p^{n}\oplus\F_p^m
\ : \
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (1, 0) {$D$};
		\node [style=map] (1) at (0.45, 0.75) {${\cal X}^{b_1}$};
		\node [style=map] (2) at (1.55, 0.75) {${\cal X}^{b_m}$};
		\node [style=map] (3) at (1.55, -0.75) {${\cal X}^{a_n}$};
		\node [style=map] (4) at (0.45, -0.75) {${\cal X}^{a_1}$};
		\node [style=none] (5) at (0.45, 1.25) {};
		\node [style=none] (6) at (1.55, 1.25) {};
		\node [style=none] (7) at (0.45, -1.25) {};
		\node [style=none] (8) at (1.55, -1.25) {};
		\node [style=none] (9) at (1, 1.2) {$\cdots$};
		\node [style=none] (10) at (1, -1.2) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=45] (0) to (2);
		\draw [in=-45, out=90] (3) to (0);
		\draw [in=-90, out=135] (0) to (1);
		\draw [in=-135, out=90] (4) to (0);
		\draw (1) to (5.center);
		\draw (7.center) to (4);
		\draw (8.center) to (3);
		\draw (2) to (6.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=map] (0) at (0, 0) {$D$};
		\node [style=none] (1) at (-0.5, 0.75) {};
		\node [style=none] (2) at (0.5, 0.75) {};
		\node [style=none] (3) at (0.5, -0.75) {};
		\node [style=none] (4) at (-0.5, -0.75) {};
		\node [style=none] (9) at (0, 0.5) {$\cdots$};
		\node [style=none] (10) at (0, -0.5) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=45] (0) to (2);
		\draw [in=-45, out=90] (3) to (0);
		\draw [in=-90, out=135] (0) to (1);
		\draw [in=-135, out=90] (4) to (0);
	\end{pgfonlayer}
\end{tikzpicture}
 \right\}
$$

Conversely, given an $\F_p$-linear subspace, take the joint $+1$-eigenspace on the space spanned by the corresponding $X$-stabilizers.  If we partition the codomain of the state into an input and output, bending the input wires down with the white spider yields an inverse to the previous mapping.
\end{proof}

\begin{example}
Consider the following phase-free ZX-diagram: 
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.75, 0.25) {};
		\node [style=X] (1) at (43.25, 0.75) {};
		\node [style=none] (2) at (42.5, -0.25) {};
		\node [style=none] (3) at (43, -0.25) {};
		\node [style=none] (4) at (43.5, -0.25) {};
		\node [style=none] (5) at (42.5, 1.25) {};
		\node [style=none] (6) at (43, 1.25) {};
		\node [style=none] (7) at (43.5, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=285, out=90] (4.center) to (1);
		\draw [in=-90, out=135] (1) to (6.center);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=105] (0) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

Its $X$ stabilizers are parameterized by all the  $a_1,a_2,a_3,b_1,b_2,b_3 \in \F_p$ such that:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.725, 0.5) {};
		\node [style=X] (1) at (43.775, 0.75) {};
		\node [style=none] (2) at (42.2, -0.25) {};
		\node [style=none] (3) at (43.25, -0.25) {};
		\node [style=none] (4) at (44.3, -0.25) {};
		\node [style=none] (5) at (42.2, 1.5) {};
		\node [style=none] (6) at (43.25, 1.5) {};
		\node [style=none] (7) at (44.3, 1.5) {};
		\node [style=none] (8) at (42.2, 2.25) {};
		\node [style=none] (9) at (43.25, 2.25) {};
		\node [style=none] (10) at (44.3, 2.25) {};
		\node [style=none] (11) at (42.2, -1) {};
		\node [style=none] (12) at (43.25, -1) {};
		\node [style=none] (13) at (44.3, -1) {};
		\node [style=map] (14) at (42.2, -0.25) {${\cal X}^{a_1}$};
		\node [style=map] (15) at (43.25, -0.25) {${\cal X}^{a_2}$};
		\node [style=map] (16) at (44.3, -0.25) {${\cal X}^{a_3}$};
		\node [style=map] (17) at (42.2, 1.5) {${\cal X}^{b_1}$};
		\node [style=map] (18) at (43.25, 1.5) {${\cal  X}^{b_2}$};
		\node [style=map] (19) at (44.3, 1.5) {${\cal X}^{b_3}$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=285, out=90] (4.center) to (1);
		\draw [in=-90, out=135] (1) to (6.center);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=105] (0) to (5.center);
		\draw (5.center) to (8.center);
		\draw (6.center) to (9.center);
		\draw (7.center) to (10.center);
		\draw (13.center) to (4.center);
		\draw (12.center) to (3.center);
		\draw (11.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.75, 0.5) {};
		\node [style=X] (1) at (43.75, 0.75) {};
		\node [style=none] (2) at (42.25, -0.25) {};
		\node [style=none] (3) at (43.25, -0.25) {};
		\node [style=none] (4) at (44.25, -0.25) {};
		\node [style=none] (5) at (42.25, 1.5) {};
		\node [style=none] (6) at (43.25, 1.5) {};
		\node [style=none] (7) at (44.25, 1.5) {};
		\node [style=none] (8) at (42.25, 2.25) {};
		\node [style=none] (9) at (43.25, 2.25) {};
		\node [style=none] (10) at (44.25, 2.25) {};
		\node [style=none] (11) at (42.25, -1) {};
		\node [style=none] (12) at (43.25, -1) {};
		\node [style=none] (13) at (44.25, -1) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=285, out=90] (4.center) to (1);
		\draw [in=-90, out=135] (1) to (6.center);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=105] (0) to (5.center);
		\draw (5.center) to (8.center);
		\draw (6.center) to (9.center);
		\draw (7.center) to (10.center);
		\draw (13.center) to (4.center);
		\draw (12.center) to (3.center);
		\draw (11.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
By labeling the wires with linear equations over $\F_p$, we can calculate these stabilizers:
$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.75, 0.5) {};
		\node [style=X] (1) at (43.75, 0.75) {};
		\node [style=none] (2) at (42.25, -0.25) {};
		\node [style=none] (3) at (43.25, -0.25) {};
		\node [style=none] (4) at (44.25, -0.25) {};
		\node [style=none] (5) at (42.25, 1.5) {};
		\node [style=none] (6) at (43.25, 1.5) {};
		\node [style=none] (7) at (44.25, 1.5) {};
		\node [style=none] (8) at (42.25, 2.25) {};
		\node [style=none] (9) at (43.25, 2.25) {};
		\node [style=none] (10) at (44.25, 2.25) {};
		\node [style=none] (11) at (42.25, -1) {};
		\node [style=none] (12) at (43.25, -1) {};
		\node [style=none] (13) at (44.25, -1) {};
		\node [style=none,color=blue] (14) at (42, -0.5) {$a_1$};
		\node [style=none,color=blue] (15) at (43, -0.5) {$a_2$};
		\node [style=none,color=blue] (16) at (44, -0.5) {$a_3$};
		\node [style=none,color=blue] (17) at (42, 1.75) {$b_1$};
		\node [style=none,color=blue] (18) at (43, 1.75) {$b_2$};
		\node [style=none,color=blue] (19) at (44, 1.75) {$b_3$};
		\node [style=none,color=blue] (20) at (40.75, 0.5) {$a_1=a_2=b_1$};
		\node [style=none,color=blue] (21) at (45.75, 0.75) {$a_1+a_3=b_2+b_3$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=285, out=90] (4.center) to (1);
		\draw [in=-90, out=135] (1) to (6.center);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=105] (0) to (5.center);
		\draw (5.center) to (8.center);
		\draw (6.center) to (9.center);
		\draw (7.center) to (10.center);
		\draw (13.center) to (4.center);
		\draw (12.center) to (3.center);
		\draw (11.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
Which gives us a linear subspace of $\F_p^{3} \oplus \F_p^3$:

\hfil\scalebox{.9}{$
\left\llbracket
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.75, 0.25) {};
		\node [style=X] (1) at (43.25, 0.75) {};
		\node [style=none] (2) at (42.5, -0.25) {};
		\node [style=none] (3) at (43, -0.25) {};
		\node [style=none] (4) at (43.5, -0.25) {};
		\node [style=none] (5) at (42.5, 1.25) {};
		\node [style=none] (6) at (43, 1.25) {};
		\node [style=none] (7) at (43.5, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=285, out=90] (4.center) to (1);
		\draw [in=-90, out=135] (1) to (6.center);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=105] (0) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
\right\rrbracket_X
=
\left\{
\left(
\begin{pmatrix}
           a_{1} \\
           a_{2} \\
           a_{3}
\end{pmatrix}
,
\begin{pmatrix}
           b_{1} \\
           b_{2} \\
           b_{3}
\end{pmatrix}
\right)
: a_1,a_2,a_3,b_1,b_2,b_3 \in \F_p,
a_1=a_2=b_1\wedge
a_1+a_3 = b_2+b_3
\right\}
$}
\end{example}



We can go add some phases to get a bit more expressiveness:
\begin{definition}
The $\cal X$-gate fragment of the ZX-calculus is given by adjoining the $\cal X$-gate as a generator to the phase free ZX-calculus.
\end{definition}


For any prime qudit dimension $d$, the qudit $\cal X$-gate is a phase for the 
$X$-spider as:

$$
{\cal X} =
 \sum_{b=0}^{p-1} | b+1\rangle \langle b|
=
 \sum_{j=0}^{p-1} e^{2 \pi\cdot i\cdot j/p} {\mathcal F}^\dag | j \rangle \langle j|  {\mathcal F}
$$

Therefore, natural number powers of the ${\cal X}$-gate are also phases for the $X$-spider as:

$$
{\cal X}^n
= 
 \sum_{bj=0}^{p-1} | j+n\rangle \langle j|
=
\sum_{j=0}^{p-1} e^{2 \pi\cdot i\cdot n\cdot j/p} {\mathcal F}^\dag | j \rangle \langle j|  {\mathcal F}
$$

So one can ask if the the fragment of the odd prime qudit ZX-calculus with these $\cal X$-gate phases has a similar relational semantics to the phase-free ZX-calculus.  The answer is yes, and this result is not contained in the literature to my knowledge:

\begin{lemma}
$\Aff\Rel_{\F_p}$ is isomorphic to the qupit fragment of the ZX-calculus with Pauli $\cal X$-gates as phases modulo invertible scalars.
\end{lemma}
This is given by the interpretation:
$$
\left\llbracket\ 
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (4, -0.5) {};
		\node [style=none] (1) at (3, -0.5) {};
		\node [style=none] (2) at (3.5, -0.75) {$\cdots$};
		\node [style=Z] (4) at (3.5, -1.25) {};
		\node [style=none] (6) at (3.5, -1.75) {$\cdots$};
		\node [style=none] (7) at (3, -2) {};
		\node [style=Z] (8) at (3.5, -1.25) {};
		\node [style=none] (9) at (4, -2) {};
		\node [style=none] (10) at (3.5, -2) {$n$};
		\node [style=none] (11) at (3.5, -0.5) {$m$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=56] (4) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
=
\sum_{i=0}^{p-1} | i, \ldots, i\rangle \langle i,\ldots, i|
$$
$$
\left\llbracket\ 
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (4, -0.5) {};
		\node [style=none] (1) at (3, -0.5) {};
		\node [style=none] (2) at (3.5, -0.75) {$\cdots$};
		\node [style=X] (4) at (3.5, -1.25) {$\ a\ $};
		\node [style=none] (6) at (3.5, -1.75) {$\cdots$};
		\node [style=none] (7) at (3, -2) {};
		\node [style=none] (8) at (3.5, -1.25) {};
		\node [style=none] (9) at (4, -2) {};
		\node [style=none] (10) at (3.5, -2) {$n$};
		\node [style=none] (11) at (3.5, -0.5) {$m$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-90, out=56] (4) to (0.center);
		\draw [in=124, out=-90] (1.center) to (4);
		\draw [in=-124, out=90] (7.center) to (8);
		\draw [in=90, out=-56] (8) to (9.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ \right\rrbracket
=
\sum_{\sum  x_i = \sum y _j +a \mod p} | y_1 ,\ldots, y_n \rangle \langle  x_1,\ldots, x_n|
$$

The proof is almost identical to that for linear relations and phase-free ZX-diagrams.



\begin{example}
Consider the following phase-free+$\cal X$-gate ZX-diagram:


$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.75, 0.5) {};
		\node [style=X] (1) at (43.75, 0.75) {};
		\node [style=none] (2) at (42.25, -0.25) {};
		\node [style=none] (3) at (43.25, -0.25) {};
		\node [style=none] (4) at (44.25, -0.25) {};
		\node [style=none] (5) at (42.25, 2.25) {};
		\node [style=none] (6) at (43.25, 2.25) {};
		\node [style=none] (7) at (44.25, 2.25) {};
		\node [style=map] (8) at (43.25, 1.5) {${\cal X}^c$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=285, out=90] (4.center) to (1);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=105] (0) to (5.center);
		\draw [in=-90, out=150] (1) to (8);
		\draw (8) to (6.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

To compute the $X$ stabilizers is to find the $a_1,a_2,a_3,b_1,b_2,b_3 \in \F_p$ such that

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.725, 0) {};
		\node [style=X] (1) at (43.775, 0.25) {};
		\node [style=none] (2) at (42.2, -0.75) {};
		\node [style=none] (3) at (43.25, -0.75) {};
		\node [style=none] (4) at (44.3, -0.75) {};
		\node [style=none] (5) at (42.2, 1.75) {};
		\node [style=none] (6) at (43.25, 1.75) {};
		\node [style=none] (7) at (44.3, 1.75) {};
		\node [style=none] (8) at (42.2, 2.5) {};
		\node [style=none] (9) at (43.25, 2.5) {};
		\node [style=none] (10) at (44.3, 2.5) {};
		\node [style=none] (11) at (42.2, -1.5) {};
		\node [style=none] (12) at (43.25, -1.5) {};
		\node [style=none] (13) at (44.3, -1.5) {};
		\node [style=map] (14) at (42.2, -0.75) {${\cal X}^{a_1}$};
		\node [style=map] (15) at (43.25, -0.75) {${\cal X}^{a_2}$};
		\node [style=map] (16) at (44.3, -0.75) {${\cal X}^{a_3}$};
		\node [style=map] (17) at (42.2, 1.75) {${\cal X}^{b_1}$};
		\node [style=map] (18) at (43.25, 1.75) {${\cal X}^{b_2}$};
		\node [style=map] (19) at (44.3, 1.75) {${\cal X}^{b_3}$};
		\node [style=map] (20) at (43.25, 1) {${\cal X}^c$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=-60, out=90] (4.center) to (1);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=120] (0) to (5.center);
		\draw (5.center) to (8.center);
		\draw (6.center) to (9.center);
		\draw (7.center) to (10.center);
		\draw (13.center) to (4.center);
		\draw (12.center) to (3.center);
		\draw (11.center) to (2.center);
		\draw [in=-90, out=150] (1) to (20);
		\draw (20) to (18);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.75, 0.5) {};
		\node [style=X] (1) at (43.75, 0.75) {};
		\node [style=none] (2) at (42.25, -0.25) {};
		\node [style=none] (3) at (43.25, -0.25) {};
		\node [style=none] (4) at (44.25, -0.25) {};
		\node [style=none] (5) at (42.25, 1.5) {};
		\node [style=none] (6) at (43.25, 1.5) {};
		\node [style=none] (7) at (44.25, 1.5) {};
		\node [style=none] (8) at (42.25, 2.25) {};
		\node [style=none] (9) at (43.25, 2.25) {};
		\node [style=none] (10) at (44.25, 2.25) {};
		\node [style=none] (11) at (42.25, -1) {};
		\node [style=none] (12) at (43.25, -1) {};
		\node [style=none] (13) at (44.25, -1) {};
		\node [style=map] (14) at (43.25, 1.5) {${\cal X}^c$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=285, out=90] (4.center) to (1);
		\draw [in=-90, out=135] (1) to (6.center);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=105] (0) to (5.center);
		\draw (5.center) to (8.center);
		\draw (6.center) to (9.center);
		\draw (7.center) to (10.center);
		\draw (13.center) to (4.center);
		\draw (12.center) to (3.center);
		\draw (11.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

In $\Aff\Rel_{\F_p}$, this equation looks like:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.75, 0) {};
		\node [style=X] (1) at (43.75, 0.25) {$\ c\ $};
		\node [style=none] (2) at (42.25, -0.75) {};
		\node [style=none] (3) at (43.25, -0.75) {};
		\node [style=none] (4) at (44.25, -0.75) {};
		\node [style=none] (5) at (42.25, 1) {};
		\node [style=none] (6) at (43.25, 1) {};
		\node [style=none] (7) at (44.25, 1) {};
		\node [style=none] (8) at (42.25, 1.75) {};
		\node [style=none] (9) at (43.25, 1.75) {};
		\node [style=none] (10) at (44.25, 1.75) {};
		\node [style=none] (11) at (42.25, -1.5) {};
		\node [style=none] (12) at (43.25, -1.5) {};
		\node [style=none] (13) at (44.25, -1.5) {};
		\node [style=X] (14) at (42.25, -0.75) {$\ a_1\ $};
		\node [style=X] (15) at (43.25, -0.75) {$\ a_2\ $};
		\node [style=X] (16) at (44.25, -0.75) {$\ a_3\ $};
		\node [style=X] (17) at (42.25, 1) {$\ b_1\ $};
		\node [style=X] (18) at (43.25, 1) {$\ b_2\ $};
		\node [style=X] (19) at (44.25, 1) {$\ b_3\ $};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=-60, out=90] (4.center) to (1);
		\draw [in=-90, out=135] (1) to (6.center);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=135] (0) to (5.center);
		\draw (5.center) to (8.center);
		\draw (6.center) to (9.center);
		\draw (7.center) to (10.center);
		\draw (13.center) to (4.center);
		\draw (12.center) to (3.center);
		\draw (11.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.75, 0) {};
		\node [style=X] (1) at (43.75, 0.25) {$c$};
		\node [style=none] (2) at (42.25, -0.75) {};
		\node [style=none] (3) at (43.25, -0.75) {};
		\node [style=none] (4) at (44.25, -0.75) {};
		\node [style=none] (5) at (42.25, 1) {};
		\node [style=none] (6) at (43.25, 1) {};
		\node [style=none] (7) at (44.25, 1) {};
		\node [style=none] (8) at (42.25, 1.75) {};
		\node [style=none] (9) at (43.25, 1.75) {};
		\node [style=none] (10) at (44.25, 1.75) {};
		\node [style=none] (11) at (42.25, -1.5) {};
		\node [style=none] (12) at (43.25, -1.5) {};
		\node [style=none] (13) at (44.25, -1.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=-45, out=90] (4.center) to (1);
		\draw [in=-90, out=135] (1) to (6.center);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=135] (0) to (5.center);
		\draw (5.center) to (8.center);
		\draw (6.center) to (9.center);
		\draw (7.center) to (10.center);
		\draw (13.center) to (4.center);
		\draw (12.center) to (3.center);
		\draw (11.center) to (2.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$


These $a_1,a_2,a_3,b_1,b_2,b_3$ are parameterized by the elements of the affine subspace:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (14) at (48.75, 0.5) {};
		\node [style=X] (15) at (49.75, 0.75) {$c$};
		\node [style=none] (16) at (48.25, -0.25) {};
		\node [style=none] (17) at (49.25, -0.25) {};
		\node [style=none] (18) at (50.25, -0.25) {};
		\node [style=none] (19) at (48.25, 1.5) {};
		\node [style=none] (20) at (49.25, 1.5) {};
		\node [style=none] (21) at (50.25, 1.5) {};
		\node [style=none] (22) at (48.25, 2.25) {};
		\node [style=none] (23) at (49.25, 2.25) {};
		\node [style=none] (24) at (50.25, 2.25) {};
		\node [style=none] (25) at (48.25, -1) {};
		\node [style=none] (26) at (49.25, -1) {};
		\node [style=none] (27) at (50.25, -1) {};
		\node [style=none,color=blue] (28) at (48, -0.5) {$a_1$};
		\node [style=none,color=blue] (29) at (49, -0.5) {$a_2$};
		\node [style=none,color=blue] (30) at (50, -0.5) {$a_3$};
		\node [style=none,color=blue] (31) at (48, 1.75) {$b_1$};
		\node [style=none,color=blue] (32) at (49, 1.75) {$b_2$};
		\node [style=none,color=blue] (33) at (50, 1.75) {$b_3$};
		\node [style=none,color=blue] (34) at (46.75, 0.75) {$a_1=a_2=b_1$};
		\node [style=none,color=blue] (35) at (52, 0.75) {$a_1+a_3+c=b_2+b_3$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (16.center) to (14);
		\draw [in=90, out=-45] (14) to (17.center);
		\draw [in=285, out=90] (18.center) to (15);
		\draw [in=-90, out=135] (15) to (20.center);
		\draw [in=-90, out=45] (15) to (21.center);
		\draw (14) to (15);
		\draw [in=-90, out=105] (14) to (19.center);
		\draw (19.center) to (22.center);
		\draw (20.center) to (23.center);
		\draw (21.center) to (24.center);
		\draw (27.center) to (18.center);
		\draw (26.center) to (17.center);
		\draw (25.center) to (16.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$


So that:

$$
\left\llbracket
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=Z] (0) at (42.75, 0.25) {};
		\node [style=X] (1) at (43.25, 0.75) {$c$};
		\node [style=none] (2) at (42.5, -0.25) {};
		\node [style=none] (3) at (43, -0.25) {};
		\node [style=none] (4) at (43.5, -0.25) {};
		\node [style=none] (5) at (42.5, 1.25) {};
		\node [style=none] (6) at (43, 1.25) {};
		\node [style=none] (7) at (43.5, 1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=-135, out=90] (2.center) to (0);
		\draw [in=90, out=-45] (0) to (3.center);
		\draw [in=285, out=90] (4.center) to (1);
		\draw [in=-90, out=135] (1) to (6.center);
		\draw [in=-90, out=45] (1) to (7.center);
		\draw (0) to (1);
		\draw [in=-90, out=105] (0) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
\right\rrbracket
=
\left\{
\left(
\begin{pmatrix}
           a_{1} \\
           a_{2} \\
           a_{3}
\end{pmatrix}
,
\begin{pmatrix}
           b_{1} \\
           b_{2} \\
           b_{3}
\end{pmatrix}
\right)
:
a_1=a_2=a_3\wedge
a_1+a_3+c = b_2+b_3
\right\}
$$

\end{example}



So far, the two fragments of the ZX-calculus we have described are relatively simple; they are actually fragments of stabilizer circuits.  We proceed to overview the qudit stabilizer formalism.  The qubit stabilizer formalism was first introduced in \cite{gottesman} and later generalized to qudits in various ways.  We follow the qudit generalization provided in \cite{gota}:



\begin{definition}
\label{definition:begin}
Fix some dimension $d$.
A single qudit {\bf Weyl operator} an $p$-dimensional unitary generated by the qudit $\mathcal Z$ and $\mathcal X$ operators under matrix multiplication.  
Where:

$$
{\cal Z}^z
:=
{\cal F}
{\cal X}^z
{\cal F}^\dag
=
\sum_{b=0}^{p-1}
e^{2\cdot\pi \cdot z\cdot b/p} | b\rangle \langle b|
$$


The $n$-qudit {\bf Weyl group} is generated by Weyl operators under matrix multiplication and tensor product.


An $n$-qudit {\bf Clifford operator} $U$ is an $d^n$-dimensional unitary that preserves the Weyl group, so that $U {\cal P}_d^{ n} U^\dag = {\cal P}_d^{ n}$.  The $n$-qudit Clifford operators form the $n$-qudit {\bf Clifford group } under matrix multiplication.  The qudit Clifford Groupoid (or full Clifford group) is the prop where the maps $n\to n$ are Clifford operators.


An $n$-qudit (pure) {\bf stabilizer state} is a state $ U |0\rangle^{\otimes n}$ for an $n$-qudit Clifford $U$.


Given any $n$-qudit pure stabilizer state $|\psi \rangle$,  the {\bf stabilizer group} of $|\psi \rangle$   is the subgroup of ${\cal S}_{|\psi\rangle} \subset {\cal P}_d^{ n}$  whose elements  stabilize $|\psi\rangle$.
\end{definition}

The reason why stabilizer states are so nice is because we can chose to work with their very well-behaved stabilizer groups:


\begin{lemma}
Stabilizer states are determined, up to global phase, by their stabilizer groups, and stabilizer groups are in bijection with maximal abelian subgroups of $ {\cal P}_d^{ n}$.
\end{lemma}



\begin{definition}
The prop of qudit {\bf stabilizer circuits}, is the subcategory of $\Mat_\C$ generated by qudit Clifford operators as well as the state $|0\rangle$ and effect $\langle 0|$.
\end{definition}



There is a crucial difference between the  qubit and quopit Weyl group:

\begin{lemma}
Single quopit Weyl operators all can be factored into the following form for $a,z,x \in \F_p$:

$$
e^{2\pi \cdot i\cdot a /p} {\cal Z}^z{\cal X}^x
$$

Whereas single qudit Weyl operators can be factored into the following form for $z,x \in \F_2$ and $a \in \Z/4\Z$:

$$
i^a {\cal Z}^z{\cal X}^x
$$

\end{lemma}

This difference between qubits and quopits  is also reflected in the structure of the Clifford groupoid:

\begin{lemma}[{\cite[Pg. 5]{gota}}]
Up to nonzero scalars, the qupit Clifford groupoid is generated by the Fourier transform $\mathcal F$, the  phase-shift gate $\mathcal S$, controlled-$\mathcal X$ gate $\mathcal{C}_{\mathcal X}$, and scaling gates $\mathcal{M}_a$ for every $a \in \F_p^*$ where:


$$
\mathcal{C}_{\mathcal X}:= \sum_{j,k=0}^{p-1} |j,j+k \rangle \langle j,k |\, \hspace*{.5cm}
\mathcal{M}_a := \sum_{j=0}^{p-1} |j\cdot a \rangle\langle j |
$$ 

Such that for qubits:
$$
\mathcal{S}:= \sum_{j=0}^{1} i^j |j\rangle\langle j |
$$


And for quopits

$$
\mathcal{S}:= \sum_{j=0}^{p-1} e^{\pi\cdot i \cdot j(j-1)/(2p)} |j\rangle\langle j |
$$
\end{lemma}


As we will discuss in much further detail in Chapter \ref{chap:stab}, the ZX-calculus is naturally suited for stabilizer circuits:

\begin{definition}
The {\bf qubit stabilizer fragment of the ZX-calculus} is generated by two spiders with phases in the group $\Z/4\Z$ where
$$
\Z/4\Z \to [0,1)^2; n \mapsto (0,n/4)
$$

The generators of qubit stabilizer circuits are interpreted as follows:


$$
\llbracket {\mathcal F}\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (31) at (14.5, -0.25) {};
		\node [style=none] (32) at (14.5, -2.75) {};
		\node [style=Z] (33) at (14.5, -2.25) {$\hspace*{.05cm}1\hspace*{.05cm}$};
		\node [style=Z] (34) at (14.5, -0.75) {$\hspace*{.05cm}1\hspace*{.05cm}$};
		\node [style=X] (35) at (14.5, -1.5) {$\hspace*{.05cm}1\hspace*{.05cm}$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (32.center) to (33);
		\draw (33) to (35);
		\draw (35) to (34);
		\draw (34) to (31.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {\mathcal S}\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.25, -1) {};
		\node [style=none] (1) at (1.25, -2.5) {};
		\node [style=X] (4) at (1.25, -1.75) {$\hspace*{.05cm}1\hspace*{.05cm}$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (4);
		\draw (4) to (0.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {\mathcal X}\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.25, -1) {};
		\node [style=none] (1) at (1.25, -2.5) {};
		\node [style=X] (4) at (1.25, -1.75) {$\hspace*{.05cm}2\hspace*{.05cm}$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (4);
		\draw (4) to (0.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {\mathcal C}_{\mathcal X}\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (14) at (9.5, -1.75) {};
		\node [style=Z] (15) at (8.75, -1.75) {};
		\node [style=none] (16) at (9.5, -1) {};
		\node [style=none] (17) at (8.75, -1) {};
		\node [style=none] (18) at (9.5, -2.5) {};
		\node [style=none] (19) at (8.75, -2.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (17.center) to (15);
		\draw (15) to (14);
		\draw (14) to (16.center);
		\draw (14) to (18.center);
		\draw (19.center) to (15);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {| 0 \rangle }\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (5) at (6, -2) {};
		\node [style=none] (7) at (6, -1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (5) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {\langle 0 | }\rrbracket=
\begin{tikzpicture}[scale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (5) at (6, -2) {};
		\node [style=none] (7) at (6, -1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (5) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

The {\bf quopit stabilizer fragment of the ZX-calculus} is generated by two spiders with phases in the group $(\Z/p\Z)^2$ where

$$
(\Z/p\Z)^2 \to [0,1)^p; (n,m)\mapsto  \prod_{j=0}^{p-1} (n j +m j^2)/(2p) \mod 1
$$

The generators of quopit stabilizer circuits are interpreted as follows:

$$
\llbracket {\mathcal F}\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.25, 0) {};
		\node [style=none] (1) at (1.25, -3.5) {};
		\node [style=Z] (2) at (1.25, -2.75) {$\hspace*{.05cm}0,1\hspace*{.05cm}$};
		\node [style=Z] (3) at (1.25, -0.75) {$\hspace*{.05cm}0,1\hspace*{.05cm}$};
		\node [style=X] (4) at (1.25, -1.75) {$\hspace*{.05cm}0,-1\hspace*{.05cm}$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (2);
		\draw (2) to (4);
		\draw (4) to (3);
		\draw (3) to (0.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {\mathcal S}\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.25, -1) {};
		\node [style=none] (1) at (1.25, -2.5) {};
		\node [style=X] (4) at (1.25, -1.75) {$\hspace*{.05cm}0,1\hspace*{.05cm}$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (4);
		\draw (4) to (0.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {\mathcal X}\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.25, -1) {};
		\node [style=none] (1) at (1.25, -2.5) {};
		\node [style=X] (4) at (1.25, -1.75) {$\hspace*{.05cm}1,0\hspace*{.05cm}$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (1.center) to (4);
		\draw (4) to (0.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {\mathcal C}_{\mathcal X}\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (8) at (7.75, -1.75) {};
		\node [style=Z] (9) at (7, -2) {};
		\node [style=none] (10) at (7.75, -1) {};
		\node [style=none] (11) at (7, -1) {};
		\node [style=none] (12) at (7.75, -2.75) {};
		\node [style=none] (13) at (7, -2.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (11.center) to (9);
		\draw (9) to (8);
		\draw (8) to (10.center);
		\draw (8) to (12.center);
		\draw (13.center) to (9);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {| 0 \rangle }\rrbracket=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (5) at (6, -2) {};
		\node [style=none] (7) at (6, -1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (5) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}
\ ,\hspace*{.2cm}
\llbracket {\langle 0 | }\rrbracket=
\begin{tikzpicture}[scale=-1]
	\begin{pgfonlayer}{nodelayer}
		\node [style=X] (5) at (6, -2) {};
		\node [style=none] (7) at (6, -1.25) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw (5) to (7.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$
\end{definition}
The scaling gate is derived in stabilizer circuits, so it need not be stated. However it it corresponds to the multiplication of a scalar under the embdedding:

$$
(\Mat_{\F_p},+) \to (\LinRel_{\F_p},+) \to (\Mat_\C,\otimes)
$$

The qubit \cite{backensstab,backens2015} and qutrit \cite{qutrit} stabilizer ZX-calculus both have complete presentations.  However, during the process of writing this thesis, an axiomatization was provided for the quopit ZX-calculus \cite{booth}, followed shortly by an even simpler presentation \cite{poor}.  It is worth noting that the scaling in the interpretations of the generators in \cite{poor,booth} differ slightly for techinical reasons (specifically they designed their presentations to be flexsymmetric following \cite[\S 5]{flexsymmetric}).





It is worth mentioning that stabilizer circuits can be classically simulated probabilistically in polynomial time \cite{gottesmanknill}.  Therefore, all of the fragments that we have discussed so far are not computationally very powerful.  However, stabilizer circuits are very important for quantum error correction, as we will discuss in Chapter \ref{chap:stab}.  In the same Chapter we will also give a relational semantics for quopit stabilizer circuits.

It is also worth mentioning that, at least in the qubit case, there are complete presentations for the ZX-calculus where all phases are allowed \cite{zxcompleteb,zxcompletea}.  This gives a graphical presentation for the full subcategory of $\Mat_\C$ whose objects are powers of $2$; which is of course not classically simulatable in polynomial time.


Up until this point, we have discussed quantum circuits as being generated by spiders. Although spiders are good for copying and adding standard basis elements; it is hard to construct nonlinear behaviour using these generators.


To accommodate for this, {\bf $H$-boxes} were devised in the qubit case by \cite{zh}:

\begin{definition}
Given any $c\in \C$, the $c$-labelled qubit $H$-box with $n$ inputs and $m$ outputs is the operator $\ell^2(\F_2^n)\to \ell^2(\F_2^m)$:

$$
\left\llbracket
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=H] (0) at (1, 11.25) {$c$};
		\node [style=none] (1) at (1.5, 10.5) {};
		\node [style=none] (2) at (1.5, 12) {};
		\node [style=none] (3) at (0.5, 10.5) {};
		\node [style=none] (4) at (0.5, 12) {};
		\node [style=none] (5) at (1, 12) {$\cdots$};
		\node [style=none] (6) at (1, 10.5) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=30, out=-90] (2.center) to (0);
		\draw [in=90, out=-30] (0) to (1.center);
		\draw [in=-150, out=90] (3.center) to (0);
		\draw [in=-90, out=150] (0) to (4.center);
	\end{pgfonlayer}
\end{tikzpicture}
\right\rrbracket
=
\sum_{a_0,\ldots, a_{n-1},b_0,\ldots, b_{m-1} =0}^1
c^{a_0\cdot\ldots\cdot a_{n-1}\cdot b_0\cdot\ldots\cdot b_{m-1}} | b_0,\ldots, b_{m-1}\rangle \langle a_0,\ldots, a_{n-1} |
$$


Ie, the matrix where all entries are $1$, except for the bottom-right entry which is $c$.


The $H$-box with label $-1$ and one input and one out is equal to $\sqrt{2}\mathcal{F}$.
Because of this relationship with the Fourier transform, a ``phase-free'' $H$-box with no label, corresponds to one with label -1:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=H] (0) at (1, 11.25) {};
		\node [style=none] (1) at (1.5, 10.5) {};
		\node [style=none] (2) at (1.5, 12) {};
		\node [style=none] (3) at (0.5, 10.5) {};
		\node [style=none] (4) at (0.5, 12) {};
		\node [style=none] (5) at (1, 12) {$\cdots$};
		\node [style=none] (6) at (1, 10.5) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=30, out=-90] (2.center) to (0);
		\draw [in=90, out=-30] (0) to (1.center);
		\draw [in=-150, out=90] (3.center) to (0);
		\draw [in=-90, out=150] (0) to (4.center);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1, 11.25) {};
		\node [style=H] (10) at (1, 11.25) {$-1$};
		\node [style=none] (1) at (1.5, 10.5) {};
		\node [style=none] (2) at (1.5, 12) {};
		\node [style=none] (3) at (0.5, 10.5) {};
		\node [style=none] (4) at (0.5, 12) {};
		\node [style=none] (5) at (1, 12) {$\cdots$};
		\node [style=none] (6) at (1, 10.5) {$\cdots$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=30, out=-90] (2.center) to (0);
		\draw [in=90, out=-30] (0) to (1.center);
		\draw [in=-150, out=90] (3.center) to (0);
		\draw [in=-90, out=150] (0) to (4.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

This is the reason for the name ``$H$-box'' as the qubit Fourier transform is often called the ``Hadamard gate.''

One should not confuse an $H$-box with one input and one output (drawn in grey) with the antipode for the Hopf algebra (drawn in black) for the $Z$ and $X$-spiders.


Although $H$-boxes do not correspond to Frobenius algebras, they do satisfy a sort of fusion rule:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=H] (0) at (0, 0) {$c$};
		\node [style=none] (1) at (0.5, -0.75) {};
		\node [style=none] (3) at (-0.5, -0.75) {};
		\node [style=none] (6) at (0, -0.75) {$\cdots$};
		\node [style=H] (7) at (0, 1.5) {};
		\node [style=none] (9) at (0.5, 2.25) {};
		\node [style=none] (11) at (-0.5, 2.25) {};
		\node [style=none] (12) at (0, 2.25) {$\cdots$};
		\node [style=H] (14) at (0, 0.75) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw [in=-150, out=90] (3.center) to (0);
		\draw [in=30, out=-90] (9.center) to (7);
		\draw [in=-90, out=150] (7) to (11.center);
		\draw (7) to (14);
		\draw (14) to (0);
	\end{pgfonlayer}
\end{tikzpicture}
=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=H] (0) at (1, 11.25) {$c$};
		\node [style=none] (1) at (1.5, 10.5) {};
		\node [style=none] (2) at (1.5, 12) {};
		\node [style=none] (3) at (0.5, 10.5) {};
		\node [style=none] (4) at (0.5, 12) {};
		\node [style=none] (5) at (1, 12) {$\cdots$};
		\node [style=none] (6) at (1, 10.5) {$\cdots$};
		\node [style=H] (7) at (0, 11.25) {$2$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=30, out=-90] (2.center) to (0);
		\draw [in=90, out=-30] (0) to (1.center);
		\draw [in=-150, out=90] (3.center) to (0);
		\draw [in=-90, out=150] (0) to (4.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$



The following diagram multiplies standard basis elements:

\begin{align*}
\left\llbracket\
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=H] (0) at (0, 3.5) {};
		\node [style=none] (1) at (0.5, 2.75) {};
		\node [style=none] (3) at (-0.5, 2.75) {};
		\node [style=none] (6) at (0, 2.75) {$\cdots$};
		\node [style=H] (7) at (0, 4.25) {};
		\node [style=none] (8) at (0, 5) {};
		\node [style=H] (9) at (-1, 4) {$1/2$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0) to (1.center);
		\draw [in=-150, out=90] (3.center) to (0);
		\draw (0) to (7);
		\draw (7) to (8.center);
	\end{pgfonlayer}
\end{tikzpicture}\
\right\rrbracket
=
\sum_{a_0,\ldots, a_{n-1}=0}^1
|a_0\cdot\ldots\cdot a_{n-1}\rangle\langle a_0,\cdots, a_{n-1}|
\end{align*}

That is to say, $H$-boxes, allow us to construct and-gates, which we denote as follows:

$$
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=none] (0) at (1.25, 3.5) {};
		\node [style=andin] (1) at (1.25, 3.5) {};
		\node [style=none] (2) at (1.75, 2.75) {};
		\node [style=none] (3) at (0.75, 2.75) {};
		\node [style=none] (4) at (1.25, 2.75) {$\cdots$};
		\node [style=none] (5) at (1.25, 4.5) {};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (0.center) to (2.center);
		\draw [in=-150, out=90] (3.center) to (0.center);
		\draw (0.center) to (5.center);
	\end{pgfonlayer}
\end{tikzpicture}
:=
\begin{tikzpicture}
	\begin{pgfonlayer}{nodelayer}
		\node [style=H] (8) at (3.25, 3.5) {};
		\node [style=none] (9) at (3.75, 2.75) {};
		\node [style=none] (10) at (2.75, 2.75) {};
		\node [style=none] (11) at (3.25, 2.75) {$\cdots$};
		\node [style=H] (12) at (3.25, 4.25) {};
		\node [style=none] (13) at (3.25, 5) {};
		\node [style=H] (15) at (2.25, 4) {$1/2$};
	\end{pgfonlayer}
	\begin{pgfonlayer}{edgelayer}
		\draw [in=90, out=-30] (8) to (9.center);
		\draw [in=-150, out=90] (10.center) to (8);
		\draw (8) to (12);
		\draw (12) to (13.center);
	\end{pgfonlayer}
\end{tikzpicture}
$$

\end{definition}

In analogy to the ZX-calculus, the {\bf ZH-calculus} is presented by unphased $Z$ and $X$-spiders, the $\cal X$-gate and phased $H$-boxes.


A {\bf fragment of the ZH-calculus} is a presentation where the phases on the $H$-boxes are restricted.

The full qubit ZH-calculus was proved to be complete and universal for all qubit complex matrices in the original paper \cite{zh}.  Completeness for the phase-free ZH-calculus, where the labels are generated by $-1$, shortly followed \cite{zhpi}.  They show that the phase-free ZH-calculus is universal for qubit matrices over the ring $\Z[1/\sqrt{2}]$.

%TODO GIVE GENERATORS AND EQUATIONS

In the following chapter we prove completeness for the circuits generated by unphased $Z$ and $X$-spiders as well as $\AND$ gates and $\cal X$-gates.  We prove that this is essentially the ZH-calculus whose $H$-boxes have natural number label; the only difference being that we carefully avoid having matrices with entries which are not natural numbers.

Recently, a universal set of generators has been proposed for the qudit ZH-calculus, but no completeness theorem exists so far \cite{roy}.



%TODO TITOUANS DISCARD CONSTRUCTION

%
%
%
%For the interest of the reader,  there has recently been work on axiomatizing density matrices in terms of generators and relations.  Given a $\dag$-monoidal category $\X$, the discard construction on $\X$, $\X^\disc$ can be regarded as the quotient of $\CoPara(\X)$  by the congruence that  the isometries of $\X$ are freely discarded \cite{discard}.  They show, for example,  that when $\X$ is a complete axiomatization of any one of  the qubit stabilizer fragment of the ZX-calculus, the full qubit ZX-calculus, or the ZH-calculus, then there is a $\dag$-symmetric monoidal isomorphism $\X^\disc\cong \CPM(\X)$.  Unlike the CPM construction, this approach to density matrices is amenable to presentations in terms of generators and relations.  All three of these props have complete presentations where their isometries are known, so mixed circuits automatically get a complete axiomatization.   We will see in Chapter \ref{chap:stab} how we add discarding in a very similar way.
